/*! fancyBox v2.1.3 fancyapps.com | fancyapps.com/fancybox/#license */
(function(i,o,t,d){var l=t(i),a=t(o),e=t.fancybox=function(){e.open.apply(this,arguments)},f=null,r=o.createTouch!==d,h=function(e){return e&&e.hasOwnProperty&&e instanceof t},c=function(e){return e&&'string'===t.type(e)},p=function(e){return c(e)&&0<e.indexOf('%')},n=function(t,i){var n=parseInt(t,10)||0;i&&p(t)&&(n*=e.getViewport()[i]/100);return Math.ceil(n)},s=function(e,t){return n(e,t)+'px'};t.extend(e,{version:'2.1.3',defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!r,fitToView:!0,aspectRatio:!1,topRatio:0.5,leftRatio:0.5,scrolling:'auto',wrapCSS:'',arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3E3,preload:3,modal:!1,loop:!0,ajax:{dataType:'html',headers:{'X-fancyBox':!0}},iframe:{scrolling:'auto',preload:!0},swf:{wmode:'transparent',allowfullscreen:'true',allowscriptaccess:'always'},keys:{next:{13:'left',34:'up',39:'left',40:'up'},prev:{8:'right',33:'down',37:'right',38:'down'},close:[27],play:[32],toggle:[70]},direction:{next:'left',prev:'right'},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(t.browser.msie?' allowtransparency="true"':'')+'></iframe>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:'fade',openSpeed:250,openEasing:'swing',openOpacity:!0,openMethod:'zoomIn',closeEffect:'fade',closeSpeed:250,closeEasing:'swing',closeOpacity:!0,closeMethod:'zoomOut',nextEffect:'elastic',nextSpeed:250,nextEasing:'swing',nextMethod:'changeIn',prevEffect:'elastic',prevSpeed:250,prevEasing:'swing',prevMethod:'changeOut',helpers:{overlay:!0,title:!0},onCancel:t.noop,beforeLoad:t.noop,afterLoad:t.noop,beforeShow:t.noop,afterShow:t.noop,beforeChange:t.noop,beforeClose:t.noop,afterClose:t.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(i,n){if(i&&(t.isPlainObject(n)||(n={}),!1!==e.close(!0)))return t.isArray(i)||(i=h(i)?t(i).get():[i]),t.each(i,function(o,a){var l={},s,u,p,r,f;'object'===t.type(a)&&(a.nodeType&&(a=t(a)),h(a)?(l={href:a.data('fancybox-href')||a.attr('href'),title:a.data('fancybox-title')||a.attr('title'),isDom:!0,element:a},t.metadata&&t.extend(!0,l,a.metadata())):l=a);s=n.href||l.href||(c(a)?a:null);u=n.title!==d?n.title:l.title||'';r=(p=n.content||l.content)?'html':n.type||l.type;!r&&l.isDom&&(r=a.data('fancybox-type'),r||(r=(r=a.prop('class').match(/fancybox\.(\w+)/))?r[1]:null));c(s)&&(r||(e.isImage(s)?r='image':e.isSWF(s)?r='swf':'#'===s.charAt(0)?r='inline':c(a)&&(r='html',p=a)),'ajax'===r&&(f=s.split(/\s+/,2),s=f.shift(),f=f.shift()));p||('inline'===r?s?p=t(c(s)?s.replace(/.*(?=#[^\s]+$)/,''):s):l.isDom&&(p=a):'html'===r?p=s:!r&&(!s&&l.isDom)&&(r='inline',p=a));t.extend(l,{href:s,type:r,content:p,title:u,selector:f});i[o]=l}),e.opts=t.extend(!0,{},e.defaults,n),n.keys!==d&&(e.opts.keys=n.keys?t.extend({},e.defaults.keys,n.keys):!1),e.group=i,e._start(e.opts.index)},cancel:function(){var t=e.coming;t&&!1!==e.trigger('onCancel')&&(e.hideLoading(),e.ajaxLoad&&e.ajaxLoad.abort(),e.ajaxLoad=null,e.imgPreload&&(e.imgPreload.onload=e.imgPreload.onerror=null),t.wrap&&t.wrap.stop(!0,!0).trigger('onReset').remove(),e.coming=null,e.current||e._afterZoomOut(t))},close:function(i){e.cancel();!1!==e.trigger('beforeClose')&&(e.unbindEvents(),e.isActive&&(!e.isOpen||!0===i?(t('.fancybox-wrap').stop(!0).trigger('onReset').remove(),e._afterZoomOut()):(e.isOpen=e.isOpened=!1,e.isClosing=!0,t('.fancybox-item, .fancybox-nav').remove(),e.wrap.stop(!0,!0).removeClass('fancybox-opened'),e.transitions[e.current.closeMethod]())))},play:function(i){var n=function(){clearTimeout(e.player.timer)},o=function(){n();e.current&&e.player.isActive&&(e.player.timer=setTimeout(e.next,e.current.playSpeed))},a=function(){n();t('body').unbind('.player');e.player.isActive=!1;e.trigger('onPlayEnd')};if(!0===i||!e.player.isActive&&!1!==i){if(e.current&&(e.current.loop||e.current.index<e.group.length-1))e.player.isActive=!0,t('body').bind({'afterShow.player onUpdate.player':o,'onCancel.player beforeClose.player':a,'beforeLoad.player':n}),o(),e.trigger('onPlayStart')}
else a()},next:function(t){var i=e.current;i&&(c(t)||(t=i.direction.next),e.jumpto(i.index+1,t,'next'))},prev:function(t){var i=e.current;i&&(c(t)||(t=i.direction.prev),e.jumpto(i.index-1,t,'prev'))},jumpto:function(t,i,a){var o=e.current;o&&(t=n(t),e.direction=i||o.direction[t>=o.index?'next':'prev'],e.router=a||'jumpto',o.loop&&(0>t&&(t=o.group.length+t%o.group.length),t%=o.group.length),o.group[t]!==d&&(e.cancel(),e._start(t)))},reposition:function(i,n){var a=e.current,r=a?a.wrap:null,o;r&&(o=e._getPosition(n),i&&'scroll'===i.type?(delete o.position,r.stop(!0,!0).animate(o,200)):(r.css(o),a.pos=t.extend({},a.dim,o)))},update:function(t){var i=t&&t.type,n=!i||'orientationchange'===i;n&&(clearTimeout(f),f=null);e.isOpen&&!f&&(f=setTimeout(function(){var o=e.current;o&&!e.isClosing&&(e.wrap.removeClass('fancybox-tmp'),(n||'load'===i||'resize'===i&&o.autoResize)&&e._setDimension(),'scroll'===i&&o.canShrink||e.reposition(t),e.trigger('onUpdate'),f=null)},n&&!r?0:300))},toggle:function(i){e.isOpen&&(e.current.fitToView='boolean'===t.type(i)?i:!e.current.fitToView,r&&(e.wrap.removeAttr('style').addClass('fancybox-tmp'),e.trigger('onUpdate')),e.update())},hideLoading:function(){a.unbind('.loading');t('#fancybox-loading').remove()},showLoading:function(){var n,i;e.hideLoading();n=t('<div id="fancybox-loading"><div></div></div>').click(e.cancel).appendTo('body');a.bind('keydown.loading',function(t){if(27===(t.which||t.keyCode))t.preventDefault(),e.cancel()});e.defaults.fixed||(i=e.getViewport(),n.css({position:'absolute',top:0.5*i.h+i.y,left:0.5*i.w+i.x}))},getViewport:function(){var n=e.current&&e.current.locked||!1,t={x:l.scrollLeft(),y:l.scrollTop()};n?(t.w=n[0].clientWidth,t.h=n[0].clientHeight):(t.w=r&&i.innerWidth?i.innerWidth:l.width(),t.h=r&&i.innerHeight?i.innerHeight:l.height());return t},unbindEvents:function(){e.wrap&&h(e.wrap)&&e.wrap.unbind('.fb');a.unbind('.fb');l.unbind('.fb')},bindEvents:function(){var i=e.current,n;i&&(l.bind('orientationchange.fb'+(r?'':' resize.fb')+(i.autoCenter&&!i.locked?' scroll.fb':''),e.update),(n=i.keys)&&a.bind('keydown.fb',function(o){var a=o.which||o.keyCode,r=o.target||o.srcElement;if(27===a&&e.coming)return!1;!o.ctrlKey&&(!o.altKey&&!o.shiftKey&&!o.metaKey&&(!r||!r.type&&!t(r).is('[contenteditable]')))&&t.each(n,function(n,r){if(1<i.group.length&&r[a]!==d)return e[n](r[a]),o.preventDefault(),!1;if(-1<t.inArray(a,r))return e[n](),o.preventDefault(),!1})}),t.fn.mousewheel&&i.mouseWheel&&e.wrap.bind('mousewheel.fb',function(n,o,s,r){for(var a=t(n.target||null),l=!1;a.length&&!l&&!a.is('.fancybox-skin')&&!a.is('.fancybox-wrap');)l=a[0]&&!(a[0].style.overflow&&'hidden'===a[0].style.overflow)&&(a[0].clientWidth&&a[0].scrollWidth>a[0].clientWidth||a[0].clientHeight&&a[0].scrollHeight>a[0].clientHeight),a=t(a).parent();if(0!==o&&!l&&1<e.group.length&&!i.canShrink){if(0<r||0<s)e.prev(0<r?'down':'left');else if(0>r||0>s)e.next(0>r?'up':'right');n.preventDefault()}}))},trigger:function(i,n){var a,o=n||e.coming||e.current;if(o){t.isFunction(o[i])&&(a=o[i].apply(o,Array.prototype.slice.call(arguments,1)));if(!1===a)return!1;o.helpers&&t.each(o.helpers,function(n,a){a&&(e.helpers[n]&&t.isFunction(e.helpers[n][i]))&&(a=t.extend(!0,{},e.helpers[n].defaults,a),e.helpers[n][i](a,o))});t.event.trigger(i+'.fb')}},isImage:function(e){return c(e)&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i)},isSWF:function(e){return c(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(i){var o={},l,a,i=n(i);l=e.group[i]||null;if(!l)return!1;o=t.extend(!0,{},e.opts,l);l=o.margin;a=o.padding;'number'===t.type(l)&&(o.margin=[l,l,l,l]);'number'===t.type(a)&&(o.padding=[a,a,a,a]);o.modal&&t.extend(!0,o,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}});o.autoSize&&(o.autoWidth=o.autoHeight=!0);'auto'===o.width&&(o.autoWidth=!0);'auto'===o.height&&(o.autoHeight=!0);o.group=e.group;o.index=i;e.coming=o;if(!1===e.trigger('beforeLoad'))e.coming=null;else{a=o.type;l=o.href;if(!a)return e.coming=null,e.current&&e.router&&'jumpto'!==e.router?(e.current.index=i,e[e.router](e.direction)):!1;e.isActive=!0;if('image'===a||'swf'===a)o.autoHeight=o.autoWidth=!1,o.scrolling='visible';'image'===a&&(o.aspectRatio=!0);'iframe'===a&&r&&(o.scrolling='scroll');o.wrap=t(o.tpl.wrap).addClass('fancybox-'+(r?'mobile':'desktop')+' fancybox-type-'+a+' fancybox-tmp '+o.wrapCSS).appendTo(o.parent||'body');t.extend(o,{skin:t('.fancybox-skin',o.wrap),outer:t('.fancybox-outer',o.wrap),inner:t('.fancybox-inner',o.wrap)});t.each(['Top','Right','Bottom','Left'],function(e,t){o.skin.css('padding'+t,s(o.padding[e]))});e.trigger('onReady');if('inline'===a||'html'===a){if(!o.content||!o.content.length)return e._error('content')}
else if(!l)return e._error('href');'image'===a?e._loadImage():'ajax'===a?e._loadAjax():'iframe'===a?e._loadIframe():e._afterLoad()}},_error:function(i){t.extend(e.coming,{type:'html',autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:'no',hasError:i,content:e.coming.tpl.error});e._afterLoad()},_loadImage:function(){var t=e.imgPreload=new Image;t.onload=function(){this.onload=this.onerror=null;e.coming.width=this.width;e.coming.height=this.height;e._afterLoad()};t.onerror=function(){this.onload=this.onerror=null;e._error('image')};t.src=e.coming.href;!0!==t.complete&&e.showLoading()},_loadAjax:function(){var i=e.coming;e.showLoading();e.ajaxLoad=t.ajax(t.extend({},i.ajax,{url:i.href,error:function(t,i){e.coming&&'abort'!==i?e._error('ajax',t):e.hideLoading()},success:function(t,n){'success'===n&&(i.content=t,e._afterLoad())}}))},_loadIframe:function(){var i=e.coming,n=t(i.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr('scrolling',r?'auto':i.iframe.scrolling).attr('src',i.href);t(i.wrap).bind('onReset',function(){try{t(this).find('iframe').hide().attr('src','//about:blank').end().empty()}catch(e){}});i.iframe.preload&&(e.showLoading(),n.one('load',function(){t(this).data('ready',1);r||t(this).bind('load.fb',e.update);t(this).parents('.fancybox-wrap').width('100%').removeClass('fancybox-tmp').show();e._afterLoad()}));i.content=n.appendTo(i.inner);i.iframe.preload||e._afterLoad()},_preloadImages:function(){var o=e.group,n=e.current,a=o.length,r=n.preload?Math.min(n.preload,a-1):0,t,i;for(i=1;i<=r;i+=1)t=o[(n.index+i)%a],'image'===t.type&&t.href&&((new Image).src=t.href)},_afterLoad:function(){var i=e.coming,o=e.current,n,l,a,r,s;e.hideLoading();if(i&&!1!==e.isActive)if(!1===e.trigger('afterLoad',i,o))i.wrap.stop(!0).trigger('onReset').remove(),e.coming=null;else{o&&(e.trigger('beforeChange',o),o.wrap.stop(!0).removeClass('fancybox-opened').find('.fancybox-item, .fancybox-nav').remove());e.unbindEvents();n=i.content;l=i.type;a=i.scrolling;t.extend(e,{wrap:i.wrap,skin:i.skin,outer:i.outer,inner:i.inner,current:i,previous:o});r=i.href;switch(l){case'inline':case'ajax':case'html':i.selector?n=t('<div>').html(n).find(i.selector):h(n)&&(n.data('fancybox-placeholder')||n.data('fancybox-placeholder',t('<div class="fancybox-placeholder"></div>').insertAfter(n).hide()),n=n.show().detach(),i.wrap.bind('onReset',function(){t(this).find(n).length&&n.hide().replaceAll(n.data('fancybox-placeholder')).data('fancybox-placeholder',!1)}));break;case'image':n=i.tpl.image.replace('{href}',r);break;case'swf':n='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+r+'"></param>',s='',t.each(i.swf,function(e,t){n+='<param name="'+e+'" value="'+t+'"></param>';s+=' '+e+'="'+t+'"'}),n+='<embed src="'+r+'" type="application/x-shockwave-flash" width="100%" height="100%"'+s+'></embed></object>'}(!h(n)||!n.parent().is(i.inner))&&i.inner.append(n);e.trigger('beforeShow');i.inner.css('overflow','yes'===a?'scroll':'no'===a?'hidden':a);e._setDimension();e.reposition();e.isOpen=!1;e.coming=null;e.bindEvents();if(e.isOpened){if(o.prevMethod)e.transitions[o.prevMethod]()}
else t('.fancybox-wrap').not(i.wrap).stop(!0).trigger('onReset').remove();e.transitions[e.isOpened?i.nextMethod:i.openMethod]();e._preloadImages()}},_setDimension:function(){var l=e.getViewport(),L=0,c=!1,i=!1,c=e.wrap,v=e.skin,r=e.inner,a=e.current,i=a.width,o=a.height,d=a.minWidth,h=a.minHeight,f=a.maxWidth,u=a.maxHeight,P=a.scrolling,S=a.scrollOutside?a.scrollbarWidth:0,g=a.margin,m=n(g[1]+g[3]),k=n(g[0]+g[2]),T,y,W,w,x,C,E,b,O;c.add(v).add(r).width('auto').height('auto').removeClass('fancybox-tmp');g=n(v.outerWidth(!0)-v.width());T=n(v.outerHeight(!0)-v.height());y=m+g;W=k+T;w=p(i)?(l.w-y)*n(i)/100:i;x=p(o)?(l.h-W)*n(o)/100:o;if('iframe'===a.type){if(O=a.content,a.autoHeight&&1===O.data('ready'))try{O[0].contentWindow.document.location&&(r.width(w).height(9999),C=O.contents().find('body'),S&&C.css('overflow-x','hidden'),x=C.height())}catch(j){}}
else if(a.autoWidth||a.autoHeight)r.addClass('fancybox-tmp'),a.autoWidth||r.width(w),a.autoHeight||r.height(x),a.autoWidth&&(w=r.width()),a.autoHeight&&(x=r.height()),r.removeClass('fancybox-tmp');i=n(w);o=n(x);b=w/x;d=n(p(d)?n(d,'w')-y:d);f=n(p(f)?n(f,'w')-y:f);h=n(p(h)?n(h,'h')-W:h);u=n(p(u)?n(u,'h')-W:u);C=f;E=u;a.fitToView&&(f=Math.min(l.w-y,f),u=Math.min(l.h-W,u));y=l.w-m;k=l.h-k;a.aspectRatio?(i>f&&(i=f,o=n(i/b)),o>u&&(o=u,i=n(o*b)),i<d&&(i=d,o=n(i/b)),o<h&&(o=h,i=n(o*b))):(i=Math.max(d,Math.min(i,f)),a.autoHeight&&'iframe'!==a.type&&(r.width(i),o=r.height()),o=Math.max(h,Math.min(o,u)));if(a.fitToView)if(r.width(i).height(o),c.width(i+g),l=c.width(),m=c.height(),a.aspectRatio)for(;(l>y||m>k)&&(i>d&&o>h)&&!(19<L++);)o=Math.max(h,Math.min(u,o-10)),i=n(o*b),i<d&&(i=d,o=n(i/b)),i>f&&(i=f,o=n(i/b)),r.width(i).height(o),c.width(i+g),l=c.width(),m=c.height();else i=Math.max(d,Math.min(i,i-(l-y))),o=Math.max(h,Math.min(o,o-(m-k)));S&&('auto'===P&&o<x&&i+g+S<y)&&(i+=S);r.width(i).height(o);c.width(i+g);l=c.width();m=c.height();c=(l>y||m>k)&&i>d&&o>h;i=a.aspectRatio?i<C&&o<E&&i<w&&o<x:(i<C||o<E)&&(i<w||o<x);t.extend(a,{dim:{width:s(l),height:s(m)},origWidth:w,origHeight:x,canShrink:c,canExpand:i,wPadding:g,hPadding:T,wrapSpace:m-v.outerHeight(!0),skinSpace:v.height()-o});!O&&(a.autoHeight&&o>h&&o<u&&!i)&&r.height('auto')},_getPosition:function(t){var n=e.current,o=e.getViewport(),i=n.margin,a=e.wrap.width()+i[1]+i[3],r=e.wrap.height()+i[0]+i[2],i={position:'absolute',top:i[0],left:i[3]};n.autoCenter&&n.fixed&&!t&&r<=o.h&&a<=o.w?i.position='fixed':n.locked||(i.top+=o.y,i.left+=o.x);i.top=s(Math.max(i.top,i.top+(o.h-r)*n.topRatio));i.left=s(Math.max(i.left,i.left+(o.w-a)*n.leftRatio));return i},_afterZoomIn:function(){var i=e.current;i&&(e.isOpen=e.isOpened=!0,e.wrap.css('overflow','visible').addClass('fancybox-opened'),e.update(),(i.closeClick||i.nextClick&&1<e.group.length)&&e.inner.css('cursor','pointer').bind('click.fb',function(n){!t(n.target).is('a')&&!t(n.target).parent().is('a')&&(n.preventDefault(),e[i.closeClick?'close':'next']())}),i.closeBtn&&t(i.tpl.closeBtn).appendTo(e.skin).bind(r?'touchstart.fb':'click.fb',function(t){t.preventDefault();e.close()}),i.arrows&&1<e.group.length&&((i.loop||0<i.index)&&t(i.tpl.prev).appendTo(e.outer).bind('click.fb',e.prev),(i.loop||i.index<e.group.length-1)&&t(i.tpl.next).appendTo(e.outer).bind('click.fb',e.next)),e.trigger('afterShow'),!i.loop&&i.index===i.group.length-1?e.play(!1):e.opts.autoPlay&&!e.player.isActive&&(e.opts.autoPlay=!1,e.play()))},_afterZoomOut:function(i){i=i||e.current;t('.fancybox-wrap').trigger('onReset').remove();t.extend(e,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});e.trigger('afterClose',i)}});e.transitions={getOrigPosition:function(){var t=e.current,a=t.element,i=t.orig,n={},r=50,l=50,c=t.hPadding,d=t.wPadding,o=e.getViewport();!i&&(t.isDom&&a.is(':visible'))&&(i=a.find('img:first'),i.length||(i=a));h(i)?(n=i.offset(),i.is('img')&&(r=i.outerWidth(),l=i.outerHeight())):(n.top=o.y+(o.h-l)*t.topRatio,n.left=o.x+(o.w-r)*t.leftRatio);if('fixed'===e.wrap.css('position')||t.locked)n.top-=o.y,n.left-=o.x;return n={top:s(n.top-c*t.topRatio),left:s(n.left-d*t.leftRatio),width:s(r+d),height:s(l+c)}},step:function(t,i){var r,o,a=i.prop;o=e.current;var s=o.wrapSpace,l=o.skinSpace;if('width'===a||'height'===a)r=i.end===i.start?1:(t-i.start)/(i.end-i.start),e.isClosing&&(r=1-r),o='width'===a?o.wPadding:o.hPadding,o=t-o,e.skin[a](n('width'===a?o:o-s*r)),e.inner[a](n('width'===a?o:o-s*r-l*r))},zoomIn:function(){var i=e.current,n=i.pos,o=i.openEffect,a='elastic'===o,r=t.extend({opacity:1},n);delete r.position;a?(n=this.getOrigPosition(),i.openOpacity&&(n.opacity=0.1)):'fade'===o&&(n.opacity=0.1);e.wrap.css(n).animate(r,{duration:'none'===o?0:i.openSpeed,easing:i.openEasing,step:a?this.step:null,complete:e._afterZoomIn})},zoomOut:function(){var t=e.current,n=t.closeEffect,o='elastic'===n,i={opacity:0.1};o&&(i=this.getOrigPosition(),t.closeOpacity&&(i.opacity=0.1));e.wrap.animate(i,{duration:'none'===n?0:t.closeSpeed,easing:t.closeEasing,step:o?this.step:null,complete:e._afterZoomOut})},changeIn:function(){var o=e.current,l=o.nextEffect,i=o.pos,r={opacity:1},a=e.direction,t;i.opacity=0.1;'elastic'===l&&(t='down'===a||'up'===a?'top':'left','down'===a||'right'===a?(i[t]=s(n(i[t])-200),r[t]='+=200px'):(i[t]=s(n(i[t])+200),r[t]='-=200px'));'none'===l?e._afterZoomIn():e.wrap.css(i).animate(r,{duration:o.nextSpeed,easing:o.nextEasing,complete:function(){setTimeout(e._afterZoomIn,20)}})},changeOut:function(){var i=e.previous,o=i.prevEffect,a={opacity:0.1},n=e.direction;'elastic'===o&&(a['down'===n||'up'===n?'top':'left']=('up'===n||'left'===n?'-':'+')+'=200px');i.wrap.animate(a,{duration:'none'===o?0:i.prevSpeed,easing:i.prevEasing,complete:function(){t(this).trigger('onReset').remove()}})}};e.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!r,fixed:!0},overlay:null,fixed:!1,create:function(i){i=t.extend({},this.defaults,i);this.overlay&&this.close();this.overlay=t('<div class="fancybox-overlay"></div>').appendTo('body');this.fixed=!1;i.fixed&&e.defaults.fixed&&(this.overlay.addClass('fancybox-overlay-fixed'),this.fixed=!0)},open:function(i){var n=this,i=t.extend({},this.defaults,i);this.overlay?this.overlay.unbind('.overlay').width('auto').height('auto'):this.create(i);this.fixed||(l.bind('resize.overlay',t.proxy(this.update,this)),this.update());i.closeClick&&this.overlay.bind('click.overlay',function(i){t(i.target).hasClass('fancybox-overlay')&&(e.isActive?e.close():n.close())});this.overlay.css(i.css).show()},close:function(){t('.fancybox-overlay').remove();l.unbind('resize.overlay');this.overlay=null;!1!==this.margin&&(t('body').css('margin-right',this.margin),this.margin=!1);this.el&&this.el.removeClass('fancybox-lock')},update:function(){var e='100%',i;this.overlay.width(e).height('100%');t.browser.msie?(i=Math.max(o.documentElement.offsetWidth,o.body.offsetWidth),a.width()>i&&(e=a.width())):a.width()>l.width()&&(e=a.width());this.overlay.width(e).height(a.height())},onReady:function(e,i){t('.fancybox-overlay').stop(!0,!0);this.overlay||(this.margin=a.height()>l.height()||'scroll'===t('body').css('overflow-y')?t('body').css('margin-right'):!1,this.el=o.all&&!o.querySelector?t('html'):t('body'),this.create(e));e.locked&&this.fixed&&(i.locked=this.overlay.append(i.wrap),i.fixed=!1);!0===e.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(e,i){i.locked&&(this.el.addClass('fancybox-lock'),!1!==this.margin&&t('body').css('margin-right',n(this.margin)+i.scrollbarWidth));this.open(e)},onUpdate:function(){this.fixed||this.update()},afterClose:function(i){this.overlay&&!e.isActive&&this.overlay.fadeOut(i.speedOut,t.proxy(this.close,this))}};e.helpers.title={defaults:{type:'float',position:'bottom'},beforeShow:function(i){var o=e.current,r=o.title,a=i.type;t.isFunction(r)&&(r=r.call(o.element,o));if(c(r)&&''!==t.trim(r)){o=t('<div class="fancybox-title fancybox-title-'+a+'-wrap">'+r+'</div>');switch(a){case'inside':a=e.skin;break;case'outside':a=e.wrap;break;case'over':a=e.inner;break;default:a=e.skin,o.appendTo('body'),t.browser.msie&&o.width(o.width()),o.wrapInner('<span class="child"></span>'),e.current.margin[2]+=Math.abs(n(o.css('margin-bottom')))};o['top'===i.position?'prependTo':'appendTo'](a)}}};t.fn.fancybox=function(i){var o,r=t(this),n=this.selector||'',s=function(a){var s=t(this).blur(),d=o,c,l;!a.ctrlKey&&(!a.altKey&&!a.shiftKey&&!a.metaKey)&&!s.is('.fancybox-wrap')&&(c=i.groupAttr||'data-fancybox-group',l=s.attr(c),l||(c='rel',l=s.get(0)[c]),l&&(''!==l&&'nofollow'!==l)&&(s=n.length?t(n):r,s=s.filter('['+c+'="'+l+'"]'),d=s.index(this)),i.index=d,!1!==e.open(s,i)&&a.preventDefault())},i=i||{};o=i.index||0;!n||!1===i.live?r.unbind('click.fb-start').bind('click.fb-start',s):a.undelegate(n,'click.fb-start').delegate(n+':not(\'.fancybox-item, .fancybox-nav\')','click.fb-start',s);this.filter('[data-fancybox-start=1]').trigger('click');return this};a.ready(function(){t.scrollbarWidth===d&&(t.scrollbarWidth=function(){var i=t('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo('body'),e=i.children(),e=e.innerWidth()-e.height(99).innerWidth();i.remove();return e});if(t.support.fixedPosition===d){var n=t.support,i=t('<div style="position:fixed;top:20px;"></div>').appendTo('body'),o=20===i[0].offsetTop||15===i[0].offsetTop;i.remove();n.fixedPosition=o};t.extend(e.defaults,{scrollbarWidth:t.scrollbarWidth(),fixed:t.support.fixedPosition,parent:t('body')})})})(window,document,jQuery);
;var wysihtml5={version:'0.3.0',commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:'\uFEFF',EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};window['rangy']=(function(){var g='object',w='function',r='undefined',C=['startContainer','startOffset','endContainer','endOffset','collapsed','commonAncestorContainer','START_TO_START','START_TO_END','END_TO_START','END_TO_END'],N=['setStart','setStartBefore','setStartAfter','setEnd','setEndBefore','setEndAfter','collapse','selectNode','selectNodeContents','compareBoundaryPoints','deleteContents','extractContents','cloneContents','insertNode','surroundContents','cloneRange','toString','detach'],E=['boundingHeight','boundingLeft','boundingTop','boundingWidth','htmlText','text'],b=['collapse','compareEndPoints','duplicate','getBookmark','moveToBookmark','moveToElementText','parentElement','pasteHTML','select','setEndPoint','getBoundingClientRect'];function t(e,t){var n=typeof e[t];return n==w||(!!(n==g&&e[t]))||n=='unknown'};function o(e,t){return!!(typeof e[t]==g&&e[t])};function p(e,t){return typeof e[t]!=r};function f(e){return function(t,n){var r=n.length;while(r--){if(!e(t,n[r])){return!1}};return!0}};var c=f(t),y=f(o),l=f(p);function v(e){return e&&c(e,b)&&l(e,E)};var e={version:'1.2.2',initialized:!1,supported:!0,util:{isHostMethod:t,isHostObject:o,isHostProperty:p,areHostMethods:c,areHostObjects:y,areHostProperties:l,isTextRange:v},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};function n(t){window.alert('Rangy not supported in your browser. Reason: '+t);e.initialized=!0;e.supported=!1};e.fail=n;function S(t){var n='Rangy warning: '+t;if(e.config.alertOnWarn){window.alert(n)}
else if(typeof window.console!=r&&typeof window.console.log!=r){window.console.log(n)}};e.warn=S;if({}.hasOwnProperty){e.util.extend=function(e,t){for(var n in t){if(t.hasOwnProperty(n)){e[n]=t[n]}}}}
else{n('hasOwnProperty not supported')};var h=[],m=[];function u(){if(e.initialized){return};var i,f=!1,u=!1;if(t(document,'createRange')){i=document.createRange();if(c(i,N)&&l(i,C)){f=!0};i.detach()};var a=o(document,'body')?document.body:document.getElementsByTagName('body')[0];if(a&&t(a,'createTextRange')){i=a.createTextRange();if(v(i)){u=!0}};if(!f&&!u){n('Neither Range nor TextRange are implemented')};e.initialized=!0;e.features={implementsDomRange:f,implementsTextRange:u};var d=m.concat(h);for(var s=0,g=d.length;s<g;++s){try{d[s](e)}catch(r){if(o(window,'console')&&t(window.console,'log')){window.console.log('Init listener threw an exception. Continuing.',r)}}}};e.init=u;e.addInitListener=function(t){if(e.initialized){t(e)}
else{h.push(t)}};var a=[];e.addCreateMissingNativeApiListener=function(e){a.push(e)};function T(e){e=e||window;u();for(var t=0,n=a.length;t<n;++t){a[t](e)}};e.createMissingNativeApi=T;function i(e){this.name=e;this.initialized=!1;this.supported=!1};i.prototype.fail=function(e){this.initialized=!0;this.supported=!1;throw new Error('Module \''+this.name+'\' failed to load: '+e)};i.prototype.warn=function(t){e.warn('Module '+this.name+': '+t)};i.prototype.createError=function(e){return new Error('Error in Rangy '+this.name+' module: '+e)};e.createModule=function(t,n){var r=new i(t);e.modules[t]=r;m.push(function(e){n(e,r);r.initialized=!0;r.supported=!0})};e.requireModules=function(t){for(var o=0,s=t.length,n,r;o<s;++o){r=t[o];n=e.modules[r];if(!n||!(n instanceof i)){throw new Error('Module \''+r+'\' not found')};if(!n.supported){throw new Error('Module \''+r+'\' not supported')}}};var d=!1,s=function(t){if(!d){d=!0;if(!e.initialized){u()}}};if(typeof window==r){n('No window found');return};if(typeof document==r){n('No document found');return};if(t(document,'addEventListener')){document.addEventListener('DOMContentLoaded',s,!1)};if(t(window,'addEventListener')){window.addEventListener('load',s,!1)}
else if(t(window,'attachEvent')){window.attachEvent('onload',s)}
else{n('Window does not have required addEventListener or attachEvent method')};return e})();rangy.createModule('DomUtil',function(e,t){var n='undefined',r=e.util;if(!r.areHostMethods(document,['createDocumentFragment','createElement','createTextNode'])){t.fail('document missing a Node creation method')};if(!r.isHostMethod(document,'getElementsByTagName')){t.fail('document missing getElementsByTagName method')};var o=document.createElement('div');if(!r.areHostMethods(o,['insertBefore','appendChild','cloneNode']||!r.areHostObjects(o,['previousSibling','nextSibling','childNodes','parentNode']))){t.fail('Incomplete Element implementation')};if(!r.isHostProperty(o,'innerHTML')){t.fail('Element is missing innerHTML property')};var u=document.createTextNode('test');if(!r.areHostMethods(u,['splitText','deleteData','insertData','appendData','cloneNode']||!r.areHostObjects(o,['previousSibling','nextSibling','childNodes','parentNode'])||!r.areHostProperties(u,['data']))){t.fail('Incomplete Text Node implementation')};var f=function(e,t){var n=e.length;while(n--){if(e[n]===t){return!0}};return!1};function v(e){var t;return typeof e.namespaceURI==n||((t=e.namespaceURI)===null||t=='http://www.w3.org/1999/xhtml')};function y(e){var t=e.parentNode;return(t.nodeType==1)?t:null};function a(e){var t=0;while((e=e.previousSibling)){t++};return t};function w(e){var t;return c(e)?e.length:((t=e.childNodes)?t.length:0)};function d(e,t){var r=[],n;for(n=e;n;n=n.parentNode){r.push(n)};for(n=t;n;n=n.parentNode){if(f(r,n)){return n}};return null};function C(e,t,n){var r=n?t:t.parentNode;while(r){if(r===e){return!0}
else{r=r.parentNode}};return!1};function i(e,t,n){var i,r=n?e:e.parentNode;while(r){i=r.parentNode;if(i===t){return r};r=i};return null};function c(e){var t=e.nodeType;return t==3||t==4||t==8};function h(e,t){var n=t.nextSibling,r=t.parentNode;if(n){r.insertBefore(e,n)}
else{r.appendChild(e)};return e};function N(e,t){var n=e.cloneNode(!1);n.deleteData(0,t);e.deleteData(t,e.length-t);h(n,e);return n};function s(e){if(e.nodeType==9){return e}
else if(typeof e.ownerDocument!=n){return e.ownerDocument}
else if(typeof e.document!=n){return e.document}
else if(e.parentNode){return s(e.parentNode)}
else{throw new Error('getDocument: no document found for node')}};function E(e){var t=s(e);if(typeof t.defaultView!=n){return t.defaultView}
else if(typeof t.parentWindow!=n){return t.parentWindow}
else{throw new Error('Cannot get a window object for node')}};function b(e){if(typeof e.contentDocument!=n){return e.contentDocument}
else if(typeof e.contentWindow!=n){return e.contentWindow.document}
else{throw new Error('getIframeWindow: No Document object found for iframe element')}};function S(e){if(typeof e.contentWindow!=n){return e.contentWindow}
else if(typeof e.contentDocument!=n){return e.contentDocument.defaultView}
else{throw new Error('getIframeWindow: No Window object found for iframe element')}};function T(e){return r.isHostObject(e,'body')?e.body:e.getElementsByTagName('body')[0]};function x(e){var t;while((t=e.parentNode)){e=t};return e};function R(e,t,n,r){var c,o,l,f,s;if(e==n){return t===r?0:(t<r)?-1:1}
else if((c=i(n,e,!0))){return t<=a(c)?-1:1}
else if((c=i(e,n,!0))){return a(c)<r?-1:1}
else{o=d(e,n);l=(e===o)?o:i(e,o,!0);f=(n===o)?o:i(n,o,!0);if(l===f){throw new Error('comparePoints got to case 4 and childA and childB are the same!')}
else{s=o.firstChild;while(s){if(s===l){return-1}
else if(s===f){return 1};s=s.nextSibling};throw new Error('Should not be here!')}}};function A(e){var t=s(e).createDocumentFragment(),n;while((n=e.firstChild)){t.appendChild(n)};return t};function m(e){if(!e){return'[No node]'};if(c(e)){return'"'+e.data+'"'}
else if(e.nodeType==1){var t=e.id?' id="'+e.id+'"':'';return'<'+e.nodeName+t+'>['+e.childNodes.length+']'}
else{return e.nodeName}};function g(e){this.root=e;this._next=e};g.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next,t,n;if(this._current){t=e.firstChild;if(t){this._next=t}
else{n=null;while((e!==this.root)&&!(n=e.nextSibling)){e=e.parentNode};this._next=n}};return this._current},detach:function(){this._current=this._next=this.root=null}};function D(e){return new g(e)};function p(e,t){this.node=e;this.offset=t};p.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return'[DomPosition('+m(this.node)+':'+this.offset+')]'}};function l(e){this.code=this[e];this.codeName=e;this.message='DOMException: '+this.codeName};l.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11};l.prototype.toString=function(){return this.message};e.dom={arrayContains:f,isHtmlNamespace:v,parentElement:y,getNodeIndex:a,getNodeLength:w,getCommonAncestor:d,isAncestorOf:C,getClosestAncestorIn:i,isCharacterDataNode:c,insertAfter:h,splitDataNode:N,getDocument:s,getWindow:E,getIframeWindow:S,getIframeDocument:b,getBody:T,getRootContainer:x,comparePoints:R,inspectNode:m,fragmentFromNodeChildren:A,createIterator:D,DomPosition:p};e.DOMException=l});rangy.createModule('DomRange',function(e,t){e.requireModules(['DomUtil']);var n=e.dom,H=n.DomPosition,a=e.DOMException;function h(e,t){return(e.nodeType!=3)&&(n.isAncestorOf(e,t.startContainer,!0)||n.isAncestorOf(e,t.endContainer,!0))};function o(e){return n.getDocument(e.startContainer)};function B(e,t,n){var i=e._listeners[t];if(i){for(var r=0,o=i.length;r<o;++r){i[r].call(e,{target:e,args:n})}}};function V(e){return new H(e.parentNode,n.getNodeIndex(e))};function b(e){return new H(e.parentNode,n.getNodeIndex(e)+1)};function W(e,t,r){var i=e.nodeType==11?e.firstChild:e;if(n.isCharacterDataNode(t)){if(r==t.length){n.insertAfter(e,t)}
else{t.parentNode.insertBefore(e,r==0?t:n.splitDataNode(t,r))}}
else if(r>=t.childNodes.length){t.appendChild(e)}
else{t.insertBefore(e,t.childNodes[r])};return i};function z(e){var r;for(var t,i=o(e.range).createDocumentFragment(),n;t=e.next();){r=e.isPartiallySelectedSubtree();t=t.cloneNode(!r);if(r){n=e.getSubtreeIterator();t.appendChild(z(n));n.detach(!0)};if(t.nodeType==10){throw new a('HIERARCHY_REQUEST_ERR')};i.appendChild(t)};return i};function p(e,t,r){var s,a;r=r||{stop:!1};for(var i,o;i=e.next();){if(e.isPartiallySelectedSubtree()){if(t(i)===!1){r.stop=!0;return}
else{o=e.getSubtreeIterator();p(o,t,r);o.detach(!0);if(r.stop){return}}}
else{s=n.createIterator(i);while((a=s.next())){if(t(a)===!1){r.stop=!0;return}}}}};function q(e){var t;while(e.next()){if(e.isPartiallySelectedSubtree()){t=e.getSubtreeIterator();q(t);t.detach(!0)}
else{e.remove()}}};function U(e){for(var t,r=o(e.range).createDocumentFragment(),n;t=e.next();){if(e.isPartiallySelectedSubtree()){t=t.cloneNode(!1);n=e.getSubtreeIterator();t.appendChild(U(n));n.detach(!0)}
else{e.remove()};if(t.nodeType==10){throw new a('HIERARCHY_REQUEST_ERR')};r.appendChild(t)};return r};function j(e,t,n){var i=!!(t&&t.length),o,s=!!n;if(i){o=new RegExp('^('+t.join('|')+')$')};var r=[];p(new l(e,!1),function(e){if((!i||o.test(e.nodeType))&&(!s||n(e))){r.push(e)}});return r};function F(e){var t=(typeof e.getName=='undefined')?'Range':e.getName();return'['+t+'('+n.inspectNode(e.startContainer)+':'+e.startOffset+', '+n.inspectNode(e.endContainer)+':'+e.endOffset+')]'};function l(e,t){this.range=e;this.clonePartiallySelectedTextNodes=t;if(!e.collapsed){this.sc=e.startContainer;this.so=e.startOffset;this.ec=e.endContainer;this.eo=e.endOffset;var r=e.commonAncestorContainer;if(this.sc===this.ec&&n.isCharacterDataNode(this.sc)){this.isSingleCharacterDataNode=!0;this._first=this._last=this._next=this.sc}
else{this._first=this._next=(this.sc===r&&!n.isCharacterDataNode(this.sc))?this.sc.childNodes[this.so]:n.getClosestAncestorIn(this.sc,r,!0);this._last=(this.ec===r&&!n.isCharacterDataNode(this.ec))?this.ec.childNodes[this.eo-1]:n.getClosestAncestorIn(this.ec,r,!0)}}};l.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null;this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;if(e){this._next=(e!==this._last)?e.nextSibling:null;if(n.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes){if(e===this.ec){(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo)};if(this._current===this.sc){(e=e.cloneNode(!0)).deleteData(0,this.so)}}};return e},remove:function(){var e=this._current,t,r;if(n.isCharacterDataNode(e)&&(e===this.sc||e===this.ec)){t=(e===this.sc)?this.so:0;r=(e===this.ec)?this.eo:e.length;if(t!=r){e.deleteData(t,r-t)}}
else{if(e.parentNode){e.parentNode.removeChild(e)}
else{}}},isPartiallySelectedSubtree:function(){var e=this._current;return h(e,this.range)},getSubtreeIterator:function(){var t;if(this.isSingleCharacterDataNode){t=this.range.cloneRange();t.collapse()}
else{t=new s(o(this.range));var e=this._current,r=e,i=0,a=e,c=n.getNodeLength(e);if(n.isAncestorOf(e,this.sc,!0)){r=this.sc;i=this.so};if(n.isAncestorOf(e,this.ec,!0)){a=this.ec;c=this.eo};ne(t,r,i,a,c)};return new l(t,this.clonePartiallySelectedTextNodes)},detach:function(e){if(e){this.range.detach()};this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};function f(e){this.code=this[e];this.codeName=e;this.message='RangeException: '+this.codeName};f.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2};f.prototype.toString=function(){return this.message};function K(e,t,n){this.nodes=j(e,t,n);this._next=this.nodes[0];this._position=0};K.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){this._current=this._next;this._next=this.nodes[++this._position];return this._current},detach:function(){this._current=this._next=this.nodes=null}};var M=[1,3,4,5,7,8,10],k=[2,9,11],ae=[5,6,10,12],ce=[1,3,4,5,7,8,10,11],le=[1,3,4,5,7,8];function S(e){return function(t,r){var o,i=r?t:t.parentNode;while(i){o=i.nodeType;if(n.arrayContains(e,o)){return i};i=i.parentNode};return null}};var d=n.getRootContainer,E=S([9,11]),oe=S(ae),se=S([6,10,12]);function m(e,t){if(se(e,t)){throw new f('INVALID_NODE_TYPE_ERR')}};function c(e){if(!e.startContainer){throw new a('INVALID_STATE_ERR')}};function g(e,t){if(!n.arrayContains(t,e.nodeType)){throw new f('INVALID_NODE_TYPE_ERR')}};function T(e,t){if(t<0||t>(n.isCharacterDataNode(e)?e.length:e.childNodes.length)){throw new a('INDEX_SIZE_ERR')}};function x(e,t){if(E(e,!0)!==E(t,!0)){throw new a('WRONG_DOCUMENT_ERR')}};function u(e){if(oe(e,!0)){throw new a('NO_MODIFICATION_ALLOWED_ERR')}};function v(e,t){if(!e){throw new a(t)}};function Y(e){return!n.arrayContains(k,e.nodeType)&&!E(e,!0)};function G(e,t){return t<=(n.isCharacterDataNode(e)?e.length:e.childNodes.length)};function i(e){c(e);if(Y(e.startContainer)||Y(e.endContainer)||!G(e.startContainer,e.startOffset)||!G(e.endContainer,e.endOffset)){throw new Error('Range error: Range is no longer valid after DOM mutation ('+e.inspect()+')')}};var P=document.createElement('style'),N=!1;try{P.innerHTML='<b>x</b>';N=(P.firstChild.nodeType==3)}catch(r){};e.features.htmlParsingConforms=N;var re=N?function(e){var r=this.startContainer,i=n.getDocument(r);if(!r){throw new a('INVALID_STATE_ERR')};var t=null;if(r.nodeType==1){t=r}
else if(n.isCharacterDataNode(r)){t=n.parentElement(r)};if(t===null||(t.nodeName=='HTML'&&n.isHtmlNamespace(n.getDocument(t).documentElement)&&n.isHtmlNamespace(t))){t=i.createElement('body')}
else{t=t.cloneNode(!1)};t.innerHTML=e;return n.fragmentFromNodeChildren(t)}:function(e){c(this);var r=o(this),t=r.createElement('body');t.innerHTML=e;return n.fragmentFromNodeChildren(t)},y=['startContainer','startOffset','endContainer','endOffset','collapsed','commonAncestorContainer'],w=0,A=1,ie=2,D=3,O=0,L=1,I=2,C=3;function R(){};R.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){i(this);x(this.startContainer,t.startContainer);var r,o,s,a,c=(e==D||e==w)?'start':'end',l=(e==A||e==w)?'start':'end';r=this[c+'Container'];o=this[c+'Offset'];s=t[l+'Container'];a=t[l+'Offset'];return n.comparePoints(r,o,s,a)},insertNode:function(e){i(this);g(e,ce);u(this.startContainer);if(n.isAncestorOf(e,this.startContainer,!0)){throw new a('HIERARCHY_REQUEST_ERR')};var t=W(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){i(this);var e,t;if(this.collapsed){return o(this).createDocumentFragment()}
else{if(this.startContainer===this.endContainer&&n.isCharacterDataNode(this.startContainer)){e=this.startContainer.cloneNode(!0);e.data=e.data.slice(this.startOffset,this.endOffset);t=o(this).createDocumentFragment();t.appendChild(e);return t}
else{var r=new l(this,!0);e=z(r);r.detach()};return e}},canSurroundContents:function(){i(this);u(this.startContainer);u(this.endContainer);var e=new l(this,!0),t=(e._first&&(h(e._first,this))||(e._last&&h(e._last,this)));e.detach();return!t},surroundContents:function(e){g(e,le);if(!this.canSurroundContents()){throw new f('BAD_BOUNDARYPOINTS_ERR')};var t=this.extractContents();if(e.hasChildNodes()){while(e.lastChild){e.removeChild(e.lastChild)}};W(e,this.startContainer,this.startOffset);e.appendChild(t);this.selectNode(e)},cloneRange:function(){i(this);var t=new s(o(this)),n=y.length,e;while(n--){e=y[n];t[e]=this[e]};return t},toString:function(){i(this);var e=this.startContainer;if(e===this.endContainer&&n.isCharacterDataNode(e)){return(e.nodeType==3||e.nodeType==4)?e.data.slice(this.startOffset,this.endOffset):''}
else{var t=[],r=new l(this,!0);p(r,function(e){if(e.nodeType==3||e.nodeType==4){t.push(e.data)}});r.detach();return t.join('')}},compareNode:function(e){i(this);var t=e.parentNode,o=n.getNodeIndex(e);if(!t){throw new a('NOT_FOUND_ERR')};var s=this.comparePoint(t,o),r=this.comparePoint(t,o+1);if(s<0){return(r>0)?I:O}
else{return(r>0)?L:C}},comparePoint:function(e,t){i(this);v(e,'HIERARCHY_REQUEST_ERR');x(e,this.startContainer);if(n.comparePoints(e,t,this.startContainer,this.startOffset)<0){return-1}
else if(n.comparePoints(e,t,this.endContainer,this.endOffset)>0){return 1};return 0},createContextualFragment:re,toHtml:function(){i(this);var e=o(this).createElement('div');e.appendChild(this.cloneContents());return e.innerHTML},intersectsNode:function(e,t){i(this);v(e,'NOT_FOUND_ERR');if(n.getDocument(e)!==o(this)){return!1};var r=e.parentNode,c=n.getNodeIndex(e);v(r,'NOT_FOUND_ERR');var s=n.comparePoints(r,c,this.endContainer,this.endOffset),a=n.comparePoints(r,c+1,this.startContainer,this.startOffset);return t?s<=0&&a>=0:s<0&&a>0},isPointInRange:function(e,t){i(this);v(e,'HIERARCHY_REQUEST_ERR');x(e,this.startContainer);return(n.comparePoints(e,t,this.startContainer,this.startOffset)>=0)&&(n.comparePoints(e,t,this.endContainer,this.endOffset)<=0)},intersectsRange:function(e,t){i(this);if(o(e)!=o(this)){throw new a('WRONG_DOCUMENT_ERR')};var r=n.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),s=n.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?r<=0&&s>=0:r<0&&s>0},intersection:function(e){if(this.intersectsRange(e)){var r=n.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),i=n.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),t=this.cloneRange();if(r==-1){t.setStart(e.startContainer,e.startOffset)};if(i==1){t.setEnd(e.endContainer,e.endOffset)};return t};return null},union:function(e){if(this.intersectsRange(e,!0)){var t=this.cloneRange();if(n.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)==-1){t.setStart(e.startContainer,e.startOffset)};if(n.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)==1){t.setEnd(e.endContainer,e.endOffset)};return t}
else{throw new f('Ranges do not intersect')}},containsNode:function(e,t){if(t){return this.intersectsNode(e,!1)}
else{return this.compareNode(e)==C}},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,n.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var r=n.pop();t.setEnd(r,r.length);var i=this.containsRange(t);t.detach();return i}
else{return this.containsNodeContents(e)}},createNodeIterator:function(e,t){i(this);return new K(this,e,t)},getNodes:function(e,t){i(this);return j(this,e,t)},getDocument:function(){return o(this)},collapseBefore:function(e){c(this);this.setEndBefore(e);this.collapse(!1)},collapseAfter:function(e){c(this);this.setStartAfter(e);this.collapse(!0)},getName:function(){return'DomRange'},equals:function(e){return s.rangesEqual(this,e)},inspect:function(){return F(this)}};function X(e){e.START_TO_START=w;e.START_TO_END=A;e.END_TO_END=ie;e.END_TO_START=D;e.NODE_BEFORE=O;e.NODE_AFTER=L;e.NODE_BEFORE_AND_AFTER=I;e.NODE_INSIDE=C};function Q(e){X(e);X(e.prototype)};function Z(e,t){return function(){i(this);var r=this.startContainer,s=this.startOffset,c=this.commonAncestorContainer,o=new l(this,!0),f,a;if(r!==c){f=n.getClosestAncestorIn(r,c,!0);a=b(f);r=a.node;s=a.offset};p(o,u);o.reset();var d=e(o);o.detach();t(this,r,s,r,s);return d}};function ee(t,r,o){function s(e,t){return function(n){c(this);g(n,M);g(d(n),k);var r=(e?V:b)(n);(t?a:f)(this,r.node,r.offset)}};function a(e,t,i){var o=e.endContainer,s=e.endOffset;if(t!==e.startContainer||i!==e.startOffset){if(d(t)!=d(o)||n.comparePoints(t,i,o,s)==1){o=t;s=i};r(e,t,i,o,s)}};function f(e,t,i){var o=e.startContainer,s=e.startOffset;if(t!==e.endContainer||i!==e.endOffset){if(d(t)!=d(o)||n.comparePoints(t,i,o,s)==-1){o=t;s=i};r(e,o,s,t,i)}};function p(e,t,n){if(t!==e.startContainer||n!==e.startOffset||t!==e.endContainer||n!==e.endOffset){r(e,t,n,t,n)}};t.prototype=new R();e.util.extend(t.prototype,{setStart:function(e,t){c(this);m(e,!0);T(e,t);a(this,e,t)},setEnd:function(e,t){c(this);m(e,!0);T(e,t);f(this,e,t)},setStartBefore:s(!0,!0),setStartAfter:s(!1,!0),setEndBefore:s(!0,!1),setEndAfter:s(!1,!1),collapse:function(e){i(this);if(e){r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset)}
else{r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)}},selectNodeContents:function(e){c(this);m(e,!0);r(this,e,0,e,n.getNodeLength(e))},selectNode:function(e){c(this);m(e,!1);g(e,M);var t=V(e),n=b(e);r(this,t.node,t.offset,n.node,n.offset)},extractContents:Z(U,r),deleteContents:Z(q,r),canSurroundContents:function(){i(this);u(this.startContainer);u(this.endContainer);var e=new l(this,!0),t=(e._first&&(h(e._first,this))||(e._last&&h(e._last,this)));e.detach();return!t},detach:function(){o(this)},splitBoundaries:function(){i(this);var e=this.startContainer,s=this.startOffset,t=this.endContainer,o=this.endOffset,a=(e===t);if(n.isCharacterDataNode(t)&&o>0&&o<t.length){n.splitDataNode(t,o)};if(n.isCharacterDataNode(e)&&s>0&&s<e.length){e=n.splitDataNode(e,s);if(a){o-=s;t=e}
else if(t==e.parentNode&&o>=n.getNodeIndex(e)){o++};s=0};r(this,e,s,t,o)},normalizeBoundaries:function(){i(this);var o=this.startContainer,s=this.startOffset,e=this.endContainer,t=this.endOffset,l=function(n){var r=n.nextSibling;if(r&&r.nodeType==n.nodeType){e=n;t=n.length;n.appendData(r.data);r.parentNode.removeChild(r)}},f=function(r){var i=r.previousSibling;if(i&&i.nodeType==r.nodeType){o=r;var c=r.length;s=i.length;r.insertData(0,i.data);i.parentNode.removeChild(i);if(o==e){t+=s;e=o}
else if(e==r.parentNode){var a=n.getNodeIndex(r);if(t==a){e=r;t=c}
else if(t>a){t--}}}},u=!0;if(n.isCharacterDataNode(e)){if(e.length==t){l(e)}}
else{if(t>0){var c=e.childNodes[t-1];if(c&&n.isCharacterDataNode(c)){l(c)}};u=!this.collapsed};if(u){if(n.isCharacterDataNode(o)){if(s==0){f(o)}}
else{if(s<o.childNodes.length){var a=o.childNodes[s];if(a&&n.isCharacterDataNode(a)){f(a)}}}}
else{o=e;s=t};r(this,o,s,e,t)},collapseToPoint:function(e,t){c(this);m(e,!0);T(e,t);p(this,e,t)}});Q(t)};function te(e){e.collapsed=(e.startContainer===e.endContainer&&e.startOffset===e.endOffset);e.commonAncestorContainer=e.collapsed?e.startContainer:n.getCommonAncestor(e.startContainer,e.endContainer)};function ne(e,t,n,r,i){var o=(e.startContainer!==t||e.startOffset!==n),s=(e.endContainer!==r||e.endOffset!==i);e.startContainer=t;e.startOffset=n;e.endContainer=r;e.endOffset=i;te(e);B(e,'boundarychange',{startMoved:o,endMoved:s})};function fe(e){c(e);e.startContainer=e.startOffset=e.endContainer=e.endOffset=null;e.collapsed=e.commonAncestorContainer=null;B(e,'detach',null);e._listeners=null};function s(e){this.startContainer=e;this.startOffset=0;this.endContainer=e;this.endOffset=0;this._listeners={boundarychange:[],detach:[]};te(this)};ee(s,ne,fe);e.rangePrototype=R.prototype;s.rangeProperties=y;s.RangeIterator=l;s.copyComparisonConstants=Q;s.createPrototypeRange=ee;s.inspect=F;s.getRangeDocument=o;s.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset};e.DomRange=s;e.RangeException=f});rangy.createModule('WrappedRange',function(e,t){e.requireModules(['DomUtil','DomRange']);var r,n=e.dom,i=n.DomPosition,o=e.DomRange;function l(e){var s=e.parentElement(),t=e.duplicate();t.collapse(!0);var i=t.parentElement();t=e.duplicate();t.collapse(!1);var o=t.parentElement(),r=(i==o)?i:n.getCommonAncestor(i,o);return r==s?r:n.getCommonAncestor(s,r)};function f(e){return e.compareEndPoints('StartToEnd',e)==0};function s(e,t,r,o){var c=e.duplicate();c.collapse(r);var a=c.parentElement();if(!n.isAncestorOf(t,a,!0)){a=t};if(!a.canHaveHTML){return new i(a.parentNode,n.getNodeIndex(a))};var s=n.getDocument(a).createElement('span'),g,v=r?'StartToStart':'StartToEnd',f,m,u,d;do{a.insertBefore(s,s.previousSibling);c.moveToElementText(s)}
while((g=c.compareEndPoints(v,e))>0&&s.previousSibling);d=s.nextSibling;if(g==-1&&d&&n.isCharacterDataNode(d)){c.setEndPoint(r?'EndToStart':'EndToEnd',e);var h;if(/[\r\n]/.test(d.data)){var l=c.duplicate(),p=l.text.replace(/\r\n/g,'\r').length;h=l.moveStart('character',p);while((g=l.compareEndPoints('StartToEnd',l))==-1){h++;l.moveStart('character',1)}}
else{h=c.text.length};u=new i(d,h)}
else{f=(o||!r)&&s.previousSibling;m=(o||r)&&s.nextSibling;if(m&&n.isCharacterDataNode(m)){u=new i(m,0)}
else if(f&&n.isCharacterDataNode(f)){u=new i(f,f.length)}
else{u=new i(a,n.getNodeIndex(s))}};s.parentNode.removeChild(s);return u};function a(e,t){var i,o,a=e.offset,l=n.getDocument(e.node),r,c,s=l.body.createTextRange(),f=n.isCharacterDataNode(e.node);if(f){i=e.node;o=i.parentNode}
else{c=e.node.childNodes;i=(a<c.length)?c[a]:null;o=e.node};r=l.createElement('span');r.innerHTML='&#feff;';if(i){o.insertBefore(r,i)}
else{o.appendChild(r)};s.moveToElementText(r);s.collapse(!t);o.removeChild(r);if(f){s[t?'moveStart':'moveEnd']('character',a)};return s};if(e.features.implementsDomRange&&(!e.features.implementsTextRange||!e.config.preferTextRange)){(function(){var i,u=o.rangeProperties,d;function c(e){var n=u.length,t;while(n--){t=u[n];e[t]=e.nativeRange[t]}};function h(e,t,n,r,i){var o=(e.startContainer!==t||e.startOffset!=n),s=(e.endContainer!==r||e.endOffset!=i);if(o||s){e.setEnd(r,i);e.setStart(t,n)}};function m(e){e.nativeRange.detach();e.detached=!0;var t=u.length,n;while(t--){n=u[t];e[n]=null}};var f;r=function(e){if(!e){throw new Error('Range must be specified')};this.nativeRange=e;c(this)};o.createPrototypeRange(r,h,m);i=r.prototype;i.selectNode=function(e){this.nativeRange.selectNode(e);c(this)};i.deleteContents=function(){this.nativeRange.deleteContents();c(this)};i.extractContents=function(){var e=this.nativeRange.extractContents();c(this);return e};i.cloneContents=function(){return this.nativeRange.cloneContents()};i.surroundContents=function(e){this.nativeRange.surroundContents(e);c(this)};i.collapse=function(e){this.nativeRange.collapse(e);c(this)};i.cloneRange=function(){return new r(this.nativeRange.cloneRange())};i.refresh=function(){c(this)};i.toString=function(){return this.nativeRange.toString()};var a=document.createTextNode('test');n.getBody(document).appendChild(a);var s=document.createRange();s.setStart(a,0);s.setEnd(a,0);try{s.setStart(a,1);d=!0;i.setStart=function(e,t){this.nativeRange.setStart(e,t);c(this)};i.setEnd=function(e,t){this.nativeRange.setEnd(e,t);c(this)};f=function(e){return function(t){this.nativeRange[e](t);c(this)}}}catch(t){d=!1;i.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t);this.nativeRange.setStart(e,t)};c(this)};i.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t);this.nativeRange.setEnd(e,t)};c(this)};f=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(r){this.nativeRange[t](n);this.nativeRange[e](n)};c(this)}}};i.setStartBefore=f('setStartBefore','setEndBefore');i.setStartAfter=f('setStartAfter','setEndAfter');i.setEndBefore=f('setEndBefore','setStartBefore');i.setEndAfter=f('setEndAfter','setStartAfter');s.selectNodeContents(a);if(s.startContainer==a&&s.endContainer==a&&s.startOffset==0&&s.endOffset==a.length){i.selectNodeContents=function(e){this.nativeRange.selectNodeContents(e);c(this)}}
else{i.selectNodeContents=function(e){this.setStart(e,0);this.setEnd(e,o.getEndOffset(e))}};s.selectNodeContents(a);s.setEnd(a,3);var l=document.createRange();l.selectNodeContents(a);l.setEnd(a,4);l.setStart(a,2);if(s.compareBoundaryPoints(s.START_TO_END,l)==-1&s.compareBoundaryPoints(s.END_TO_START,l)==1){i.compareBoundaryPoints=function(e,t){t=t.nativeRange||t;if(e==t.START_TO_END){e=t.END_TO_START}
else if(e==t.END_TO_START){e=t.START_TO_END};return this.nativeRange.compareBoundaryPoints(e,t)}}
else{i.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)}};if(e.util.isHostMethod(s,'createContextualFragment')){i.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}};n.getBody(document).removeChild(a);s.detach();l.detach()})();e.createNativeRange=function(e){e=e||document;return e.createRange()}}
else if(e.features.implementsTextRange){r=function(e){this.textRange=e;this.refresh()};r.prototype=new o(document);r.prototype.refresh=function(){var e,t,n=l(this.textRange);if(f(this.textRange)){t=e=s(this.textRange,n,!0,!0)}
else{e=s(this.textRange,n,!0,!1);t=s(this.textRange,n,!1,!1)};this.setStart(e.node,e.offset);this.setEnd(t.node,t.offset)};o.copyComparisonConstants(r);var c=(function(){return this})();if(typeof c.Range=='undefined'){c.Range=r};e.createNativeRange=function(e){e=e||document;return e.body.createTextRange()}};if(e.features.implementsTextRange){r.rangeToTextRange=function(e){if(e.collapsed){var s=a(new i(e.startContainer,e.startOffset),!0);return s}
else{var r=a(new i(e.startContainer,e.startOffset),!0),o=a(new i(e.endContainer,e.endOffset),!1),t=n.getDocument(e.startContainer).body.createTextRange();t.setEndPoint('StartToStart',r);t.setEndPoint('EndToEnd',o);return t}}};r.prototype.getName=function(){return'WrappedRange'};e.WrappedRange=r;e.createRange=function(t){t=t||document;return new r(e.createNativeRange(t))};e.createRangyRange=function(e){e=e||document;return new o(e)};e.createIframeRange=function(t){return e.createRange(n.getIframeDocument(t))};e.createIframeRangyRange=function(t){return e.createRangyRange(n.getIframeDocument(t))};e.addCreateMissingNativeApiListener(function(t){var n=t.document;if(typeof n.createRange=='undefined'){n.createRange=function(){return e.createRange(this)}};n=t=null})});rangy.createModule('WrappedSelection',function(e,t){e.requireModules(['DomUtil','DomRange','WrappedRange']);e.config.checkSelectionRanges=!0;var H='boolean',x='_rangySelection',r=e.dom,o=e.util,f=e.DomRange,N=e.WrappedRange,E=e.DOMException,B=r.DomPosition,g,p,a='Control';function K(e){return(e||window).getSelection()};function V(e){return(e||window).document.selection};var k=e.util.isHostMethod(window,'getSelection'),h=e.util.isHostObject(document,'selection'),m=h&&(!k||e.config.preferTextRange);if(m){g=V;e.isSelectionValid=function(e){var t=(e||window).document,n=t.selection;return(n.type!='None'||r.getDocument(n.createRange().parentElement())==t)}}
else if(k){g=K;e.isSelectionValid=function(){return!0}}
else{t.fail('Neither document.selection or window.getSelection() detected.')};e.getNativeSelection=g;var i=g(),M=e.createNativeRange(document),d=r.getBody(document),l=o.areHostObjects(i,['anchorNode','focusNode']&&o.areHostProperties(i,['anchorOffset','focusOffset']));e.features.selectionHasAnchorAndFocus=l;var T=o.isHostMethod(i,'extend');e.features.selectionHasExtend=T;var P=(typeof i.rangeCount=='number');e.features.selectionHasRangeCount=P;var S=!1,I=!0;if(o.areHostMethods(i,['addRange','getRangeAt','removeAllRanges'])&&typeof i.rangeCount=='number'&&e.features.implementsDomRange){(function(){var i=document.createElement('iframe');d.appendChild(i);var n=r.getIframeDocument(i);n.open();n.write('<html><head></head><body>12</body></html>');n.close();var t=r.getIframeWindow(i).getSelection(),a=n.documentElement,c=a.lastChild,s=c.firstChild,e=n.createRange();e.setStart(s,1);e.collapse(!0);t.addRange(e);I=(t.rangeCount==1);t.removeAllRanges();var o=e.cloneRange();e.setStart(s,0);o.setEnd(s,2);t.addRange(e);t.addRange(o);S=(t.rangeCount==2);e.detach();o.detach();d.removeChild(i)})()};e.features.selectionSupportsMultipleRanges=S;e.features.collapsedNonEditableSelectionsSupported=I;var s=!1,L;if(d&&o.isHostMethod(d,'createControlRange')){L=d.createControlRange();if(o.areHostProperties(L,['item','add'])){s=!0}};e.features.implementsControlRange=s;if(l){p=function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}}
else{p=function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:!1}};function v(e,t,n){var r=n?'end':'start',i=n?'start':'end';e.anchorNode=t[r+'Container'];e.anchorOffset=t[r+'Offset'];e.focusNode=t[i+'Container'];e.focusOffset=t[i+'Offset']};function Y(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode;e.anchorOffset=t.anchorOffset;e.focusNode=t.focusNode;e.focusOffset=t.focusOffset};function c(e){e.anchorNode=e.focusNode=null;e.anchorOffset=e.focusOffset=0;e.rangeCount=0;e.isCollapsed=!0;e._ranges.length=0};function R(t){var n;if(t instanceof f){n=t._selectionNativeRange;if(!n){n=e.createNativeRange(r.getDocument(t.startContainer));n.setEnd(t.endContainer,t.endOffset);n.setStart(t.startContainer,t.startOffset);t._selectionNativeRange=n;t.attachListener('detach',function(){this._selectionNativeRange=null})}}
else if(t instanceof N){n=t.nativeRange}
else if(e.features.implementsDomRange&&(t instanceof r.getWindow(t.startContainer).Range)){n=t};return n};function G(e){if(!e.length||e[0].nodeType!=1){return!1};for(var t=1,n=e.length;t<n;++t){if(!r.isAncestorOf(e[0],e[t])){return!1}};return!0};function A(e){var t=e.getNodes();if(!G(t)){throw new Error('getSingleElementFromRange: range '+e.inspect()+' did not consist of a single element')};return t[0]};function W(e){return!!e&&typeof e.text!='undefined'};function z(e,t){var n=new N(t);e._ranges=[n];v(e,n,!1);e.rangeCount=1;e.isCollapsed=n.collapsed};function y(t){t._ranges.length=0;if(t.docSelection.type=='None'){c(t)}
else{var n=t.docSelection.createRange();if(W(n)){z(t,n)}
else{t.rangeCount=n.length;var o,s=r.getDocument(n.item(0));for(var i=0;i<t.rangeCount;++i){o=e.createRange(s);o.selectNode(n.item(i));t._ranges.push(o)};t.isCollapsed=t.rangeCount==1&&t._ranges[0].collapsed;v(t,t._ranges[t.rangeCount-1],!1)}}};function q(e,t){var o=e.docSelection.createRange(),c=A(t),l=r.getDocument(o.item(0)),s=r.getBody(l).createControlRange();for(var i=0,a=o.length;i<a;++i){s.add(o.item(i))};try{s.add(c)}catch(n){throw new Error('addRange(): Element within the specified Range could not be added to control selection (does it have layout?)')};s.select();y(e)};var C;if(o.isHostMethod(i,'getRangeAt')){C=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}}}
else if(l){C=function(t){var i=r.getDocument(t.anchorNode),n=e.createRange(i);n.setStart(t.anchorNode,t.anchorOffset);n.setEnd(t.focusNode,t.focusOffset);if(n.collapsed!==this.isCollapsed){n.setStart(t.focusNode,t.focusOffset);n.setEnd(t.anchorNode,t.anchorOffset)};return n}};function b(e,t,n){this.nativeSelection=e;this.docSelection=t;this._ranges=[];this.win=n;this.refresh()};e.getSelection=function(e){e=e||window;var t=e[x],n=g(e),r=h?V(e):null;if(t){t.nativeSelection=n;t.docSelection=r;t.refresh(e)}
else{t=new b(n,r,e);e[x]=t};return t};e.getIframeSelection=function(t){return e.getSelection(r.getIframeWindow(t))};var n=b.prototype;function U(e,t){var a=r.getDocument(t[0].startContainer),s=r.getBody(a).createControlRange();for(var i=0,o;i<rangeCount;++i){o=A(t[i]);try{s.add(o)}catch(n){throw new Error('setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)')}};s.select();y(e)};if(!m&&l&&o.areHostMethods(i,['removeAllRanges','addRange'])){n.removeAllRanges=function(){this.nativeSelection.removeAllRanges();c(this)};var O=function(t,n){var i=f.getRangeDocument(n),r=e.createRange(i);r.collapseToPoint(n.endContainer,n.endOffset);t.nativeSelection.addRange(R(r));t.nativeSelection.extend(n.startContainer,n.startOffset);t.refresh()};if(P){n.addRange=function(t,n){if(s&&h&&this.docSelection.type==a){q(this,t)}
else{if(n&&T){O(this,t)}
else{var i;if(S){i=this.rangeCount}
else{this.removeAllRanges();i=0};this.nativeSelection.addRange(R(t));this.rangeCount=this.nativeSelection.rangeCount;if(this.rangeCount==i+1){if(e.config.checkSelectionRanges){var r=C(this.nativeSelection,this.rangeCount-1);if(r&&!f.rangesEqual(r,t)){t=new N(r)}};this._ranges[this.rangeCount-1]=t;v(this,t,u(this.nativeSelection));this.isCollapsed=p(this)}
else{this.refresh()}}}}}
else{n.addRange=function(e,t){if(t&&T){O(this,e)}
else{this.nativeSelection.addRange(R(e));this.refresh()}}};n.setRanges=function(e){if(s&&e.length>1){U(this,e)}
else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t){this.addRange(e[t])}}}}
else if(o.isHostMethod(i,'empty')&&o.isHostMethod(M,'select')&&s&&m){n.removeAllRanges=function(){try{this.docSelection.empty();if(this.docSelection.type!='None'){var t;if(this.anchorNode){t=r.getDocument(this.anchorNode)}
else if(this.docSelection.type==a){var n=this.docSelection.createRange();if(n.length){t=r.getDocument(n.item(0)).body.createTextRange()}};if(t){var i=t.body.createTextRange();i.select();this.docSelection.empty()}}}catch(e){};c(this)};n.addRange=function(e){if(this.docSelection.type==a){q(this,e)}
else{N.rangeToTextRange(e).select();this._ranges[0]=e;this.rangeCount=1;this.isCollapsed=this._ranges[0].collapsed;v(this,e,!1)}};n.setRanges=function(e){this.removeAllRanges();var t=e.length;if(t>1){U(this,e)}
else if(t){this.addRange(e[0])}}}
else{t.fail('No means of selecting a Range or TextRange was found');return!1};n.getRangeAt=function(e){if(e<0||e>=this.rangeCount){throw new E('INDEX_SIZE_ERR')}
else{return this._ranges[e]}};var w;if(m){w=function(t){var n;if(e.isSelectionValid(t.win)){n=t.docSelection.createRange()}
else{n=r.getBody(t.win.document).createTextRange();n.collapse(!0)};if(t.docSelection.type==a){y(t)}
else if(W(n)){z(t,n)}
else{c(t)}}}
else if(o.isHostMethod(i,'getRangeAt')&&typeof i.rangeCount=='number'){w=function(t){if(s&&h&&t.docSelection.type==a){y(t)}
else{t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount;if(t.rangeCount){for(var n=0,r=t.rangeCount;n<r;++n){t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n))};v(t,t._ranges[t.rangeCount-1],u(t.nativeSelection));t.isCollapsed=p(t)}
else{c(t)}}}}
else if(l&&typeof i.isCollapsed==H&&typeof M.collapsed==H&&e.features.implementsDomRange){w=function(e){var t,n=e.nativeSelection;if(n.anchorNode){t=C(n,0);e._ranges=[t];e.rangeCount=1;Y(e);e.isCollapsed=p(e)}
else{c(e)}}}
else{t.fail('No means of obtaining a Range or TextRange from the user\'s selection was found');return!1};n.refresh=function(e){var n=e?this._ranges.slice(0):null;w(this);if(e){var t=n.length;if(t!=this._ranges.length){return!1}
while(t--){if(!f.rangesEqual(n[t],this._ranges[t])){return!1}};return!0}};var D=function(e,t){var r=e.getAllRanges(),i=!1;e.removeAllRanges();for(var n=0,o=r.length;n<o;++n){if(i||t!==r[n]){e.addRange(r[n])}
else{i=!0}};if(!e.rangeCount){c(e)}};if(s){n.removeRange=function(e){if(this.docSelection.type==a){var n=this.docSelection.createRange(),l=A(e),f=r.getDocument(n.item(0)),i=r.getBody(f).createControlRange(),o,s=!1;for(var t=0,c=n.length;t<c;++t){o=n.item(t);if(o!==l||s){i.add(n.item(t))}
else{s=!0}};i.select();y(this)}
else{D(this,e)}}}
else{n.removeRange=function(e){D(this,e)}};var u;if(!m&&l&&e.features.implementsDomRange){u=function(e){var t=!1;if(e.anchorNode){t=(r.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)==1)};return t};n.isBackwards=function(){return u(this)}}
else{u=n.isBackwards=function(){return!1}};n.toString=function(){var t=[];for(var e=0,n=this.rangeCount;e<n;++e){t[e]=''+this._ranges[e]};return t.join('')};function j(e,t){if(e.anchorNode&&(r.getDocument(e.anchorNode)!==r.getDocument(t))){throw new E('WRONG_DOCUMENT_ERR')}};n.collapse=function(t,n){j(this,t);var i=e.createRange(r.getDocument(t));i.collapseToPoint(t,n);this.removeAllRanges();this.addRange(i);this.isCollapsed=!0};n.collapseToStart=function(){if(this.rangeCount){var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)}
else{throw new E('INVALID_STATE_ERR')}};n.collapseToEnd=function(){if(this.rangeCount){var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)}
else{throw new E('INVALID_STATE_ERR')}};n.selectAllChildren=function(t){j(this,t);var n=e.createRange(r.getDocument(t));n.selectNodeContents(t);this.removeAllRanges();this.addRange(n)};n.deleteFromDocument=function(){if(s&&h&&this.docSelection.type==a){var r=this.docSelection.createRange(),e;while(r.length){e=r.item(0);r.remove(e);e.parentNode.removeChild(e)};this.refresh()}
else if(this.rangeCount){var n=this.getAllRanges();this.removeAllRanges();for(var t=0,i=n.length;t<i;++t){n[t].deleteContents()};this.addRange(n[i-1])}};n.getAllRanges=function(){return this._ranges.slice(0)};n.setSingleRange=function(e){this.setRanges([e])};n.containsNode=function(e,t){for(var n=0,r=this._ranges.length;n<r;++n){if(this._ranges[n].containsNode(e,t)){return!0}};return!1};n.toHtml=function(){var n='';if(this.rangeCount){var t=f.getRangeDocument(this._ranges[0]).createElement('div');for(var e=0,r=this._ranges.length;e<r;++e){t.appendChild(this._ranges[e].cloneContents())};n=t.innerHTML};return n};function F(e){var n=[],i=new B(e.anchorNode,e.anchorOffset),o=new B(e.focusNode,e.focusOffset),s=(typeof e.getName=='function')?e.getName():'Selection';if(typeof e.rangeCount!='undefined'){for(var t=0,r=e.rangeCount;t<r;++t){n[t]=f.inspect(e.getRangeAt(t))}};return'['+s+'(Ranges: '+n.join(', ')+')(anchor: '+i.inspect()+', focus: '+o.inspect()+']'};n.getName=function(){return'WrappedSelection'};n.inspect=function(){return F(this)};n.detach=function(){this.win[x]=null;this.win=this.anchorNode=this.focusNode=null};b.inspect=F;e.Selection=b;e.selectionPrototype=n;e.addCreateMissingNativeApiListener(function(t){if(typeof t.getSelection=='undefined'){t.getSelection=function(){return e.getSelection(this)}};t=null})});var Base=function(){};Base.extend=function(e,t){var i=Base.prototype.extend;Base._prototyping=!0;var r=new this;i.call(r,e);r.base=function(){};delete Base._prototyping;var o=r.constructor,n=r.constructor=function(){if(!Base._prototyping){if(this._constructing||this.constructor==n){this._constructing=!0;o.apply(this,arguments);delete this._constructing}
else if(arguments[0]!=null){return(arguments[0].extend||i).call(arguments[0],r)}}};n.ancestor=this;n.extend=this.extend;n.forEach=this.forEach;n.implement=this.implement;n.prototype=r;n.toString=this.toString;n.valueOf=function(e){return(e=='object')?n:o.valueOf()};i.call(n,t);if(typeof n.init=='function')n.init();return n};Base.prototype={extend:function(e,t){if(arguments.length>1){var i=this[e];if(i&&(typeof t=='function')&&(!i.valueOf||i.valueOf()!=t.valueOf())&&/\bbase\b/.test(t)){var s=t.valueOf();t=function(){var t=this.base||Base.prototype.base;this.base=i;var e=s.apply(this,arguments);this.base=t;return e};t.valueOf=function(e){return(e=='object')?t:s};t.toString=Base.toString};this[e]=t}
else if(e){var r=Base.prototype.extend;if(!Base._prototyping&&typeof this!='function'){r=this.extend||r};var o={toSource:null};var a=['constructor','toString','valueOf'],c=Base._prototyping?0:1;while(n=a[c++]){if(e[n]!=o[n]){r.call(this,n,e[n])}};for(var n in e){if(!o[n])r.call(this,n,e[n])}};return this}};Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:'1.1',forEach:function(e,t,n){for(var r in e){if(this.prototype[r]===undefined){t.call(n,e[r],r,e)}}},implement:function(){for(var e=0;e<arguments.length;e++){if(typeof arguments[e]=='function'){arguments[e](this.prototype)}
else{this.prototype.extend(arguments[e])}};return this},toString:function(){return String(this.valueOf())}});wysihtml5.browser=(function(){var t=navigator.userAgent,r=document.createElement('div'),e=t.indexOf('MSIE')!==-1&&t.indexOf('Opera')===-1,n=t.indexOf('Gecko')!==-1&&t.indexOf('KHTML')===-1,i=t.indexOf('AppleWebKit/')!==-1,s=t.indexOf('Chrome/')!==-1,o=t.indexOf('Opera/')!==-1;function a(e){return((/ipad|iphone|ipod/.test(e)&&e.match(/ os (\d+).+? like mac os x/))||[,0])[1]};return{USER_AGENT:t,supported:function(){var e=this.USER_AGENT.toLowerCase(),t='contentEditable' in r,n=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,i=document.querySelector&&document.querySelectorAll,o=(this.isIos()&&a(e)<5)||e.indexOf('opera mobi')!==-1||e.indexOf('hpwos/')!==-1;return t&&n&&i&&!o},isTouchDevice:function(){return this.supportsEvent('touchmove')},isIos:function(){var e=this.USER_AGENT.toLowerCase();return e.indexOf('webkit')!==-1&&e.indexOf('mobile')!==-1},supportsSandboxedIframes:function(){return e},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!('querySelector' in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return!n},hasCurrentStyleProperty:function(){return'currentStyle' in r},insertsLineBreaksOnReturn:function(){return n},supportsPlaceholderAttributeOn:function(e){return'placeholder' in e},supportsEvent:function(e){return'on'+e in r||(function(){r.setAttribute('on'+e,'return;');return typeof(r['on'+e])==='function'})()},supportsEventsInIframeCorrectly:function(){return!o},firesOnDropOnlyWhenOnDragOverIsCancelled:function(){return i||n},supportsDataTransfer:function(){try{return i&&(window.Clipboard||window.DataTransfer).prototype.getData}catch(e){return!1}},supportsHTML5Tags:function(e){var t=e.createElement('div'),n='<article>foo</article>';t.innerHTML=n;return t.innerHTML.toLowerCase()===n},supportsCommand:(function(){var r={'formatBlock':e,'insertUnorderedList':e||o||i,'insertOrderedList':e||o||i};var t={'insertHTML':n};return function(e,n){var o=r[n];if(!o){try{return e.queryCommandSupported(n)}catch(i){};try{return e.queryCommandEnabled(n)}catch(i){return!!t[n]}};return!1}})(),doesAutoLinkingInContentEditable:function(){return e},canDisableAutoLinking:function(){return this.supportsCommand(document,'AutoUrlDetect')},clearsContentEditableCorrectly:function(){return n||o||i},supportsGetAttributeCorrectly:function(){var e=document.createElement('td');return e.getAttribute('rowspan')!='1'},canSelectImagesInContentEditable:function(){return n||e||o},clearsListsInContentEditableCorrectly:function(){return n||e||i},autoScrollsToCaret:function(){return!i},autoClosesUnclosedTags:function(){var n=r.cloneNode(!1),e,t;n.innerHTML='<p><div></div>';t=n.innerHTML.toLowerCase();e=t==='<p></p><div></div>'||t==='<p><div></div></p>';this.autoClosesUnclosedTags=function(){return e};return e},supportsNativeGetElementsByClassName:function(){return String(document.getElementsByClassName).indexOf('[native code]')!==-1},supportsSelectionModify:function(){return'getSelection' in window&&'modify' in window.getSelection()},supportsClassList:function(){return'classList' in r},needsSpaceAfterLineBreak:function(){return o},supportsSpeechApiOn:function(e){var n=t.match(/Chrome\/(\d+)/)||[,0];return n[1]>=11&&('onwebkitspeechchange' in e||'speech' in e)},crashesWhenDefineProperty:function(t){return e&&(t==='XMLHttpRequest'||t==='XDomainRequest')},doesAsyncFocus:function(){return e},hasProblemsSettingCaretAfterImg:function(){return e},hasUndoInContextMenu:function(){return n||s||o}}})();wysihtml5.lang.array=function(e){return{contains:function(t){if(e.indexOf){return e.indexOf(t)!==-1}
else{for(var n=0,r=e.length;n<r;n++){if(e[n]===t){return!0}};return!1}},without:function(t){t=wysihtml5.lang.array(t);var r=[],n=0,i=e.length;for(;n<i;n++){if(!t.contains(e[n])){r.push(e[n])}};return r},get:function(){var t=0,r=e.length,n=[];for(;t<r;t++){n.push(e[t])};return n}}};wysihtml5.lang.Dispatcher=Base.extend({observe:function(e,t){this.events=this.events||{};this.events[e]=this.events[e]||[];this.events[e].push(t);return this},on:function(){return this.observe.apply(this,wysihtml5.lang.array(arguments).get())},fire:function(e,t){this.events=this.events||{};var r=this.events[e]||[],n=0;for(;n<r.length;n++){r[n].call(this,t)};return this},stopObserving:function(e,t){this.events=this.events||{};var n=0,r,i;if(e){r=this.events[e]||[],i=[];for(;n<r.length;n++){if(r[n]!==t&&t){i.push(r[n])}};this.events[e]=i}
else{this.events={}};return this}});wysihtml5.lang.object=function(e){return{merge:function(t){for(var n in t){e[n]=t[n]};return this},get:function(){return e},clone:function(){var n={},t;for(t in e){n[t]=e[t]};return n},isArray:function(){return Object.prototype.toString.call(e)==='[object Array]'}}};(function(){var e=/^\s+/,t=/\s+$/;wysihtml5.lang.string=function(n){n=String(n);return{trim:function(){return n.replace(e,'').replace(t,'')},interpolate:function(e){for(var t in e){n=this.replace('#{'+t+'}').by(e[t])};return n},replace:function(e){return{by:function(t){return n.split(e).join(t)}}}}}})();(function(e){var n=e.lang.array(['CODE','PRE','A','SCRIPT','HEAD','TITLE','STYLE']),t=/((https?:\/\/|www\.)[^\s<]{3,})/gi,r=/([^\w\/\-](,?))$/i,i=100,s={')':'(',']':'[','}':'{'};function a(e){if(u(e)){return e};if(e===e.ownerDocument.documentElement){e=e.ownerDocument.body};return o(e)};function c(e){return e.replace(t,function(e,t){var n=(t.match(r)||[])[1]||'',c=s[n];t=t.replace(r,'');if(t.split(c).length>t.split(n).length){t=t+n;n=''};var o=t,a=t;if(t.length>i){a=a.substr(0,i)+'...'};if(o.substr(0,4)==='www.'){o='http://'+o};return'<a href="'+o+'">'+a+'</a>'+n})};function l(e){var t=e._wysihtml5_tempElement;if(!t){t=e._wysihtml5_tempElement=e.createElement('div')};return t};function f(e){var n=e.parentNode,t=l(n.ownerDocument);t.innerHTML='<span></span>'+c(e.data);t.removeChild(t.firstChild);while(t.firstChild){n.insertBefore(t.firstChild,e)};n.removeChild(e)};function u(e){var t;while(e.parentNode){e=e.parentNode;t=e.nodeName;if(n.contains(t)){return!0}
else if(t==='body'){return!1}};return!1};function o(r){if(n.contains(r.nodeName)){return};if(r.nodeType===e.TEXT_NODE&&r.data.match(t)){f(r);return};var s=e.lang.array(r.childNodes).get(),a=s.length,i=0;for(;i<a;i++){o(s[i])};return r};e.dom.autoLink=a;e.dom.autoLink.URL_REG_EXP=t})(wysihtml5);(function(e){var n=e.browser.supportsClassList(),t=e.dom;t.addClass=function(e,r){if(n){return e.classList.add(r)};if(t.hasClass(e,r)){return};e.className+=' '+r};t.removeClass=function(e,t){if(n){return e.classList.remove(t)};e.className=e.className.replace(new RegExp('(^|\\s+)'+t+'(\\s+|$)'),' ')};t.hasClass=function(e,t){if(n){return e.classList.contains(t)};var r=e.className;return(r.length>0&&(r==t||new RegExp('(^|\\s)'+t+'(\\s|$)').test(r)))}})(wysihtml5);wysihtml5.dom.contains=(function(){var e=document.documentElement;if(e.contains){return function(e,t){if(t.nodeType!==wysihtml5.ELEMENT_NODE){t=t.parentNode};return e!==t&&e.contains(t)}}
else if(e.compareDocumentPosition){return function(e,t){return!!(e.compareDocumentPosition(t)&16)}}})();wysihtml5.dom.convertToList=(function(){function e(e,t){var n=e.createElement('li');t.appendChild(n);return n};function t(e,t){return e.createElement(t)};function n(n,r){if(n.nodeName==='UL'||n.nodeName==='OL'||n.nodeName==='MENU'){return n};var f=n.ownerDocument,l=t(f,r),d=n.querySelectorAll('br'),p=d.length,u,h,a,s,c,m,g,i,o;for(o=0;o<p;o++){s=d[o];while((c=s.parentNode)&&c!==n&&c.lastChild===s){if(wysihtml5.dom.getStyle('display').from(c)==='block'){c.removeChild(s);break};wysihtml5.dom.insert(s).after(s.parentNode)}};u=wysihtml5.lang.array(n.childNodes).get();h=u.length;for(o=0;o<h;o++){i=i||e(f,l);a=u[o];m=wysihtml5.dom.getStyle('display').from(a)==='block';g=a.nodeName==='BR';if(m){i=i.firstChild?e(f,l):i;i.appendChild(a);i=null;continue};if(g){i=i.firstChild?null:i;continue};i.appendChild(a)};n.parentNode.replaceChild(l,n);return l};return n})();wysihtml5.dom.copyAttributes=function(e){return{from:function(t){return{to:function(n){var r,i=0,o=e.length;for(;i<o;i++){r=e[i];if(typeof(t[r])!=='undefined'&&t[r]!==''){n[r]=t[r]}};return{andTo:arguments.callee}}}}}};(function(e){var t=['-webkit-box-sizing','-moz-box-sizing','-ms-box-sizing','box-sizing'],n=function(t){if(r(t)){return parseInt(e.getStyle('width').from(t),10)<t.offsetWidth};return!1},r=function(n){var r=0,i=t.length;for(;r<i;r++){if(e.getStyle(t[r]).from(n)==='border-box'){return t[r]}}};e.copyStyles=function(r){return{from:function(i){if(n(i)){r=wysihtml5.lang.array(r).without(t)};var a='',c=r.length,o=0,s;for(;o<c;o++){s=r[o];a+=s+':'+e.getStyle(s).from(i)+';'};return{to:function(t){e.setStyles(a).on(t);return{andTo:arguments.callee}}}}}}})(wysihtml5.dom);(function(e){e.dom.delegate=function(t,n,r,i){return e.dom.observe(t,r,function(r){var o=r.target,s=e.lang.array(t.querySelectorAll(n));while(o&&o!==t){if(s.contains(o)){i.call(o,r);break};o=o.parentNode}})}})(wysihtml5);wysihtml5.dom.getAsDom=(function(){var t=function(e,t){var r=t.createElement('div');r.style.display='none';t.body.appendChild(r);try{r.innerHTML=e}catch(n){};t.body.removeChild(r);return r},n=function(t){if(t._wysihtml5_supportsHTML5Tags){return};for(var n=0,r=e.length;n<r;n++){t.createElement(e[n])};t._wysihtml5_supportsHTML5Tags=!0},e=['abbr','article','aside','audio','bdi','canvas','command','datalist','details','figcaption','figure','footer','header','hgroup','keygen','mark','meter','nav','output','progress','rp','rt','ruby','svg','section','source','summary','time','track','video','wbr'];return function(e,r){r=r||document;var i;if(typeof(e)==='object'&&e.nodeType){i=r.createElement('div');i.appendChild(e)}
else if(wysihtml5.browser.supportsHTML5Tags(r)){i=r.createElement('div');i.innerHTML=e}
else{n(r);i=t(e,r)};return i}})();wysihtml5.dom.getParentElement=(function(){function e(e,t){if(!t||!t.length){return!0};if(typeof(t)==='string'){return e===t}
else{return wysihtml5.lang.array(t).contains(e)}};function t(e){return e.nodeType===wysihtml5.ELEMENT_NODE};function n(e,t,n){var r=(e.className||'').match(n)||[];if(!t){return!!r.length};return r[r.length-1]===t};function r(t,n,r){while(r--&&t&&t.nodeName!=='BODY'){if(e(t.nodeName,n)){return t};t=t.parentNode};return null};function i(r,i,o,s,a){while(a--&&r&&r.nodeName!=='BODY'){if(t(r)&&e(r.nodeName,i)&&n(r,o,s)){return r};r=r.parentNode};return null};return function(e,t,n){n=n||50;if(t.className||t.classRegExp){return i(e,t.nodeName,t.className,t.classRegExp,n)}
else{return r(e,t.nodeName,n)}}})();wysihtml5.dom.getStyle=(function(){var e={'float':('styleFloat' in document.createElement('div').style)?'styleFloat':'cssFloat'},t=/\-[a-z]/g;function n(e){return e.replace(t,function(e){return e.charAt(1).toUpperCase()})};return function(t){return{from:function(r){if(r.nodeType!==wysihtml5.ELEMENT_NODE){return};var f=r.ownerDocument,u=e[t]||n(t),o=r.style,d=r.currentStyle,h=o[u];if(h){return h};if(d){try{return d[u]}catch(i){}};var s=f.defaultView||f.parentWindow,a=(t==='height'||t==='width')&&r.nodeName==='TEXTAREA',c,l;if(s.getComputedStyle){if(a){c=o.overflow;o.overflow='hidden'};l=s.getComputedStyle(r,null).getPropertyValue(t);if(a){o.overflow=c||''};return l}}}}})();wysihtml5.dom.hasElementWithTagName=(function(){var e={},t=1;function n(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=t++)};return function(t,r){var o=n(t)+':'+r,i=e[o];if(!i){i=e[o]=t.getElementsByTagName(r)};return i.length>0}})();(function(e){var t={},n=1;function r(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=n++)};e.dom.hasElementWithClassName=function(n,i){if(!e.browser.supportsNativeGetElementsByClassName()){return!!n.querySelector('.'+i)};var s=r(n)+':'+i,o=t[s];if(!o){o=t[s]=n.getElementsByClassName(i)};return o.length>0}})(wysihtml5);wysihtml5.dom.insert=function(e){return{after:function(t){t.parentNode.insertBefore(e,t.nextSibling)},before:function(t){t.parentNode.insertBefore(e,t)},into:function(t){t.appendChild(e)}}};wysihtml5.dom.insertCSS=function(e){e=e.join('\n');return{into:function(t){var r=t.head||t.getElementsByTagName('head')[0],n=t.createElement('style');n.type='text/css';if(n.styleSheet){n.styleSheet.cssText=e}
else{n.appendChild(t.createTextNode(e))};if(r){r.appendChild(n)}}}};wysihtml5.dom.observe=function(e,t,n){t=typeof(t)==='string'?[t]:t;var r,i,o=0,s=t.length;for(;o<s;o++){i=t[o];if(e.addEventListener){e.addEventListener(i,n,!1)}
else{r=function(t){if(!('target' in t)){t.target=t.srcElement};t.preventDefault=t.preventDefault||function(){this.returnValue=!1};t.stopPropagation=t.stopPropagation||function(){this.cancelBubble=!0};n.call(e,t)};e.attachEvent('on'+i,r)}};return{stop:function(){var i,o=0,s=t.length;for(;o<s;o++){i=t[o];if(e.removeEventListener){e.removeEventListener(i,n,!1)}
else{e.detachEvent('on'+i,r)}}}}};wysihtml5.dom.parse=(function(){var a={'1':u,'3':m},t='span',c=/\s+/,l={tags:{},classes:{}},e={};function f(t,r,i,o){wysihtml5.lang.object(e).merge(l).merge(r).get();i=i||t.ownerDocument||document;var f=i.createDocumentFragment(),u=typeof(t)==='string',s,a,c;if(u){s=wysihtml5.dom.getAsDom(t,i)}
else{s=t}
while(s.firstChild){c=s.firstChild;s.removeChild(c);a=n(c,o);if(a){f.appendChild(a)}};s.innerHTML='';s.appendChild(f);return u?wysihtml5.quirks.getCorrectInnerHTML(s):s};function n(e,r){var l=e.nodeType,s=e.childNodes,f=s.length,i,c=a[l],o=0;i=c&&c(e);if(!i){return null};for(o=0;o<f;o++){newChild=n(s[o],r);if(newChild){i.appendChild(newChild)}};if(r&&i.childNodes.length<=1&&i.nodeName.toLowerCase()===t&&!i.attributes.length){return i.firstChild};return i};function u(n){var r,o,c,a=e.tags,i=n.nodeName.toLowerCase(),s=n.scopeName;if(n._wysihtml5){return null};n._wysihtml5=1;if(n.className==='wysihtml5-temp'){return null};if(s&&s!='HTML'){i=s+':'+i};if('outerHTML' in n){if(!wysihtml5.browser.autoClosesUnclosedTags()&&n.nodeName==='P'&&n.outerHTML.slice(-4).toLowerCase()!=='</p>'){i='div'}};if(i in a){r=a[i];if(!r||r.remove){return null};r=typeof(r)==='string'?{rename_tag:r}:r}
else if(n.firstChild){r={rename_tag:t}}
else{return null};o=n.ownerDocument.createElement(r.rename_tag||i);d(n,o,r);n=null;return o};function d(t,n,s){var l={},b=s.set_class,g=s.add_class,S=s.set_attributes,p=s.check_attributes,T=e.classes,v=0,u=[],y=[],m=[],w=[],x,C,d,N,f,E,h;if(S){l=wysihtml5.lang.object(S).clone()};if(p){for(f in p){h=o[p[f]];if(!h){continue};E=h(r(t,f));if(typeof(E)==='string'){l[f]=E}}};if(b){u.push(b)};if(g){for(f in g){h=i[g[f]];if(!h){continue};N=h(r(t,f));if(typeof(N)==='string'){u.push(N)}}};T['_wysihtml5-temp-placeholder']=1;w=t.getAttribute('class');if(w){u=u.concat(w.split(c))};x=u.length;for(;v<x;v++){d=u[v];if(T[d]){y.push(d)}};C=y.length;while(C--){d=y[C];if(!wysihtml5.lang.array(m).contains(d)){m.unshift(d)}};if(m.length){l['class']=m.join(' ')};for(f in l){try{n.setAttribute(f,l[f])}catch(a){}};if(l.src){if(typeof(l.width)!=='undefined'){n.setAttribute('width',l.width)};if(typeof(l.height)!=='undefined'){n.setAttribute('height',l.height)}}};var s=!wysihtml5.browser.supportsGetAttributeCorrectly();function r(e,t){t=t.toLowerCase();var i=e.nodeName;if(i=='IMG'&&t=='src'&&h(e)===!0){return e.src}
else if(s&&'outerHTML' in e){var n=e.outerHTML.toLowerCase(),r=n.indexOf(' '+t+'=')!=-1;return r?e.getAttribute(t):null}
else{return e.getAttribute(t)}};function h(e){try{return e.complete&&!e.mozMatchesSelector(':-moz-broken')}catch(t){if(e.complete&&e.readyState==='complete'){return!0}}};function m(e){return e.ownerDocument.createTextNode(e.data)};var o={url:(function(){var e=/^https?:\/\//i;return function(t){if(!t||!t.match(e)){return null};return t.replace(e,function(e){return e.toLowerCase()})}})(),alt:(function(){var e=/[^ a-z0-9_\-]/gi;return function(t){if(!t){return''};return t.replace(e,'')}})(),numbers:(function(){var e=/\D/g;return function(t){t=(t||'').replace(e,'');return t||null}})()};var i={align_img:(function(){var e={left:'wysiwyg-float-left',right:'wysiwyg-float-right'};return function(t){return e[String(t).toLowerCase()]}})(),align_text:(function(){var e={left:'wysiwyg-text-align-left',right:'wysiwyg-text-align-right',center:'wysiwyg-text-align-center',justify:'wysiwyg-text-align-justify'};return function(t){return e[String(t).toLowerCase()]}})(),clear_br:(function(){var e={left:'wysiwyg-clear-left',right:'wysiwyg-clear-right',both:'wysiwyg-clear-both',all:'wysiwyg-clear-both'};return function(t){return e[String(t).toLowerCase()]}})(),size_font:(function(){var e={'1':'wysiwyg-font-size-xx-small','2':'wysiwyg-font-size-small','3':'wysiwyg-font-size-medium','4':'wysiwyg-font-size-large','5':'wysiwyg-font-size-x-large','6':'wysiwyg-font-size-xx-large','7':'wysiwyg-font-size-xx-large','-':'wysiwyg-font-size-smaller','+':'wysiwyg-font-size-larger'};return function(t){return e[String(t).charAt(0)]}})()};return f})();wysihtml5.dom.removeEmptyTextNodes=function(e){var t,r=wysihtml5.lang.array(e.childNodes).get(),i=r.length,n=0;for(;n<i;n++){t=r[n];if(t.nodeType===wysihtml5.TEXT_NODE&&t.data===''){t.parentNode.removeChild(t)}}};wysihtml5.dom.renameElement=function(e,t){var n=e.ownerDocument.createElement(t),r;while(r=e.firstChild){n.appendChild(r)};wysihtml5.dom.copyAttributes(['align','className']).from(e).to(n);e.parentNode.replaceChild(n,e);return n};wysihtml5.dom.replaceWithChildNodes=function(e){if(!e.parentNode){return};if(!e.firstChild){e.parentNode.removeChild(e);return};var t=e.ownerDocument.createDocumentFragment();while(e.firstChild){t.appendChild(e.firstChild)};e.parentNode.replaceChild(t,e);e=t=null};(function(e){function t(t){return e.getStyle('display').from(t)==='block'};function r(e){return e.nodeName==='BR'};function n(e){var t=e.ownerDocument.createElement('br');e.appendChild(t)};function i(e){if(e.nodeName!=='MENU'&&e.nodeName!=='UL'&&e.nodeName!=='OL'){return};var u=e.ownerDocument,s=u.createDocumentFragment(),a=e.previousElementSibling||e.previousSibling,i,c,l,f,o;if(a&&!t(a)){n(s)}
while(o=e.firstChild){c=o.lastChild;while(i=o.firstChild){l=i===c;f=l&&!t(i)&&!r(i);s.appendChild(i);if(f){n(s)}};o.parentNode.removeChild(o)};e.parentNode.replaceChild(s,e)};e.resolveList=i})(wysihtml5.dom);(function(e){var t=document,n=['parent','top','opener','frameElement','frames','localStorage','globalStorage','sessionStorage','indexedDB'],r=['open','close','openDialog','showModalDialog','alert','confirm','prompt','openDatabase','postMessage','XMLHttpRequest','XDomainRequest'],i=['referrer','write','open','close'];e.dom.Sandbox=Base.extend({constructor:function(t,n){this.callback=t||e.EMPTY_FUNCTION;this.config=e.lang.object({}).merge(n).get();this.iframe=this._createIframe()},insertInto:function(e){if(typeof(e)==='string'){e=t.getElementById(e)};e.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var e=this.getIframe();e.parentNode.removeChild(e)},_readyError:function(){throw new Error('wysihtml5.Sandbox: Sandbox iframe isn\'t loaded yet')},_createIframe:function(){var r=this,n=t.createElement('iframe');n.className='wysihtml5-sandbox';e.dom.setAttributes({'security':'restricted','allowtransparency':'true','frameborder':0,'width':0,'height':0,'marginwidth':0,'marginheight':0}).on(n);if(e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()){n.src='javascript:\'<html></html>\''};n.onload=function(){n.onreadystatechange=n.onload=null;r._onLoadIframe(n)};n.onreadystatechange=function(){if(/loaded|complete/.test(n.readyState)){n.onreadystatechange=n.onload=null;r._onLoadIframe(n)}};return n},_onLoadIframe:function(o){if(!e.dom.contains(t.documentElement,o)){return};var f=this,l=o.contentWindow,c=o.contentWindow.document,u=t.characterSet||t.charset||'utf-8',d=this._getHtml({charset:u,stylesheets:this.config.stylesheets});c.open('text/html','replace');c.write(d);c.close();this.getWindow=function(){return o.contentWindow};this.getDocument=function(){return o.contentWindow.document};l.onerror=function(e,t,n){throw new Error('wysihtml5.Sandbox: '+e,t,n)};if(!e.browser.supportsSandboxedIframes()){var s,a;for(s=0,a=n.length;s<a;s++){this._unset(l,n[s])};for(s=0,a=r.length;s<a;s++){this._unset(l,r[s],e.EMPTY_FUNCTION)};for(s=0,a=i.length;s<a;s++){this._unset(c,i[s])};this._unset(c,'cookie','',!0)};this.loaded=!0;setTimeout(function(){f.callback(f)},0)},_getHtml:function(t){var n=t.stylesheets,i='',r=0,o;n=typeof(n)==='string'?[n]:n;if(n){o=n.length;for(;r<o;r++){i+='<link rel="stylesheet" href="'+n[r]+'">'}};t.stylesheets=i;return e.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(t)},_unset:function(t,n,r,o){try{t[n]=r}catch(i){};try{t.__defineGetter__(n,function(){return r})}catch(i){};if(o){try{t.__defineSetter__(n,function(){})}catch(i){}};if(!e.browser.crashesWhenDefineProperty(n)){try{var s={get:function(){return r}};if(o){s.set=function(){}};Object.defineProperty(t,n,s)}catch(i){}}}})})(wysihtml5);(function(){var e={'className':'class'};wysihtml5.dom.setAttributes=function(t){return{on:function(n){for(var r in t){n.setAttribute(e[r]||r,t[r])}}}}})();wysihtml5.dom.setStyles=function(e){return{on:function(t){var r=t.style;if(typeof(e)==='string'){r.cssText+=';'+e;return};for(var n in e){if(n==='float'){r.cssFloat=e[n];r.styleFloat=e[n]}
else{r[n]=e[n]}}}}};(function(e){e.simulatePlaceholder=function(t,n,r){var s='placeholder',i=function(){if(n.hasPlaceholderSet()){n.clear()};e.removeClass(n.element,s)},o=function(){if(n.isEmpty()){n.setValue(r);e.addClass(n.element,s)}};t.observe('set_placeholder',o).observe('unset_placeholder',i).observe('focus:composer',i).observe('paste:composer',i).observe('blur:composer',o);o()}})(wysihtml5.dom);(function(e){var t=document.documentElement;if('textContent' in t){e.setTextContent=function(e,t){e.textContent=t};e.getTextContent=function(e){return e.textContent}}
else if('innerText' in t){e.setTextContent=function(e,t){e.innerText=t};e.getTextContent=function(e){return e.innerText}}
else{e.setTextContent=function(e,t){e.nodeValue=t};e.getTextContent=function(e){return e.nodeValue}}})(wysihtml5.dom);wysihtml5.quirks.cleanPastedHTML=(function(){var e={'a u':wysihtml5.dom.replaceWithChildNodes};function t(t,n,r){n=n||e;r=r||t.ownerDocument||document;var i,c=typeof(t)==='string',l,o,f,s,a=0;if(c){i=wysihtml5.dom.getAsDom(t,r)}
else{i=t};for(s in n){o=i.querySelectorAll(s);l=n[s];f=o.length;for(;a<f;a++){l(o[a])}};o=t=n=null;return c?i.innerHTML:i};return t})();(function(e){var t=e.dom;e.quirks.ensureProperClearing=(function(){var e=function(e){var t=this;setTimeout(function(){var e=t.innerHTML.toLowerCase();if(e=='<p>&nbsp;</p>'||e=='<p>&nbsp;</p><p>&nbsp;</p>'){t.innerHTML=''}},0)};return function(n){t.observe(n.element,['cut','keydown'],e)}})();e.quirks.ensureProperClearingOfLists=(function(){var n=['OL','UL','MENU'],r=function(r,i){if(!i.firstChild||!e.lang.array(n).contains(i.firstChild.nodeName)){return};var o=t.getParentElement(r,{nodeName:n});if(!o){return};var c=o==i.firstChild;if(!c){return};var a=o.childNodes.length<=1;if(!a){return};var s=o.firstChild?o.firstChild.innerHTML==='':!0;if(!s){return};o.parentNode.removeChild(o)};return function(n){t.observe(n.element,'keydown',function(t){if(t.keyCode!==e.BACKSPACE_KEY){return};var i=n.selection.getSelectedNode();r(i,n.element)})}})()})(wysihtml5);(function(e){var t='%7E';e.quirks.getCorrectInnerHTML=function(n){var i=n.innerHTML;if(i.indexOf(t)===-1){return i};var o=n.querySelectorAll('[href*=\'~\'], [src*=\'~\']'),s,a,c,r;for(r=0,c=o.length;r<c;r++){s=o[r].href||o[r].src;a=e.lang.string(s).replace('~').by(t);i=e.lang.string(i).replace(a).by(s)};return i}})(wysihtml5);(function(e){var t=e.dom,n=['LI','P','H1','H2','H3','H4','H5','H6'],r=['UL','OL','MENU'];e.quirks.insertLineBreakOnReturn=function(i){function o(n){var r=t.getParentElement(n,{nodeName:['P','DIV']},2);if(!r){return};var o=document.createTextNode(e.INVISIBLE_SPACE);t.insert(o).before(r);t.replaceWithChildNodes(r);i.selection.selectNode(o)};function s(s){var a=s.keyCode;if(s.shiftKey||(a!==e.ENTER_KEY&&a!==e.BACKSPACE_KEY)){return};var f=s.target,l=i.selection.getSelectedNode(),c=t.getParentElement(l,{nodeName:n},4);if(c){if(c.nodeName==='LI'&&(a===e.ENTER_KEY||a===e.BACKSPACE_KEY)){setTimeout(function(){var e=i.selection.getSelectedNode(),n,s;if(!e){return};n=t.getParentElement(e,{nodeName:r},2);if(n){return};o(e)},0)}
else if(c.nodeName.match(/H[1-6]/)&&a===e.ENTER_KEY){setTimeout(function(){o(i.selection.getSelectedNode())},0)};return};if(a===e.ENTER_KEY&&!e.browser.insertsLineBreaksOnReturn()){i.commands.exec('insertLineBreak');s.preventDefault()}};t.observe(i.element.ownerDocument,'keydown',s)}})(wysihtml5);(function(e){var t='wysihtml5-quirks-redraw';e.quirks.redraw=function(n){e.dom.addClass(n,t);e.dom.removeClass(n,t);try{var i=n.ownerDocument;i.execCommand('italic',!1,null);i.execCommand('italic',!1,null)}catch(r){}}})(wysihtml5);(function(e){var t=e.dom;function n(e){var t=0;if(e.parentNode){do{t+=e.offsetTop||0;e=e.offsetParent}
while(e);};return t};e.Selection=Base.extend({constructor:function(e){window.rangy.init();this.editor=e;this.composer=e.composer;this.doc=this.composer.doc},getBookmark:function(){var e=this.getRange();return e&&e.cloneRange()},setBookmark:function(e){if(!e){return};this.setSelection(e)},setBefore:function(e){var t=rangy.createRange(this.doc);t.setStartBefore(e);t.setEndBefore(e);return this.setSelection(t)},setAfter:function(e){var t=rangy.createRange(this.doc);t.setStartAfter(e);t.setEndAfter(e);return this.setSelection(t)},selectNode:function(n){var i=rangy.createRange(this.doc),s=n.nodeType===e.ELEMENT_NODE,o='canHaveHTML' in n?n.canHaveHTML:(n.nodeName!=='IMG'),c=s?n.innerHTML:n.data,a=(c===''||c===e.INVISIBLE_SPACE),l=t.getStyle('display').from(n),f=(l==='block'||l==='list-item');if(a&&s&&o){try{n.innerHTML=e.INVISIBLE_SPACE}catch(r){}};if(o){i.selectNodeContents(n)}
else{i.selectNode(n)};if(o&&a&&s){i.collapse(f)}
else if(o&&a){i.setStartAfter(n);i.setEndAfter(n)};this.setSelection(i)},getSelectedNode:function(e){var n,t;if(e&&this.doc.selection&&this.doc.selection.type==='Control'){t=this.doc.selection.createRange();if(t&&t.length){return t.item(0)}};n=this.getSelection(this.doc);if(n.focusNode===n.anchorNode){return n.focusNode}
else{t=this.getRange(this.doc);return t?t.commonAncestorContainer:this.doc.body}},executeAndRestore:function(t,n){var i=this.doc.body,l=n&&i.scrollTop,f=n&&i.scrollLeft,a='_wysihtml5-temp-placeholder',u='<span class="'+a+'">'+e.INVISIBLE_SPACE+'</span>',o=this.getRange(this.doc),s;if(!o){t(i,i);return};var c=o.createContextualFragment(u);o.insertNode(c);try{t(o.startContainer,o.endContainer)}catch(r){setTimeout(function(){throw r},0)};caretPlaceholder=this.doc.querySelector('.'+a);if(caretPlaceholder){s=rangy.createRange(this.doc);s.selectNode(caretPlaceholder);s.deleteContents();this.setSelection(s)}
else{i.focus()};if(n){i.scrollTop=l;i.scrollLeft=f};try{caretPlaceholder.parentNode.removeChild(caretPlaceholder)}catch(r){}},executeAndRestoreSimple:function(e){var n=this.getRange(),c=this.doc.body,i,a,o,s,r;if(!n){e(c,c);return};s=n.getNodes([3]);a=s[0]||n.startContainer;o=s[s.length-1]||n.endContainer;r={collapsed:n.collapsed,startContainer:a,startOffset:a===n.startContainer?n.startOffset:0,endContainer:o,endOffset:o===n.endContainer?n.endOffset:o.length};try{e(n.startContainer,n.endContainer)}catch(t){setTimeout(function(){throw t},0)};i=rangy.createRange(this.doc);try{i.setStart(r.startContainer,r.startOffset)}catch(t){};try{i.setEnd(r.endContainer,r.endOffset)}catch(t){};try{this.setSelection(i)}catch(t){}},insertHTML:function(e){var r=rangy.createRange(this.doc),t=r.createContextualFragment(e),n=t.lastChild;this.insertNode(t);if(n){this.setAfter(n)}},insertNode:function(e){var t=this.getRange();if(t){t.insertNode(e)}},surround:function(e){var n=this.getRange();if(!n){return};try{n.surroundContents(e);this.selectNode(e)}catch(t){e.appendChild(n.extractContents());n.insertNode(e)}},scrollIntoView:function(){var t=this.doc,o=t.documentElement.scrollHeight>t.documentElement.offsetHeight,r=t._wysihtml5ScrollIntoViewElement=t._wysihtml5ScrollIntoViewElement||(function(){var n=t.createElement('span');n.innerHTML=e.INVISIBLE_SPACE;return n})(),i;if(o){this.insertNode(r);i=n(r);r.parentNode.removeChild(r);if(i>t.body.scrollTop){t.body.scrollTop=i}}},selectLine:function(){if(e.browser.supportsSelectionModify()){this._selectLine_W3C()}
else if(this.doc.selection){this._selectLine_MSIE()}},_selectLine_W3C:function(){var t=this.doc.defaultView,e=t.getSelection();e.modify('extend','left','lineboundary');e.modify('extend','right','lineboundary')},_selectLine_MSIE:function(){var t=this.doc.selection.createRange(),n=t.boundingTop,l=t.boundingHeight,a=this.doc.body.scrollWidth,c,s,r,i,o;if(!t.moveToPoint){return};if(n===0){r=this.doc.createElement('span');this.insertNode(r);n=r.offsetTop;r.parentNode.removeChild(r)};n+=1;for(i=-10;i<a;i+=2){try{t.moveToPoint(i,n);break}catch(e){}};c=n;s=this.doc.selection.createRange();for(o=a;o>=0;o--){try{s.moveToPoint(o,c);break}catch(e){}};t.setEndPoint('EndToEnd',s);t.select()},getText:function(){var e=this.getSelection();return e?e.toString():''},getNodes:function(e,t){var n=this.getRange();if(n){return n.getNodes([e],t)}
else{return[]}},getRange:function(){var e=this.getSelection();return e&&e.rangeCount&&e.getRangeAt(0)},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(e){var t=this.doc.defaultView||this.doc.parentWindow,n=rangy.getSelection(t);return n.setSingleRange(e)}})})(wysihtml5);(function(e,t){var c='span',i=/\s+/g;function l(e,t,n){if(!e.className){return!1};var r=e.className.match(n)||[];return r[r.length-1]===t};function f(e,t,n){if(e.className){o(e,n);e.className+=' '+t}
else{e.className=t}};function o(e,t){if(e.className){e.className=e.className.replace(t,'')}};function u(e,t){return e.className.replace(i,' ')==t.className.replace(i,' ')};function d(e){var t=e.parentNode;while(e.firstChild){t.insertBefore(e.firstChild,e)};t.removeChild(e)};function h(e,t){if(e.attributes.length!=t.attributes.length){return!1};for(var r=0,s=e.attributes.length,n,i,o;r<s;++r){n=e.attributes[r];o=n.name;if(o!='class'){i=t.attributes.getNamedItem(o);if(n.specified!=i.specified){return!1};if(n.specified&&n.nodeValue!==i.nodeValue){return!1}}};return!0};function s(e,n){if(t.dom.isCharacterDataNode(e)){if(n==0){return!!e.previousSibling}
else if(n==e.length){return!!e.nextSibling}
else{return!0}};return n>0&&n<e.childNodes.length};function n(e,r,i){var o;if(t.dom.isCharacterDataNode(r)){if(i==0){i=t.dom.getNodeIndex(r);r=r.parentNode}
else if(i==r.length){i=t.dom.getNodeIndex(r)+1;r=r.parentNode}
else{o=t.dom.splitDataNode(r,i)}};if(!o){o=r.cloneNode(!1);if(o.id){o.removeAttribute('id')};var s;while((s=r.childNodes[i])){o.appendChild(s)};t.dom.insertAfter(o,r)};return(r==e)?o:n(e,o.parentNode,t.dom.getNodeIndex(o))};function r(t){this.isElementMerge=(t.nodeType==e.ELEMENT_NODE);this.firstTextNode=this.isElementMerge?t.lastChild:t;this.textNodes=[this.firstTextNode]};r.prototype={doMerge:function(){var r=[],n,t,i;for(var e=0,o=this.textNodes.length;e<o;++e){n=this.textNodes[e];t=n.parentNode;r[e]=n.data;if(e){t.removeChild(n);if(!t.hasChildNodes()){t.parentNode.removeChild(t)}}};this.firstTextNode.data=i=r.join('');return i},getLength:function(){var e=this.textNodes.length,t=0;while(e--){t+=this.textNodes[e].length};return t},toString:function(){var t=[];for(var e=0,n=this.textNodes.length;e<n;++e){t[e]='\''+this.textNodes[e].data+'\''};return'[Merge('+t.join(',')+')]'}};function a(e,t,n,r){this.tagNames=e||[c];this.cssClass=t||'';this.similarClassRegExp=n;this.normalize=r;this.applyToAnyTagName=!1};a.prototype={getAncestorWithClass:function(n){var r;while(n){r=this.cssClass?l(n,this.cssClass,this.similarClassRegExp):!0;if(n.nodeType==e.ELEMENT_NODE&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&r){return n};n=n.parentNode};return!1},postApply:function(e,t){var d=e[0],o=e[e.length-1],s=[],n,l=d,h=o,m=0,g=o.length,a,f;for(var i=0,c=e.length;i<c;++i){a=e[i];f=this.getAdjacentMergeableTextNode(a.parentNode,!1);if(f){if(!n){n=new r(f);s.push(n)};n.textNodes.push(a);if(a===d){l=n.firstTextNode;m=l.length};if(a===o){h=n.firstTextNode;g=n.getLength()}}
else{n=null}};var u=this.getAdjacentMergeableTextNode(o.parentNode,!0);if(u){if(!n){n=new r(o);s.push(n)};n.textNodes.push(u)};if(s.length){for(i=0,c=s.length;i<c;++i){s[i].doMerge()};t.setStart(l,m);t.setEnd(h,g)}},getAdjacentMergeableTextNode:function(t,n){var i=(t.nodeType==e.TEXT_NODE),s=i?t.parentNode:t,r,o=n?'nextSibling':'previousSibling';if(i){r=t[o];if(r&&r.nodeType==e.TEXT_NODE){return r}}
else{r=s[o];if(r&&this.areElementsMergeable(t,r)){return r[n?'firstChild':'lastChild']}};return null},areElementsMergeable:function(e,n){return t.dom.arrayContains(this.tagNames,(e.tagName||'').toLowerCase())&&t.dom.arrayContains(this.tagNames,(n.tagName||'').toLowerCase())&&u(e,n)&&h(e,n)},createContainer:function(e){var t=e.createElement(this.tagNames[0]);if(this.cssClass){t.className=this.cssClass};return t},applyToTextNode:function(e){var n=e.parentNode;if(n.childNodes.length==1&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())){if(this.cssClass){f(n,this.cssClass,this.similarClassRegExp)}}
else{var r=this.createContainer(t.dom.getDocument(e));e.parentNode.insertBefore(r,e);r.appendChild(e)}},isRemovable:function(n){return t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&e.lang.string(n.className).trim()==this.cssClass},undoToTextNode:function(e,t,r){if(!t.containsNode(r)){var i=t.cloneRange();i.selectNode(r);if(i.isPointInRange(t.endContainer,t.endOffset)&&s(t.endContainer,t.endOffset)){n(r,t.endContainer,t.endOffset);t.setEndAfter(r)};if(i.isPointInRange(t.startContainer,t.startOffset)&&s(t.startContainer,t.startOffset)){r=n(r,t.startContainer,t.startOffset)}};if(this.similarClassRegExp){o(r,this.similarClassRegExp)};if(this.isRemovable(r)){d(r)}},applyToRange:function(t){var r=t.getNodes([e.TEXT_NODE]);if(!r.length){try{var s=this.createContainer(t.endContainer.ownerDocument);t.surroundContents(s);this.selectNode(t,s);return}catch(n){}};t.splitBoundaries();r=t.getNodes([e.TEXT_NODE]);if(r.length){var i;for(var o=0,a=r.length;o<a;++o){i=r[o];if(!this.getAncestorWithClass(i)){this.applyToTextNode(i)}};t.setStart(r[0],0);i=r[r.length-1];t.setEnd(i,i.length);if(this.normalize){this.postApply(r,t)}}},undoToRange:function(t){var n=t.getNodes([e.TEXT_NODE]),r,s;if(n.length){t.splitBoundaries();n=t.getNodes([e.TEXT_NODE])}
else{var c=t.endContainer.ownerDocument,o=c.createTextNode(e.INVISIBLE_SPACE);t.insertNode(o);t.selectNode(o);n=[o]};for(var i=0,a=n.length;i<a;++i){r=n[i];s=this.getAncestorWithClass(r);if(s){this.undoToTextNode(r,t,s)}};if(a==1){this.selectNode(t,n[0])}
else{t.setStart(n[0],0);r=n[n.length-1];t.setEnd(r,r.length);if(this.normalize){this.postApply(n,t)}}},selectNode:function(t,n){var i=n.nodeType===e.ELEMENT_NODE,a='canHaveHTML' in n?n.canHaveHTML:!0,s=i?n.innerHTML:n.data,o=(s===''||s===e.INVISIBLE_SPACE);if(o&&i&&a){try{n.innerHTML=e.INVISIBLE_SPACE}catch(r){}};t.selectNodeContents(n);if(o&&i){t.collapse(!1)}
else if(o){t.setStartAfter(n);t.setEndAfter(n)}},getTextSelectedByRange:function(e,t){var n=t.cloneRange();n.selectNodeContents(e);var r=n.intersection(t),i=r?r.toString():'';n.detach();return i},isAppliedToRange:function(t){var s=[],n,i=t.getNodes([e.TEXT_NODE]);if(!i.length){n=this.getAncestorWithClass(t.startContainer);return n?[n]:!1};for(var r=0,a=i.length,o;r<a;++r){o=this.getTextSelectedByRange(i[r],t);n=this.getAncestorWithClass(i[r]);if(o!=''&&!n){return!1}
else{s.push(n)}};return s},toggleRange:function(e){if(this.isAppliedToRange(e)){this.undoToRange(e)}
else{this.applyToRange(e)}}};e.selection.HTMLApplier=a})(wysihtml5,rangy);wysihtml5.Commands=Base.extend({constructor:function(e){this.editor=e;this.composer=e.composer;this.doc=this.composer.doc},support:function(e){return wysihtml5.browser.supportsCommand(this.doc,e)},exec:function(e,t){var r=wysihtml5.commands[e],o=wysihtml5.lang.array(arguments).get(),s=r&&r.exec,i=null;this.editor.fire('beforecommand:composer');if(s){o.unshift(this.composer);i=s.apply(r,o)}
else{try{i=this.doc.execCommand(e,!1,t)}catch(n){}};this.editor.fire('aftercommand:composer');return i},state:function(e,t){var r=wysihtml5.commands[e],i=wysihtml5.lang.array(arguments).get(),o=r&&r.state;if(o){i.unshift(this.composer);return o.apply(r,i)}
else{try{return this.doc.queryCommandState(e)}catch(n){return!1}}},value:function(e){var n=wysihtml5.commands[e],r=n&&n.value;if(r){return r.call(n,this.composer,e)}
else{try{return this.doc.queryCommandValue(e)}catch(t){return null}}}});(function(e){var t;e.commands.bold={exec:function(t,n){return e.commands.formatInline.exec(t,n,'b')},state:function(t,n,r){return e.commands.formatInline.state(t,n,'b')},value:function(){return t}}})(wysihtml5);(function(e){var n,r='A',t=e.dom;function i(e,n){var a=n.length,i=0,r,o,s;for(;i<a;i++){r=n[i];o=t.getParentElement(r,{nodeName:'code'});s=t.getTextContent(r);if(s.match(t.autoLink.URL_REG_EXP)&&!o){o=t.renameElement(r,'code')}
else{t.replaceWithChildNodes(r)}}};function o(i,o){var m=i.doc,g='_wysihtml5-temp-'+(+new Date()),y=/non-matching-class/g,a=0,c,l,s,p,v,f,u,d,h;e.commands.formatInline.exec(i,n,r,g,y);l=m.querySelectorAll(r+'.'+g);c=l.length;for(;a<c;a++){s=l[a];s.removeAttribute('class');for(h in o){s.setAttribute(h,o[h])}};f=s;if(c===1){u=t.getTextContent(s);p=!!s.querySelector('*');v=u===''||u===e.INVISIBLE_SPACE;if(!p&&v){t.setTextContent(s,o.text||s.href);d=m.createTextNode(' ');i.selection.setAfter(s);i.selection.insertNode(d);f=d}};i.selection.setAfter(f)};e.commands.createLink={exec:function(e,t,n){var r=this.state(e,t);if(r){e.selection.executeAndRestore(function(){i(e,r)})}
else{n=typeof(n)==='object'?n:{href:n};o(e,n)}},state:function(t,n){return e.commands.formatInline.state(t,n,'A')},value:function(){return n}}})(wysihtml5);(function(e){var n,t=/wysiwyg-font-size-[a-z\-]+/g;e.commands.fontSize={exec:function(n,r,i){return e.commands.formatInline.exec(n,r,'span','wysiwyg-font-size-'+i,t)},state:function(n,r,i){return e.commands.formatInline.state(n,r,'span','wysiwyg-font-size-'+i,t)},value:function(){return n}}})(wysihtml5);(function(e){var n,t=/wysiwyg-color-[a-z]+/g;e.commands.foreColor={exec:function(n,r,i){return e.commands.formatInline.exec(n,r,'span','wysiwyg-color-'+i,t)},state:function(n,r,i){return e.commands.formatInline.state(n,r,'span','wysiwyg-color-'+i,t)},value:function(){return n}}})(wysihtml5);(function(e){var f,t=e.dom,n='DIV',i=['H1','H2','H3','H4','H5','H6','P','BLOCKQUOTE',n];function u(e,t,n){if(e.className){o(e,n);e.className+=' '+t}
else{e.className=t}};function o(e,t){e.className=e.className.replace(t,'')};function s(t){return t.nodeType===e.TEXT_NODE&&!e.lang.string(t.data).trim()};function a(e){var t=e.previousSibling;while(t&&s(t)){t=t.previousSibling};return t};function c(e){var t=e.nextSibling;while(t&&s(t)){t=t.nextSibling};return t};function d(e){var n=e.ownerDocument,t=c(e),r=a(e);if(t&&!l(t)){e.parentNode.insertBefore(n.createElement('br'),t)};if(r&&!l(r)){e.parentNode.insertBefore(n.createElement('br'),e)}};function h(e){var t=c(e),n=a(e);if(t&&r(t)){t.parentNode.removeChild(t)};if(n&&r(n)){n.parentNode.removeChild(n)}};function m(e){var t=e.lastChild;if(t&&r(t)){t.parentNode.removeChild(t)}};function r(e){return e.nodeName==='BR'};function l(e){if(r(e)){return!0};if(t.getStyle('display').from(e)==='block'){return!0};return!1};function g(n,r,i,o){if(o){var s=t.observe(n,'DOMNodeInserted',function(n){var r=n.target,i;if(r.nodeType!==e.ELEMENT_NODE){return};i=t.getStyle('display').from(r);if(i.substr(0,6)!=='inline'){r.className+=' '+o}})};n.execCommand(r,!1,i);if(s){s.stop()}};function p(e,t){e.selection.selectLine();e.selection.surround(t);h(t);m(t);e.selection.selectNode(t)};function v(t){return!!e.lang.string(t.className).trim()};e.commands.formatBlock={exec:function(r,s,a,c,f){var h=r.doc,l=this.state(r,s,a,c,f),m;a=typeof(a)==='string'?a.toUpperCase():a;if(l){r.selection.executeAndRestoreSimple(function(){if(f){o(l,f)};var e=v(l);if(!e&&l.nodeName===(a||n)){d(l);t.replaceWithChildNodes(l)}
else if(e){t.renameElement(l,n)}});return};if(a===null||e.lang.array(i).contains(a)){m=r.selection.getSelectedNode();l=t.getParentElement(m,{nodeName:i});if(l){r.selection.executeAndRestoreSimple(function(){if(a){l=t.renameElement(l,a)};if(c){u(l,c,f)}});return}};if(r.commands.support(s)){g(h,s,a||n,c);return};l=h.createElement(a||n);if(c){l.className=c};p(r,l)},state:function(e,n,r,i,o){r=typeof(r)==='string'?r.toUpperCase():r;var s=e.selection.getSelectedNode();return t.getParentElement(s,{nodeName:r,className:i,classRegExp:o})},value:function(){return f}}})(wysihtml5);(function(e){var i,n={'strong':'b','em':'i','b':'strong','i':'em'},t={};function o(e){var t=n[e];return t?[e.toLowerCase(),t.toLowerCase()]:[e.toLowerCase()]};function r(n,r,i){var s=n+':'+r;if(!t[s]){t[s]=new e.selection.HTMLApplier(o(n),r,i,!0)};return t[s]};e.commands.formatInline={exec:function(e,t,n,i,o){var s=e.selection.getRange();if(!s){return!1};r(n,i,o).toggleRange(s);e.selection.setSelection(s)},state:function(t,i,o,s,a){var c=t.doc,f=n[o]||o,l;if(!e.dom.hasElementWithTagName(c,o)&&!e.dom.hasElementWithTagName(c,f)){return!1};if(s&&!e.dom.hasElementWithClassName(c,s)){return!1};l=t.selection.getRange();if(!l){return!1};return r(o,s,a).isAppliedToRange(l)},value:function(){return i}}})(wysihtml5);(function(e){var t;e.commands.insertHTML={exec:function(e,t,n){if(e.commands.support(t)){e.doc.execCommand(t,!1,n)}
else{e.selection.insertHTML(n)}},state:function(){return!1},value:function(){return t}}})(wysihtml5);(function(e){var t='IMG';e.commands.insertImage={exec:function(n,r,i){i=typeof(i)==='object'?i:{src:i};var l=n.doc,o=this.state(n),a,c,s;if(o){n.selection.setBefore(o);s=o.parentNode;s.removeChild(o);e.dom.removeEmptyTextNodes(s);if(s.nodeName==='A'&&!s.firstChild){n.selection.setAfter(s);s.parentNode.removeChild(s)};e.quirks.redraw(n.element);return};o=l.createElement(t);for(c in i){o[c]=i[c]};n.selection.insertNode(o);if(e.browser.hasProblemsSettingCaretAfterImg()){a=l.createTextNode(e.INVISIBLE_SPACE);n.selection.insertNode(a);n.selection.setAfter(a)}
else{n.selection.setAfter(o)}},state:function(n){var s=n.doc,r,i,o;if(!e.dom.hasElementWithTagName(s,t)){return!1};r=n.selection.getSelectedNode();if(!r){return!1};if(r.nodeName===t){return r};if(r.nodeType!==e.ELEMENT_NODE){return!1};i=n.selection.getText();i=e.lang.string(i).trim();if(i){return!1};o=n.selection.getNodes(e.ELEMENT_NODE,function(e){return e.nodeName==='IMG'});if(o.length!==1){return!1};return o[0]},value:function(e){var t=this.state(e);return t&&t.src}}})(wysihtml5);(function(e){var t,n='<br>'+(e.browser.needsSpaceAfterLineBreak()?' ':'');e.commands.insertLineBreak={exec:function(t,r){if(t.commands.support(r)){t.doc.execCommand(r,!1,null);if(!e.browser.autoScrollsToCaret()){t.selection.scrollIntoView()}}
else{t.commands.exec('insertHTML',n)}},state:function(){return!1},value:function(){return t}}})(wysihtml5);(function(e){var t;e.commands.insertOrderedList={exec:function(t,n){var o=t.doc,s=t.selection.getSelectedNode(),r=e.dom.getParentElement(s,{nodeName:'OL'}),a=e.dom.getParentElement(s,{nodeName:'UL'}),c='_wysihtml5-temp-'+new Date().getTime(),l,i;if(t.commands.support(n)){o.execCommand(n,!1,null);return};if(r){t.selection.executeAndRestoreSimple(function(){e.dom.resolveList(r)})}
else if(a){t.selection.executeAndRestoreSimple(function(){e.dom.renameElement(a,'ol')})}
else{t.commands.exec('formatBlock','div',c);i=o.querySelector('.'+c);l=i.innerHTML===''||i.innerHTML===e.INVISIBLE_SPACE;t.selection.executeAndRestoreSimple(function(){r=e.dom.convertToList(i,'ol')});if(l){t.selection.selectNode(r.querySelector('li'))}}},state:function(t){var n=t.selection.getSelectedNode();return e.dom.getParentElement(n,{nodeName:'OL'})},value:function(){return t}}})(wysihtml5);(function(e){var t;e.commands.insertUnorderedList={exec:function(t,n){var o=t.doc,s=t.selection.getSelectedNode(),r=e.dom.getParentElement(s,{nodeName:'UL'}),a=e.dom.getParentElement(s,{nodeName:'OL'}),c='_wysihtml5-temp-'+new Date().getTime(),l,i;if(t.commands.support(n)){o.execCommand(n,!1,null);return};if(r){t.selection.executeAndRestoreSimple(function(){e.dom.resolveList(r)})}
else if(a){t.selection.executeAndRestoreSimple(function(){e.dom.renameElement(a,'ul')})}
else{t.commands.exec('formatBlock','div',c);i=o.querySelector('.'+c);l=i.innerHTML===''||i.innerHTML===e.INVISIBLE_SPACE;t.selection.executeAndRestoreSimple(function(){r=e.dom.convertToList(i,'ul')});if(l){t.selection.selectNode(r.querySelector('li'))}}},state:function(t){var n=t.selection.getSelectedNode();return e.dom.getParentElement(n,{nodeName:'UL'})},value:function(){return t}}})(wysihtml5);(function(e){var t;e.commands.italic={exec:function(t,n){return e.commands.formatInline.exec(t,n,'i')},state:function(t,n,r){return e.commands.formatInline.state(t,n,'i')},value:function(){return t}}})(wysihtml5);(function(e){var r,t='wysiwyg-text-align-center',n=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyCenter={exec:function(r,i){return e.commands.formatBlock.exec(r,'formatBlock',null,t,n)},state:function(r,i){return e.commands.formatBlock.state(r,'formatBlock',null,t,n)},value:function(){return r}}})(wysihtml5);(function(e){var r,t='wysiwyg-text-align-left',n=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyLeft={exec:function(r,i){return e.commands.formatBlock.exec(r,'formatBlock',null,t,n)},state:function(r,i){return e.commands.formatBlock.state(r,'formatBlock',null,t,n)},value:function(){return r}}})(wysihtml5);(function(e){var r,t='wysiwyg-text-align-right',n=/wysiwyg-text-align-[a-z]+/g;e.commands.justifyRight={exec:function(r,i){return e.commands.formatBlock.exec(r,'formatBlock',null,t,n)},state:function(r,i){return e.commands.formatBlock.state(r,'formatBlock',null,t,n)},value:function(){return r}}})(wysihtml5);(function(e){var t;e.commands.underline={exec:function(t,n){return e.commands.formatInline.exec(t,n,'u')},state:function(t,n){return e.commands.formatInline.state(t,n,'u')},value:function(){return t}}})(wysihtml5);(function(e){var n=90,r=89,i=8,o=46,s=40,a='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+'</span>',c='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+'</span>',t=e.dom;function l(e){var t;while(t=e.querySelector('._wysihtml5-temp')){t.parentNode.removeChild(t)}};e.UndoManager=e.lang.Dispatcher.extend({constructor:function(e){this.editor=e;this.composer=e.composer;this.element=this.composer.element;this.history=[this.composer.getValue()];this.position=1;if(this.composer.commands.support('insertHTML')){this._observe()}},_observe:function(){var s=this,f=this.composer.sandbox.getDocument(),m;t.observe(this.element,'keydown',function(e){if(e.altKey||(!e.ctrlKey&&!e.metaKey)){return};var t=e.keyCode,i=t===n&&!e.shiftKey,o=(t===n&&e.shiftKey)||(t===r);if(i){s.undo();e.preventDefault()}
else if(o){s.redo();e.preventDefault()}});t.observe(this.element,'keydown',function(e){var t=e.keyCode;if(t===m){return};m=t;if(t===i||t===o){s.transact()}});if(e.browser.hasUndoInContextMenu()){var d,h,u=function(){l(f);clearInterval(d)};t.observe(this.element,'contextmenu',function(){u();s.composer.selection.executeAndRestoreSimple(function(){if(s.element.lastChild){s.composer.selection.setAfter(s.element.lastChild)};f.execCommand('insertHTML',!1,a);f.execCommand('insertHTML',!1,c);f.execCommand('undo',!1,null)});d=setInterval(function(){if(f.getElementById('_wysihtml5-redo')){u();s.redo()}
else if(!f.getElementById('_wysihtml5-undo')){u();s.undo()}},400);if(!h){h=!0;t.observe(document,'mousedown',u);t.observe(f,['mousedown','paste','cut','copy'],u)}})};this.editor.observe('newword:composer',function(){s.transact()}).observe('beforecommand:composer',function(){s.transact()})},transact:function(){var n=this.history[this.position-1],e=this.composer.getValue();if(e==n){return};var t=this.history.length=this.position;if(t>s){this.history.shift();this.position--};this.position++;this.history.push(e)},undo:function(){this.transact();if(this.position<=1){return};this.set(this.history[--this.position-1]);this.editor.fire('undo:composer')},redo:function(){if(this.position>=this.history.length){return};this.set(this.history[++this.position-1]);this.editor.fire('redo:composer')},set:function(e){this.composer.setValue(e);this.editor.focus(!0)}})})(wysihtml5);wysihtml5.views.View=Base.extend({constructor:function(e,t,n){this.parent=e;this.element=t;this.config=n;this._observeViewChange()},_observeViewChange:function(){var e=this;this.parent.observe('beforeload',function(){e.parent.observe('change_view',function(t){if(t===e.name){e.parent.currentView=e;e.show();setTimeout(function(){e.focus()},0)}
else{e.hide()}})})},focus:function(){if(this.element.ownerDocument.querySelector(':focus')===this.element){return};try{this.element.focus()}catch(e){}},hide:function(){this.element.style.display='none'},show:function(){this.element.style.display=''},disable:function(){this.element.setAttribute('disabled','disabled')},enable:function(){this.element.removeAttribute('disabled')}});(function(e){var t=e.dom,n=e.browser;e.views.Composer=e.views.View.extend({name:'composer',CARET_HACK:'<br>',constructor:function(e,t,n){this.base(e,t,n);this.textarea=this.parent.textarea;this._initSandbox()},clear:function(){this.element.innerHTML=n.displaysCaretInEmptyContentEditableCorrectly()?'':this.CARET_HACK},getValue:function(t){var n=this.isEmpty()?'':e.quirks.getCorrectInnerHTML(this.element);if(t){n=this.parent.parse(n)};n=e.lang.string(n).replace(e.INVISIBLE_SPACE).by('');return n},setValue:function(e,t){if(t){e=this.parent.parse(e)};this.element.innerHTML=e},show:function(){this.iframe.style.display=this._displayStyle||'';this.disable();this.enable()},hide:function(){this._displayStyle=t.getStyle('display').from(this.iframe);if(this._displayStyle==='none'){this._displayStyle=null};this.iframe.style.display='none'},disable:function(){this.element.removeAttribute('contentEditable');this.base()},enable:function(){this.element.setAttribute('contentEditable','true');this.base()},focus:function(t){if(e.browser.doesAsyncFocus()&&this.hasPlaceholderSet()){this.clear()};this.base();var n=this.element.lastChild;if(t&&n){if(n.nodeName==='BR'){this.selection.setBefore(this.element.lastChild)}
else{this.selection.setAfter(this.element.lastChild)}}},getTextContent:function(){return t.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute('placeholder')},isEmpty:function(){var e=this.element.innerHTML,t='blockquote, ul, ol, img, embed, object, table, iframe, svg, video, audio, button, input, select, textarea';return e===''||e===this.CARET_HACK||this.hasPlaceholderSet()||(this.getTextContent()===''&&!this.element.querySelector(t))},_initSandbox:function(){var r=this;this.sandbox=new t.Sandbox(function(){r._create()},{stylesheets:this.config.stylesheets});this.iframe=this.sandbox.getIframe();var e=document.createElement('input');e.type='hidden';e.name='_wysihtml5_mode';e.value=1;var n=this.textarea.element;t.insert(this.iframe).after(n);t.insert(e).after(n)},_create:function(){var o=this;this.doc=this.sandbox.getDocument();this.element=this.doc.body;this.textarea=this.parent.textarea;this.element.innerHTML=this.textarea.getValue(!0);this.enable();this.selection=new e.Selection(this.parent);this.commands=new e.Commands(this.parent);t.copyAttributes(['className','spellcheck','title','lang','dir','accessKey']).from(this.textarea.element).to(this.element);t.addClass(this.element,this.config.composerClassName);if(this.config.style){this.style()};this.observe();var r=this.config.name;if(r){t.addClass(this.element,r);t.addClass(this.iframe,r)};var i=typeof(this.config.placeholder)==='string'?this.config.placeholder:this.textarea.element.getAttribute('placeholder');if(i){t.simulatePlaceholder(this.parent,this,i)};this.commands.exec('styleWithCSS',!1);this._initAutoLinking();this._initObjectResizing();this._initUndoManager();if(this.textarea.element.hasAttribute('autofocus')||document.querySelector(':focus')==this.textarea.element){setTimeout(function(){o.focus()},100)};e.quirks.insertLineBreakOnReturn(this);if(!n.clearsContentEditableCorrectly()){e.quirks.ensureProperClearing(this)};if(!n.clearsListsInContentEditableCorrectly()){e.quirks.ensureProperClearingOfLists(this)};if(this.initSync&&this.config.sync){this.initSync()};this.textarea.hide();this.parent.fire('beforeload').fire('load')},_initAutoLinking:function(){var i=this,o=n.canDisableAutoLinking(),s=n.doesAutoLinkingInContentEditable();if(o){this.commands.exec('autoUrlDetect',!1)};if(!this.config.autoLink){return};if(!s||(s&&o)){this.parent.observe('newword:composer',function(){i.selection.executeAndRestore(function(e,n){t.autoLink(n.parentNode)})})};var a=this.sandbox.getDocument().getElementsByTagName('a'),c=t.autoLink.URL_REG_EXP,r=function(n){var r=e.lang.string(t.getTextContent(n)).trim();if(r.substr(0,4)==='www.'){r='http://'+r};return r};t.observe(this.element,'keydown',function(e){if(!a.length){return};var s=i.selection.getSelectedNode(e.target.ownerDocument),n=t.getParentElement(s,{nodeName:'A'},4),o;if(!n){return};o=r(n);setTimeout(function(){var e=r(n);if(e===o){return};if(e.match(c)){n.setAttribute('href',e)}},0)})},_initObjectResizing:function(){var i=['width','height'],o=i.length,r=this.element;this.commands.exec('enableObjectResizing',this.config.allowObjectResizing);if(this.config.allowObjectResizing){if(n.supportsEvent('resizeend')){t.observe(r,'resizeend',function(t){var c=t.target||t.srcElement,s=c.style,a=0,n;for(;a<o;a++){n=i[a];if(s[n]){c.setAttribute(n,parseInt(s[n],10));s[n]=''}};e.quirks.redraw(r)})}}
else{if(n.supportsEvent('resizestart')){t.observe(r,'resizestart',function(e){e.preventDefault()})}}},_initUndoManager:function(){new e.UndoManager(this.parent)}})})(wysihtml5);(function(e){var t=e.dom,n=document,i=window,s=n.createElement('div'),r=['background-color','color','cursor','font-family','font-size','font-style','font-variant','font-weight','line-height','letter-spacing','text-align','text-decoration','text-indent','text-rendering','word-break','word-wrap','word-spacing'],o=['background-color','border-collapse','border-bottom-color','border-bottom-style','border-bottom-width','border-left-color','border-left-style','border-left-width','border-right-color','border-right-style','border-right-width','border-top-color','border-top-style','border-top-width','clear','display','float','margin-bottom','margin-left','margin-right','margin-top','outline-color','outline-offset','outline-width','outline-style','padding-left','padding-right','padding-top','padding-bottom','position','top','left','right','bottom','z-index','vertical-align','text-align','-webkit-box-sizing','-moz-box-sizing','-ms-box-sizing','box-sizing','-webkit-box-shadow','-moz-box-shadow','-ms-box-shadow','box-shadow','-webkit-border-top-right-radius','-moz-border-radius-topright','border-top-right-radius','-webkit-border-bottom-right-radius','-moz-border-radius-bottomright','border-bottom-right-radius','-webkit-border-bottom-left-radius','-moz-border-radius-bottomleft','border-bottom-left-radius','-webkit-border-top-left-radius','-moz-border-radius-topleft','border-top-left-radius','width','height'],a=['width','height','top','left','right','bottom'],c=['html             { height: 100%; }','body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }','._wysihtml5-temp { display: none; }',e.browser.isGecko?'body.placeholder { color: graytext !important; }':'body.placeholder { color: #a9a9a9 !important; }','body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }','img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }'],l=function(e){if(e.setActive){try{e.setActive()}catch(r){}}
else{var o=e.style,s=n.documentElement.scrollTop||n.body.scrollTop,a=n.documentElement.scrollLeft||n.body.scrollLeft,c={position:o.position,top:o.top,left:o.left,WebkitUserSelect:o.WebkitUserSelect};t.setStyles({position:'absolute',top:'-99999px',left:'-99999px',WebkitUserSelect:'none'}).on(e);e.focus();t.setStyles(c).on(e);if(i.scrollTo){i.scrollTo(a,s)}}};e.views.Composer.prototype.style=function(){var u=this,d=n.querySelector(':focus'),f=this.textarea.element,h=f.hasAttribute('placeholder'),p=h&&f.getAttribute('placeholder');this.focusStylesHost=this.focusStylesHost||s.cloneNode(!1);this.blurStylesHost=this.blurStylesHost||s.cloneNode(!1);if(h){f.removeAttribute('placeholder')};if(f===d){f.blur()};t.copyStyles(o).from(f).to(this.iframe).andTo(this.blurStylesHost);t.copyStyles(r).from(f).to(this.element).andTo(this.blurStylesHost);t.insertCSS(c).into(this.element.ownerDocument);l(f);t.copyStyles(o).from(f).to(this.focusStylesHost);t.copyStyles(r).from(f).to(this.focusStylesHost);var m=e.lang.array(o).without(['display']);if(d){d.focus()}
else{f.blur()};if(h){f.setAttribute('placeholder',p)};if(!e.browser.hasCurrentStyleProperty()){var g=t.observe(i,'resize',function(){if(!t.contains(document.documentElement,u.iframe)){g.stop();return};var e=t.getStyle('display').from(f),n=t.getStyle('display').from(u.iframe);f.style.display='';u.iframe.style.display='none';t.copyStyles(a).from(f).to(u.iframe).andTo(u.focusStylesHost).andTo(u.blurStylesHost);u.iframe.style.display=n;f.style.display=e})};this.parent.observe('focus:composer',function(){t.copyStyles(m).from(u.focusStylesHost).to(u.iframe);t.copyStyles(r).from(u.focusStylesHost).to(u.element)});this.parent.observe('blur:composer',function(){t.copyStyles(m).from(u.blurStylesHost).to(u.iframe);t.copyStyles(r).from(u.blurStylesHost).to(u.element)});return this}})(wysihtml5);(function(e){var t=e.dom,n=e.browser,r={'66':'bold','73':'italic','85':'underline'};e.views.Composer.prototype.observe=function(){var i=this,a=this.getValue(),c=this.sandbox.getIframe(),o=this.element,l=n.supportsEventsInIframeCorrectly()?o:this.sandbox.getWindow(),u=n.supportsEvent('drop')?['drop','paste']:['dragdrop','paste'];t.observe(c,'DOMNodeRemoved',function(){clearInterval(s);i.parent.fire('destroy:composer')});var s=setInterval(function(){if(!t.contains(document.documentElement,c)){clearInterval(s);i.parent.fire('destroy:composer')}},250);t.observe(l,'focus',function(){i.parent.fire('focus').fire('focus:composer');setTimeout(function(){a=i.getValue()},0)});t.observe(l,'blur',function(){if(a!==i.getValue()){i.parent.fire('change').fire('change:composer')};i.parent.fire('blur').fire('blur:composer')});if(e.browser.isIos()){t.observe(o,'blur',function(){var t=o.ownerDocument.createElement('input'),n=document.documentElement.scrollTop||document.body.scrollTop,r=document.documentElement.scrollLeft||document.body.scrollLeft;try{i.selection.insertNode(t)}catch(e){o.appendChild(t)};t.focus();t.parentNode.removeChild(t);window.scrollTo(r,n)})};t.observe(o,'dragenter',function(){i.parent.fire('unset_placeholder')});if(n.firesOnDropOnlyWhenOnDragOverIsCancelled()){t.observe(o,['dragover','dragenter'],function(e){e.preventDefault()})};t.observe(o,u,function(e){var t=e.dataTransfer,r;if(t&&n.supportsDataTransfer()){r=t.getData('text/html')||t.getData('text/plain')};if(r){o.focus();i.commands.exec('insertHTML',r);i.parent.fire('paste').fire('paste:composer');e.stopPropagation();e.preventDefault()}
else{setTimeout(function(){i.parent.fire('paste').fire('paste:composer')},0)}});t.observe(o,'keyup',function(t){var n=t.keyCode;if(n===e.SPACE_KEY||n===e.ENTER_KEY){i.parent.fire('newword:composer')}});this.parent.observe('paste:composer',function(){setTimeout(function(){i.parent.fire('newword:composer')},0)});if(!n.canSelectImagesInContentEditable()){t.observe(o,'mousedown',function(e){var t=e.target;if(t.nodeName==='IMG'){i.selection.selectNode(t);e.preventDefault()}})};t.observe(o,'keydown',function(e){var n=e.keyCode,t=r[n];if((e.ctrlKey||e.metaKey)&&!e.altKey&&t){i.commands.exec(t);e.preventDefault()}});t.observe(o,'keydown',function(t){var r=i.selection.getSelectedNode(!0),s=t.keyCode,n;if(r&&r.nodeName==='IMG'&&(s===e.BACKSPACE_KEY||s===e.DELETE_KEY)){n=r.parentNode;n.removeChild(r);if(n.nodeName==='A'&&!n.firstChild){n.parentNode.removeChild(n)};setTimeout(function(){e.quirks.redraw(o)},0);t.preventDefault()}});var f={IMG:'Image: ',A:'Link: '};t.observe(o,'mouseover',function(e){var t=e.target,n=t.nodeName,r;if(n!=='A'&&n!=='IMG'){return};var i=t.hasAttribute('title');if(!i){r=f[n]+(t.getAttribute('href')||t.getAttribute('src'));t.setAttribute('title',r)}})}})(wysihtml5);(function(e){var t=400;e.views.Synchronizer=Base.extend({constructor:function(e,t,n){this.editor=e;this.textarea=t;this.composer=n;this._observe()},fromComposerToTextarea:function(t){this.textarea.setValue(e.lang.string(this.composer.getValue()).trim(),t)},fromTextareaToComposer:function(e){var t=this.textarea.getValue();if(t){this.composer.setValue(t,e)}
else{this.composer.clear();this.editor.fire('set_placeholder')}},sync:function(e){if(this.editor.currentView.name==='textarea'){this.fromTextareaToComposer(e)}
else{this.fromComposerToTextarea(e)}},_observe:function(){var r,n=this,i=this.textarea.element.form,o=function(){r=setInterval(function(){n.fromComposerToTextarea()},t)},s=function(){clearInterval(r);r=null};o();if(i){e.dom.observe(i,'submit',function(){n.sync(!0)});e.dom.observe(i,'reset',function(){setTimeout(function(){n.fromTextareaToComposer()},0)})};this.editor.observe('change_view',function(e){if(e==='composer'&&!r){n.fromTextareaToComposer(!0);o()}
else if(e==='textarea'){n.fromComposerToTextarea(!0);s()}});this.editor.observe('destroy:composer',s)}})})(wysihtml5);wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:'textarea',constructor:function(e,t,n){this.base(e,t,n);this._observe()},clear:function(){this.element.value=''},getValue:function(e){var t=this.isEmpty()?'':this.element.value;if(e){t=this.parent.parse(t)};return t},setValue:function(e,t){if(t){e=this.parent.parse(e)};this.element.value=e},hasPlaceholderSet:function(){var t=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),n=this.element.getAttribute('placeholder')||null,e=this.element.value,r=!e;return(t&&r)||(e===n)},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var t=this.element,e=this.parent,n={focusin:'focus',focusout:'blur'},r=wysihtml5.browser.supportsEvent('focusin')?['focusin','focusout','change']:['focus','blur','change'];e.observe('beforeload',function(){wysihtml5.dom.observe(t,r,function(t){var r=n[t.type]||t.type;e.fire(r).fire(r+':textarea')});wysihtml5.dom.observe(t,['paste','drop'],function(){setTimeout(function(){e.fire('paste').fire('paste:textarea')},0)})})}});(function(e){var t=e.dom,n='wysihtml5-command-dialog-opened',r='input, select, textarea',i='[data-wysihtml5-dialog-field]',o='data-wysihtml5-dialog-field';e.toolbar.Dialog=e.lang.Dispatcher.extend({constructor:function(e,t){this.link=e;this.container=t},_observe:function(){if(this._observed){return};var i=this,a=function(e){var t=i._serialize();if(t==i.elementToChange){i.fire('edit',t)}
else{i.fire('save',t)};i.hide();e.preventDefault();e.stopPropagation()};t.observe(i.link,'click',function(e){if(t.hasClass(i.link,n)){setTimeout(function(){i.hide()},0)}});t.observe(this.container,'keydown',function(t){var n=t.keyCode;if(n===e.ENTER_KEY){a(t)};if(n===e.ESCAPE_KEY){i.hide()}});t.delegate(this.container,'[data-wysihtml5-dialog-action=save]','click',a);t.delegate(this.container,'[data-wysihtml5-dialog-action=cancel]','click',function(e){i.fire('cancel');i.hide();e.preventDefault();e.stopPropagation()});var s=this.container.querySelectorAll(r),o=0,c=s.length,l=function(){clearInterval(i.interval)};for(;o<c;o++){t.observe(s[o],'change',l)};this._observed=!0},_serialize:function(){var n=this.elementToChange||{},t=this.container.querySelectorAll(i),r=t.length,e=0;for(;e<r;e++){n[t[e].getAttribute(o)]=t[e].value};return n},_interpolate:function(e){var t,r,s,c=document.querySelector(':focus'),a=this.container.querySelectorAll(i),l=a.length,n=0;for(;n<l;n++){t=a[n];if(t===c){continue};if(e&&t.type==='hidden'){continue};r=t.getAttribute(o);s=this.elementToChange?(this.elementToChange[r]||''):t.defaultValue;t.value=s}},show:function(e){var s=this,o=this.container.querySelector(r);this.elementToChange=e;this._observe();this._interpolate();if(e){this.interval=setInterval(function(){s._interpolate(!0)},500)};t.addClass(this.link,n);this.container.style.display='';this.fire('show');if(o&&!e){try{o.focus()}catch(i){}}},hide:function(){clearInterval(this.interval);this.elementToChange=null;t.removeClass(this.link,n);this.container.style.display='none';this.fire('hide')}})})(wysihtml5);(function(e){var t=e.dom,o={position:'relative'};var n={left:0,margin:0,opacity:0,overflow:'hidden',padding:0,position:'absolute',top:0,zIndex:1};var i={cursor:'inherit',fontSize:'50px',height:'50px',marginTop:'-25px',outline:0,padding:0,position:'absolute',right:'-4px',top:'50%'};var r={'x-webkit-speech':'','speech':''};e.toolbar.Speech=function(s,a){var c=document.createElement('input');if(!e.browser.supportsSpeechApiOn(c)){a.style.display='none';return};var l=document.createElement('div');e.lang.object(n).merge({width:a.offsetWidth+'px',height:a.offsetHeight+'px'});t.insert(c).into(l);t.insert(l).into(a);t.setStyles(i).on(c);t.setAttributes(r).on(c);t.setStyles(n).on(l);t.setStyles(o).on(a);var f='onwebkitspeechchange' in c?'webkitspeechchange':'speechchange';t.observe(c,f,function(){s.execCommand('insertText',c.value);c.value=''});t.observe(c,'click',function(e){if(t.hasClass(a,'wysihtml5-command-disabled')){e.preventDefault()};e.stopPropagation()})}})(wysihtml5);(function(e){var r='wysihtml5-command-disabled',i='wysihtml5-commands-disabled',n='wysihtml5-command-active',o='wysihtml5-action-active',t=e.dom;e.toolbar.Toolbar=Base.extend({constructor:function(t,n){this.editor=t;this.container=typeof(n)==='string'?document.getElementById(n):n;this.composer=t.composer;this._getLinks('command');this._getLinks('action');this._observe();this.show();var i=this.container.querySelectorAll('[data-wysihtml5-command=insertSpeech]'),o=i.length,r=0;for(;r<o;r++){new e.toolbar.Speech(this,i[r])}},_getLinks:function(t){var s=this[t+'Links']=e.lang.array(this.container.querySelectorAll('[data-wysihtml5-'+t+']')).get(),l=s.length,i=0,f=this[t+'Mapping']={},n,a,r,o,c;for(;i<l;i++){n=s[i];r=n.getAttribute('data-wysihtml5-'+t);o=n.getAttribute('data-wysihtml5-'+t+'-value');a=this.container.querySelector('[data-wysihtml5-'+t+'-group=\''+r+'\']');c=this._getDialog(n,r);f[r+':'+o]={link:n,group:a,name:r,value:o,dialog:c,state:!1}}},_getDialog:function(t,n){var r=this,i=this.container.querySelector('[data-wysihtml5-dialog=\''+n+'\']'),o,s;if(i){o=new e.toolbar.Dialog(t,i);o.observe('show',function(){s=r.composer.selection.getBookmark();r.editor.fire('show:dialog',{command:n,dialogContainer:i,commandLink:t})});o.observe('save',function(e){if(s){r.composer.selection.setBookmark(s)};r._execCommand(n,e);r.editor.fire('save:dialog',{command:n,dialogContainer:i,commandLink:t})});o.observe('cancel',function(){r.editor.focus(!1);r.editor.fire('cancel:dialog',{command:n,dialogContainer:i,commandLink:t})})};return o},execCommand:function(e,t){if(this.commandsDisabled){return};var n=this.commandMapping[e+':'+t];if(n&&n.dialog&&!n.state){n.dialog.show()}
else{this._execCommand(e,t)}},_execCommand:function(e,t){this.editor.focus(!1);this.composer.commands.exec(e,t);this._updateLinkStates()},execAction:function(e){var t=this.editor;switch(e){case'change_view':if(t.currentView===t.textarea){t.fire('change_view','composer')}
else{t.fire('change_view','textarea')};break}},_observe:function(){var e=this,r=this.editor,n=this.container,s=this.commandLinks.concat(this.actionLinks),a=s.length,o=0;for(;o<a;o++){t.setAttributes({href:'javascript:;',unselectable:'on'}).on(s[o])};t.delegate(n,'[data-wysihtml5-command]','mousedown',function(e){e.preventDefault()});t.delegate(n,'[data-wysihtml5-command]','click',function(t){var n=this,r=n.getAttribute('data-wysihtml5-command'),i=n.getAttribute('data-wysihtml5-command-value');e.execCommand(r,i);t.preventDefault()});t.delegate(n,'[data-wysihtml5-action]','click',function(t){var n=this.getAttribute('data-wysihtml5-action');e.execAction(n);t.preventDefault()});r.observe('focus:composer',function(){e.bookmark=null;clearInterval(e.interval);e.interval=setInterval(function(){e._updateLinkStates()},500)});r.observe('blur:composer',function(){clearInterval(e.interval)});r.observe('destroy:composer',function(){clearInterval(e.interval)});r.observe('change_view',function(r){setTimeout(function(){e.commandsDisabled=(r!=='composer');e._updateLinkStates();if(e.commandsDisabled){t.addClass(n,i)}
else{t.removeClass(n,i)}},0)})},_updateLinkStates:function(){var u=this.composer.element,l=this.commandMapping,f=this.actionMapping,c,s,a,i;for(c in l){i=l[c];if(this.commandsDisabled){s=!1;t.removeClass(i.link,n);if(i.group){t.removeClass(i.group,n)};if(i.dialog){i.dialog.hide()}}
else{s=this.composer.commands.state(i.name,i.value);if(e.lang.object(s).isArray()){s=s.length===1?s[0]:!0};t.removeClass(i.link,r);if(i.group){t.removeClass(i.group,r)}};if(i.state===s){continue};i.state=s;if(s){t.addClass(i.link,n);if(i.group){t.addClass(i.group,n)};if(i.dialog){if(typeof(s)==='object'){i.dialog.show(s)}
else{i.dialog.hide()}}}
else{t.removeClass(i.link,n);if(i.group){t.removeClass(i.group,n)};if(i.dialog){i.dialog.hide()}}};for(c in f){a=f[c];if(a.name==='change_view'){a.state=this.editor.currentView===this.editor.textarea;if(a.state){t.addClass(a.link,o)}
else{t.removeClass(a.link,o)}}}},show:function(){this.container.style.display=''},hide:function(){this.container.style.display='none'}})})(wysihtml5);(function(e){var t,n={name:t,style:!0,toolbar:t,autoLink:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:e.dom.parse,composerClassName:'wysihtml5-editor',bodyClassName:'wysihtml5-supported',stylesheets:[],placeholderText:t,allowObjectResizing:!0,supportTouchDevices:!0};e.Editor=e.lang.Dispatcher.extend({constructor:function(t,r){this.textareaElement=typeof(t)==='string'?document.getElementById(t):t;this.config=e.lang.object({}).merge(n).merge(r).get();this.textarea=new e.views.Textarea(this,this.textareaElement,this.config);this.currentView=this.textarea;this._isCompatible=e.browser.supported();if(!this._isCompatible||(!this.config.supportTouchDevices&&e.browser.isTouchDevice())){var o=this;setTimeout(function(){o.fire('beforeload').fire('load')},0);return};e.dom.addClass(document.body,this.config.bodyClassName);this.composer=new e.views.Composer(this,this.textareaElement,this.config);this.currentView=this.composer;if(typeof(this.config.parser)==='function'){this._initParser()};this.observe('beforeload',function(){this.synchronizer=new e.views.Synchronizer(this,this.textarea,this.composer);if(this.config.toolbar){this.toolbar=new e.toolbar.Toolbar(this,this.config.toolbar)}});try{console.log('Heya! This page is using wysihtml5 for rich text editing. Check out https://github.com/xing/wysihtml5')}catch(i){}},isCompatible:function(){return this._isCompatible},clear:function(){this.currentView.clear();return this},getValue:function(e){return this.currentView.getValue(e)},setValue:function(e,t){if(!e){return this.clear()};this.currentView.setValue(e,t);return this},focus:function(e){this.currentView.focus(e);return this},disable:function(){this.currentView.disable();return this},enable:function(){this.currentView.enable();return this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(t){var n=this.config.parser(t,this.config.parserRules,this.composer.sandbox.getDocument(),!0);if(typeof(t)==='object'){e.quirks.redraw(t)};return n},_initParser:function(){this.observe('paste:composer',function(){var n=!0,t=this;t.composer.selection.executeAndRestore(function(){e.quirks.cleanPastedHTML(t.composer.element);t.parse(t.composer.element)},n)});this.observe('paste:textarea',function(){var t=this.textarea.getValue(),e;e=this.parse(t);this.textarea.setValue(e)})}})})(wysihtml5);
!function(a,t){"use strict";var o={"font-styles":function(a,t){var l=(t&&t.size)?" btn-"+t.size:"";return"<li class='dropdown'><a class='btn default dropdown-toggle"+l+"' data-toggle='dropdown' href='#'><i class='icon-font'></i>&nbsp;<span class='current-font'>"+a.font_styles.normal+"</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div' tabindex='-1'>"+a.font_styles.normal+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1' tabindex='-1'>"+a.font_styles.h1+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2' tabindex='-1'>"+a.font_styles.h2+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h3' tabindex='-1'>"+a.font_styles.h3+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h4'>"+a.font_styles.h4+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h5'>"+a.font_styles.h5+"</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h6'>"+a.font_styles.h6+"</a></li></ul></li>"},"emphasis":function(a,t){var l=(t&&t.size)?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn default"+l+"' data-wysihtml5-command='bold' title='CTRL+B' tabindex='-1'>"+a.emphasis.bold+"</a><a class='btn default"+l+"' data-wysihtml5-command='italic' title='CTRL+I' tabindex='-1'>"+a.emphasis.italic+"</a><a class='btn default"+l+"' data-wysihtml5-command='underline' title='CTRL+U' tabindex='-1'>"+a.emphasis.underline+"</a></div></li>"},"lists":function(a,t){var l=(t&&t.size)?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn default"+l+"' data-wysihtml5-command='insertUnorderedList' title='"+a.lists.unordered+"' tabindex='-1'><i class='fa fa-list'></i></a><a class='btn default"+l+"' data-wysihtml5-command='insertOrderedList' title='"+a.lists.ordered+"' tabindex='-1'><i class='fa fa-th-list'></i></a><a class='btn default"+l+"' data-wysihtml5-command='Outdent' title='"+a.lists.outdent+"' tabindex='-1'><i class='fa fa-outdent'></i></a><a class='btn default"+l+"' data-wysihtml5-command='Indent' title='"+a.lists.indent+"' tabindex='-1'><i class='fa fa-indent'></i></a></div></li>"},"link":function(t,l){var i=(l&&l.size)?" btn-"+l.size:"";return"<li><div class='bootstrap-wysihtml5-insert-link-modal modal fade'>"+(a.fn.modalmanager?"":"<div class='modal-dialog'>")+" <div class='modal-content'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3>"+t.link.insert+"</h3></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-link-url form-control input-xlarge'><label style='margin-top:5px;'> <input type='checkbox' class='bootstrap-wysihtml5-insert-link-target' checked>"+t.link.target+"</label></div><div class='modal-footer'><a href='#' class='btn default' data-dismiss='modal'>"+t.link.cancel+"</a><a href='#' class='btn btn-primary' data-dismiss='modal'>"+t.link.insert+"</a></div></div>"+(a.fn.modalmanager?"":"</div>")+"</div><a class='btn default"+i+"' data-wysihtml5-command='createLink' title='"+t.link.insert+"' tabindex='-1'><i class='fa fa-share'></i></a></li>"},"image":function(t,l){var i=(l&&l.size)?" btn-"+l.size:"";return"<li><div class='bootstrap-wysihtml5-insert-image-modal modal fade'>"+(a.fn.modalmanager?"":"<div class='modal-dialog'>")+" <div class='modal-content'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3>"+t.image.insert+"</h3></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-image-url form-control input-xlarge'></div><div class='modal-footer'><a href='#' class='btn default' data-dismiss='modal'>"+t.image.cancel+"</a><a href='#' class='btn btn-primary' data-dismiss='modal'>"+t.image.insert+"</a></div></div>"+(a.fn.modalmanager?"":"</div>")+"</div><a class='btn default"+i+"' data-wysihtml5-command='insertImage' title='"+t.image.insert+"' tabindex='-1'><i class='fa fa-picture-o'></i></a></li>"},"html":function(a,t){var l=(t&&t.size)?" btn-"+t.size:"";return"<li><div class='btn-group'><a class='btn default"+l+"' data-wysihtml5-action='change_view' title='"+a.html.edit+"' tabindex='-1'><i class='fa fa-pencil'></i></a></div></li>"},"color":function(a,t){var l=(t&&t.size)?" btn-"+t.size:"";return"<li class='dropdown'><a class='btn default dropdown-toggle"+l+"' data-toggle='dropdown' href='#' tabindex='-1'><span class='current-color'>"+a.colours.black+"</span>&nbsp;<b class='caret'></b></a><ul class='dropdown-menu'><li><div class='wysihtml5-colors' data-wysihtml5-command-value='black'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='black'>"+a.colours.black+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='silver'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='silver'>"+a.colours.silver+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='gray'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='gray'>"+a.colours.gray+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='maroon'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='maroon'>"+a.colours.maroon+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='red'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='red'>"+a.colours.red+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='purple'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='purple'>"+a.colours.purple+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='green'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='green'>"+a.colours.green+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='olive'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='olive'>"+a.colours.olive+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='navy'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='navy'>"+a.colours.navy+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='blue'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='blue'>"+a.colours.blue+"</a></li><li><div class='wysihtml5-colors' data-wysihtml5-command-value='orange'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='orange'>"+a.colours.orange+"</a></li></ul></li>"}};var n=function(a,t,l){return o[a](t,l)},s=function(t,l){this.el=t;var s=l||i;for(var e in s.customTemplates){o[e]=s.customTemplates[e]};this.toolbar=this.createToolbar(t,s);this.editor=this.createEditor(l);window.editor=this.editor;a("iframe.wysihtml5-sandbox").each(function(t,l){a(l.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){a("li.dropdown").removeClass("open")}})})};s.prototype={constructor:s,createEditor:function(l){l=l||{};l=a.extend(!0,{},l);l.toolbar=this.toolbar[0];var s=new t.Editor(this.el[0],l);if(l&&l.events){for(var i in l.events){s.on(i,l.events[i])}};return s},createToolbar:function(t,l){var d=this,o=a("<ul/>",{"class":"wysihtml5-toolbar","style":"display:none"});var m=l.locale||i.locale||"en";for(var s in i){var r=!1;if(l[s]!==undefined){if(l[s]===!0){r=!0}}
else{r=i[s]};if(r===!0){o.append(n(s,e[m],l));if(s==="html"){this.initHtml(o)};if(s==="link"){this.initInsertLink(o)};if(s==="image"){this.initInsertImage(o)}}};if(l.toolbar){for(s in l.toolbar){o.append(l.toolbar[s])}};o.find("a[data-wysihtml5-command='formatBlock']").click(function(t){var l=t.target||t.srcElement,i=a(l);d.toolbar.find(".current-font").text(i.html())});o.find("a[data-wysihtml5-command='foreColor']").click(function(t){var l=t.target||t.srcElement,i=a(l);d.toolbar.find(".current-color").text(i.html())});this.el.before(o);return o},initHtml:function(a){var t="a[data-wysihtml5-action='change_view']";a.find(t).click(function(l){a.find("a.btn").not(t).toggleClass("disabled")})},initInsertImage:function(t){var i=this,l=t.find(".bootstrap-wysihtml5-insert-image-modal"),s=l.find(".bootstrap-wysihtml5-insert-image-url"),n=l.find("a.btn-primary"),r=s.val(),o,e=function(){var a=s.val();s.val(r);i.editor.currentView.element.focus();if(o){i.editor.composer.selection.setBookmark(o);o=null};i.editor.composer.commands.exec("insertImage",a)};s.keypress(function(a){if(a.which==13){e();l.modal("hide")}});n.click(e);l.on("shown",function(){s.focus()});l.on("hide",function(){i.editor.currentView.element.focus()});t.find("a[data-wysihtml5-command=insertImage]").click(function(){var t=a(this).hasClass("wysihtml5-command-active");if(!t){i.editor.currentView.element.focus(!1);o=i.editor.composer.selection.getBookmark();l.appendTo("body").modal("show");l.on("click.dismiss.modal","[data-dismiss=\"modal\"]",function(a){a.stopPropagation()});return!1}
else{return!0}})},initInsertLink:function(t){var i=this,l=t.find(".bootstrap-wysihtml5-insert-link-modal"),s=l.find(".bootstrap-wysihtml5-insert-link-url"),n=l.find(".bootstrap-wysihtml5-insert-link-target"),r=l.find("a.btn-primary"),d=s.val(),o,e=function(){var t=s.val();s.val(d);i.editor.currentView.element.focus();if(o){i.editor.composer.selection.setBookmark(o);o=null};var a=n.prop("checked");i.editor.composer.commands.exec("createLink",{"href":t,"target":(a?"_blank":"_self"),"rel":(a?"nofollow":"")})},m=!1;s.keypress(function(a){if(a.which==13){e();l.modal("hide")}});r.click(e);l.on("shown",function(){s.focus()});l.on("hide",function(){i.editor.currentView.element.focus()});t.find("a[data-wysihtml5-command=createLink]").click(function(){var t=a(this).hasClass("wysihtml5-command-active");if(!t){i.editor.currentView.element.focus(!1);o=i.editor.composer.selection.getBookmark();l.appendTo("body").modal("show");Metronic.initUniform();l.on("click.dismiss.modal","[data-dismiss=\"modal\"]",function(a){a.stopPropagation()});return!1}
else{return!0}})}};var l={resetDefaults:function(){a.fn.wysihtml5.defaultOptions=a.extend(!0,{},a.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(t){return this.each(function(){var l=a(this);l.data("wysihtml5",new s(l,t))})},shallowExtend:function(t){var s=a.extend({},a.fn.wysihtml5.defaultOptions,t||{},a(this).data());var i=this;return l.bypassDefaults.apply(i,[s])},deepExtend:function(t){var s=a.extend(!0,{},a.fn.wysihtml5.defaultOptions,t||{});var i=this;return l.bypassDefaults.apply(i,[s])},init:function(a){var t=this;return l.shallowExtend.apply(t,[a])}};a.fn.wysihtml5=function(t){if(l[t]){return l[t].apply(this,Array.prototype.slice.call(arguments,1))}
else if(typeof t==="object"||!t){return l.init.apply(this,arguments)}
else{a.error("Method "+t+" does not exist on jQuery.wysihtml5")}};a.fn.wysihtml5.Constructor=s;var i=a.fn.wysihtml5.defaultOptions={"font-styles":!0,"color":!1,"emphasis":!0,"lists":!0,"html":!0,"link":!0,"image":!0,events:{},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{"b":{},"i":{},"br":{},"ol":{},"ul":{},"li":{},"h1":{},"h2":{},"h3":{},"h4":{},"h5":{},"h6":{},"blockquote":{},"u":1,"img":{"check_attributes":{"width":"numbers","alt":"alt","src":"url","height":"numbers"}},"a":{check_attributes:{"href":"url","target":"alt","rel":"alt"}},"span":1,"div":1,"code":1,"pre":1}},stylesheets:["wysiwyg-color.css"],locale:"en"};if(typeof a.fn.wysihtml5.defaultOptionsCache==="undefined"){a.fn.wysihtml5.defaultOptionsCache=a.extend(!0,{},a.fn.wysihtml5.defaultOptions)};var e=a.fn.wysihtml5.locale={en:{font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel",target:"Open link in new window"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}}(window.jQuery,window.wysihtml5);
/*! jQuery UI - v1.11.1 - 2014-09-17
* http://jqueryui.com
* Includes: widget.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
(function(t){if(typeof define==="function"&&define.amd){define(["jquery"],t)}
else{t(jQuery)}}(function(t){
/*!
 * jQuery UI Widget 1.11.1
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
;var i=0,e=Array.prototype.slice;t.cleanData=(function(e){return function(i){var n,s,o;for(o=0;(s=i[o])!=null;o++){try{n=t._data(s,"events");if(n&&n.remove){t(s).triggerHandler("remove")}}catch(r){}};e(i)}})(t.cleanData);t.widget=function(e,i,s){var u,o,n,a,d={},r=e.split(".")[0];e=e.split(".")[1];u=r+"-"+e;if(!s){s=i;i=t.Widget};t.expr[":"][u.toLowerCase()]=function(e){return!!t.data(e,u)};t[r]=t[r]||{};o=t[r][e];n=t[r][e]=function(t,e){if(!this._createWidget){return new n(t,e)};if(arguments.length){this._createWidget(t,e)}};t.extend(n,o,{version:s.version,_proto:t.extend({},s),_childConstructors:[]});a=new i();a.options=t.widget.extend({},a.options);t.each(s,function(e,n){if(!t.isFunction(n)){d[e]=n;return};d[e]=(function(){var t=function(){return i.prototype[e].apply(this,arguments)},s=function(t){return i.prototype[e].apply(this,t)};return function(){var i=this._super,o=this._superApply,e;this._super=t;this._superApply=s;e=n.apply(this,arguments);this._super=i;this._superApply=o;return e}})()});n.prototype=t.widget.extend(a,{widgetEventPrefix:o?(a.widgetEventPrefix||e):e},d,{constructor:n,namespace:r,widgetName:e,widgetFullName:u});if(o){t.each(o._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,n,i._proto)});delete o._childConstructors}
else{i._childConstructors.push(n)};t.widget.bridge(e,n);return n};t.widget.extend=function(i){var r=e.call(arguments,1),o=0,a=r.length,n,s;for(;o<a;o++){for(n in r[o]){s=r[o][n];if(r[o].hasOwnProperty(n)&&s!==undefined){if(t.isPlainObject(s)){i[n]=t.isPlainObject(i[n])?t.widget.extend({},i[n],s):t.widget.extend({},s)}
else{i[n]=s}}}};return i};t.widget.bridge=function(i,n){var s=n.prototype.widgetFullName||i;t.fn[i]=function(o){var u=typeof o==="string",a=e.call(arguments,1),r=this;o=!u&&a.length?t.widget.extend.apply(null,[o].concat(a)):o;if(u){this.each(function(){var e,n=t.data(this,s);if(o==="instance"){r=n;return!1};if(!n){return t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")};if(!t.isFunction(n[o])||o.charAt(0)==="_"){return t.error("no such method '"+o+"' for "+i+" widget instance")};e=n[o].apply(n,a);if(e!==n&&e!==undefined){r=e&&e.jquery?r.pushStack(e.get()):e;return!1}})}
else{this.each(function(){var e=t.data(this,s);if(e){e.option(o||{});if(e._init){e._init()}}
else{t.data(this,s,new n(o,this))}})};return r}};t.Widget=function(){};t.Widget._childConstructors=[];t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0];this.element=t(n);this.uuid=i++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=t.widget.extend({},this.options,this._getCreateOptions(),e);this.bindings=t();this.hoverable=t();this.focusable=t();if(n!==this){t.data(n,this.widgetFullName,this);this._on(!0,this.element,{remove:function(t){if(t.target===n){this.destroy()}}});this.document=t(n.style?n.ownerDocument:n.document||n);this.window=t(this.document[0].defaultView||this.document[0].parentWindow)};this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var r=e,n,s,o;if(arguments.length===0){return t.widget.extend({},this.options)};if(typeof e==="string"){r={};n=e.split(".");e=n.shift();if(n.length){s=r[e]=t.widget.extend({},this.options[e]);for(o=0;o<n.length-1;o++){s[n[o]]=s[n[o]]||{};s=s[n[o]]};e=n.pop();if(arguments.length===1){return s[e]===undefined?null:s[e]};s[e]=i}
else{if(arguments.length===1){return this.options[e]===undefined?null:this.options[e]};r[e]=i}};this._setOptions(r);return this},_setOptions:function(t){var e;for(e in t){this._setOption(e,t[e])};return this},_setOption:function(t,e){this.options[t]=e;if(t==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled",!!e);if(e){this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}};return this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,n){var o,s=this;if(typeof e!=="boolean"){n=i;i=e;e=!1};if(!n){n=i;i=this.element;o=this.widget()}
else{i=o=t(i);this.bindings=this.bindings.add(i)};t.each(n,function(n,r){function a(){if(!e&&(s.options.disabled===!0||t(this).hasClass("ui-state-disabled"))){return};return(typeof r==="string"?s[r]:r).apply(s,arguments)};if(typeof r!=="string"){a.guid=r.guid=r.guid||a.guid||t.guid++};var u=n.match(/^([\w:-]*)\s*(.*)$/),d=u[1]+s.eventNamespace,f=u[2];if(f){o.delegate(f,d,a)}
else{i.bind(d,a)}})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return(typeof t==="string"?i[t]:t).apply(i,arguments)};var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e);this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e);this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,o,r=this.options[e];n=n||{};i=t.Event(i);i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();i.target=this.element[0];o=i.originalEvent;if(o){for(s in o){if(!(s in i)){i[s]=o[s]}}};this.element.trigger(i,n);return!(t.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}};t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){if(typeof s==="string"){s={effect:s}};var a,r=!s?e:s===!0||typeof s==="number"?i:s.effect||i;s=s||{};if(typeof s==="number"){s={duration:s}};a=!t.isEmptyObject(s);s.complete=o;if(s.delay){n.delay(s.delay)};if(a&&t.effects&&t.effects.effect[r]){n[e](s)}
else if(r!==e&&n[r]){n[r](s.duration,s.easing,o)}
else{n.queue(function(i){t(this)[e]();if(o){o.call(n[0])};i()})}}});var n=t.widget}));
!function(e){"use strict";var n=function(e,t){var r=/[^\w\-\.:]/.test(e)?new Function(n.arg+",tmpl","var _e=tmpl.encode"+n.helper+",_s='"+e.replace(n.regexp,n.func)+"';return _s;"):n.cache[e]=n.cache[e]||n(n.load(e));return t?r(t,n):function(e){return r(e,n)}};n.cache={},n.load=function(n){return document.getElementById(n).innerHTML},n.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,n.func=function(n,e,r,t,c,u){return e?{"\n":"\\n","\r":"\\r","	":"\\t"," ":" "}[e]||"\\"+e:r?"="===r?"'+_e("+t+")+'":"'+("+t+"==null?'':"+t+")+'":c?"';":u?"_s+='":void 0},n.encReg=/[<>&"'\x00]/g,n.encMap={"<":"&lt;",">":"&gt;","&":"&amp;","\"":"&quot;","'":"&#39;"},n.encode=function(e){return(null==e?"":""+e).replace(n.encReg,function(e){return n.encMap[e]||""})},n.arg="o",n.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return n}):e.tmpl=n}(this);
!function(e){'use strict';var t=function(e,i,a){var r,o,n=document.createElement('img');if(n.onerror=i,n.onload=function(){!o||a&&a.noRevoke||t.revokeObjectURL(o),i&&i(t.scale(n,a))},t.isInstanceOf('Blob',e)||t.isInstanceOf('File',e))r=o=t.createObjectURL(e),n._type=e.type;else{if('string'!=typeof e)return!1;r=e,a&&a.crossOrigin&&(n.crossOrigin=a.crossOrigin)};return r?(n.src=r,n):t.readFile(e,function(e){var t=e.target;t&&t.result?n.src=t.result:i&&i(e)})},i=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==='[object '+e+']'},t.transformCoordinates=function(){},t.getTransformedOptions=function(e){return e},t.renderImageToCanvas=function(e,t,i,a,n,r,o,s,d,l){return e.getContext('2d').drawImage(t,i,a,n,r,o,s,d,l),e},t.hasCanvasOption=function(e){return e.canvas||e.crop},t.scale=function(e,i){i=i||{};var r,o,g,f,s,d,l,c,p,u=document.createElement('canvas'),S=e.getContext||t.hasCanvasOption(i)&&u.getContext,h=e.naturalWidth||e.width,m=e.naturalHeight||e.height,a=h,n=m,b=function(){var e=Math.max((g||a)/a,(f||n)/n);e>1&&(a=Math.ceil(a*e),n=Math.ceil(n*e))},v=function(){var e=Math.min((r||a)/a,(o||n)/n);1>e&&(a=Math.ceil(a*e),n=Math.ceil(n*e))};return S&&(i=t.getTransformedOptions(i),l=i.left||0,c=i.top||0,i.sourceWidth?(s=i.sourceWidth,void 0!==i.right&&void 0===i.left&&(l=h-s-i.right)):s=h-l-(i.right||0),i.sourceHeight?(d=i.sourceHeight,void 0!==i.bottom&&void 0===i.top&&(c=m-d-i.bottom)):d=m-c-(i.bottom||0),a=s,n=d),r=i.maxWidth,o=i.maxHeight,g=i.minWidth,f=i.minHeight,S&&r&&o&&i.crop?(a=r,n=o,p=s/d-r/o,0>p?(d=o*s/r,void 0===i.top&&void 0===i.bottom&&(c=(m-d)/2)):p>0&&(s=r*d/o,void 0===i.left&&void 0===i.right&&(l=(h-s)/2))):((i.contain||i.cover)&&(g=r=r||g,f=o=o||f),i.cover?(v(),b()):(b(),v())),S?(u.width=a,u.height=n,t.transformCoordinates(u,i),t.renderImageToCanvas(u,e,l,c,s,d,0,0,a,n)):(e.width=a,e.height=n,e)},t.createObjectURL=function(e){return i?i.createObjectURL(e):!1},t.revokeObjectURL=function(e){return i?i.revokeObjectURL(e):!1},t.readFile=function(e,t,i){if(window.FileReader){var a=new FileReader;if(a.onload=a.onerror=t,i=i||'readAsDataURL',a[i])return a[i](e),a};return!1},'function'==typeof define&&define.amd?define(function(){return t}):e.loadImage=t}(this),function(e){'use strict';'function'==typeof define&&define.amd?define(['load-image'],e):e(window.loadImage)}(function(e){'use strict';if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var t=e.renderImageToCanvas;e.detectSubsampling=function(e){var t,i;return e.width*e.height>1048576?(t=document.createElement('canvas'),t.width=t.height=1,i=t.getContext('2d'),i.drawImage(e,-e.width+1,0),0===i.getImageData(0,0,1,1).data[3]):!1},e.detectVerticalSquash=function(e,t){var s,n,r,i,d,a=e.naturalHeight||e.height,o=document.createElement('canvas'),l=o.getContext('2d');for(t&&(a/=2),o.width=1,o.height=a,l.drawImage(e,0,0),s=l.getImageData(0,0,1,a).data,n=0,r=a,i=a;i>n;)d=s[4*(i-1)+3],0===d?r=i:n=i,i=r+n>>1;return i/a||1},e.renderImageToCanvas=function(i,a,n,s,r,d,u,g,l,c){if('image/jpeg'===a._type){var f,h,m,p,b=i.getContext('2d'),S=document.createElement('canvas'),o=1024,v=S.getContext('2d');if(S.width=o,S.height=o,b.save(),f=e.detectSubsampling(a),f&&(n/=2,s/=2,r/=2,d/=2),h=e.detectVerticalSquash(a,f),f||1!==h){for(s*=h,l=Math.ceil(o*l/r),c=Math.ceil(o*c/d/h),g=0,p=0;d>p;){for(u=0,m=0;r>m;)v.clearRect(0,0,o,o),v.drawImage(a,n,s,r,d,-m,-p,r,d),b.drawImage(S,0,0,o,o,u,g,l,c),m+=o,u+=l;p+=o,g+=c};return b.restore(),i}};return t(i,a,n,s,r,d,u,g,l,c)}}}),function(e){'use strict';'function'==typeof define&&define.amd?define(['load-image'],e):e(window.loadImage)}(function(e){'use strict';var t=e.hasCanvasOption;e.hasCanvasOption=function(e){return t(e)||e.orientation},e.transformCoordinates=function(e,t){var i=e.getContext('2d'),a=e.width,n=e.height,r=t.orientation;if(r)switch(r>4&&(e.width=n,e.height=a),r){case 2:i.translate(a,0),i.scale(-1,1);break;case 3:i.translate(a,n),i.rotate(Math.PI);break;case 4:i.translate(0,n),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-n);break;case 7:i.rotate(.5*Math.PI),i.translate(a,-n),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-a,0)}},e.getTransformedOptions=function(e){if(!e.orientation||1===e.orientation)return e;var i,t={};for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);switch(e.orientation){case 2:t.left=e.right,t.right=e.left;break;case 3:t.left=e.right,t.top=e.bottom,t.right=e.left,t.bottom=e.top;break;case 4:t.top=e.bottom,t.bottom=e.top;break;case 5:t.left=e.top,t.top=e.left,t.right=e.bottom,t.bottom=e.right;break;case 6:t.left=e.top,t.top=e.right,t.right=e.bottom,t.bottom=e.left;break;case 7:t.left=e.bottom,t.top=e.right,t.right=e.top,t.bottom=e.left;break;case 8:t.left=e.bottom,t.top=e.left,t.right=e.top,t.bottom=e.right};return e.orientation>4&&(t.maxWidth=e.maxHeight,t.maxHeight=e.maxWidth,t.minWidth=e.minHeight,t.minHeight=e.minWidth,t.sourceWidth=e.sourceHeight,t.sourceHeight=e.sourceWidth),t}}),function(e){'use strict';'function'==typeof define&&define.amd?define(['load-image'],e):e(window.loadImage)}(function(e){'use strict';var t=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,i,a){a=a||{};var r=this,o=a.maxMetaDataSize||262144,n={},s=!(window.DataView&&t&&t.size>=12&&'image/jpeg'===t.type&&e.blobSlice);(s||!e.readFile(e.blobSlice.call(t,0,o),function(t){var d,l,f,c,u=t.target.result,s=new DataView(u),o=2,h=s.byteLength-4,g=o;if(65496===s.getUint16(0)){for(;h>o&&(d=s.getUint16(o),d>=65504&&65519>=d||65534===d);){if(l=s.getUint16(o+2)+2,o+l>s.byteLength){console.log('Invalid meta data: Invalid segment size.');break};if(f=e.metaDataParsers.jpeg[d])for(c=0;c<f.length;c+=1)f[c].call(r,s,o,l,n,a);o+=l,g=o};!a.disableImageHead&&g>6&&(n.imageHead=u.slice?u.slice(0,g):new Uint8Array(u).subarray(0,g))}
else console.log('Invalid JPEG file: Missing JPEG marker.');i(n)},'readAsArrayBuffer'))&&i(n)}}),function(e){'use strict';'function'==typeof define&&define.amd?define(['load-image','load-image-meta'],e):e(window.loadImage)}(function(e){'use strict';e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(e,t,i){var n,a,r;if(!i||t+i>e.byteLength)return console.log('Invalid Exif data: Invalid thumbnail data.'),void 0;for(n=[],a=0;i>a;a+=1)r=e.getUint8(t+a),n.push((16>r?'0':'')+r.toString(16));return'data:image/jpeg,%'+n.join('%')},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,i){return e.getUint16(t,i)},size:2},4:{getValue:function(e,t,i){return e.getUint32(t,i)},size:4},5:{getValue:function(e,t,i){return e.getUint32(t,i)/e.getUint32(t+4,i)},size:8},9:{getValue:function(e,t,i){return e.getInt32(t,i)},size:4},10:{getValue:function(e,t,i){return e.getInt32(t,i)/e.getInt32(t+4,i)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,i,a,o,r,d){var u,c,l,n,g,f,s=e.exifTagTypes[o];if(!s)return console.log('Invalid Exif data: Invalid tag type.'),void 0;if(u=s.size*r,c=u>4?i+t.getUint32(a+8,d):a+8,c+u>t.byteLength)return console.log('Invalid Exif data: Invalid data offset.'),void 0;if(1===r)return s.getValue(t,c,d);for(l=[],n=0;r>n;n+=1)l[n]=s.getValue(t,c+n*s.size,d);if(s.ascii){for(g='',n=0;n<l.length&&(f=l[n],'\x00'!==f);n+=1)g+=f;return g};return l},e.parseExifTag=function(t,i,a,n,r){var o=t.getUint16(a,n);r.exif[o]=e.getExifValue(t,i,a,t.getUint16(a+2,n),t.getUint32(a+4,n),n)},e.parseExifTags=function(e,t,i,a,n){var o,s,r;if(i+6>e.byteLength)return console.log('Invalid Exif data: Invalid directory offset.'),void 0;if(o=e.getUint16(i,a),s=i+2+12*o,s+4>e.byteLength)return console.log('Invalid Exif data: Invalid directory size.'),void 0;for(r=0;o>r;r+=1)this.parseExifTag(e,t,i+2+12*r,a,n);return e.getUint32(s,a)},e.parseExifData=function(t,i,a,n,o){if(!o.disableExif){var s,d,l,r=i+10;if(1165519206===t.getUint32(i+4)){if(r+8>t.byteLength)return console.log('Invalid Exif data: Invalid segment size.'),void 0;if(0!==t.getUint16(i+8))return console.log('Invalid Exif data: Missing byte alignment offset.'),void 0;switch(t.getUint16(r)){case 18761:s=!0;break;case 19789:s=!1;break;default:return console.log('Invalid Exif data: Invalid byte alignment marker.'),void 0};if(42!==t.getUint16(r+2,s))return console.log('Invalid Exif data: Missing TIFF marker.'),void 0;d=t.getUint32(r+4,s),n.exif=new e.ExifMap,d=e.parseExifTags(t,r,r+d,s,n),d&&!o.disableExifThumbnail&&(l={exif:{}},d=e.parseExifTags(t,r,r+d,s,l),l.exif[513]&&(n.exif.Thumbnail=e.getExifThumbnail(t,r+l.exif[513],l.exif[514]))),n.exif[34665]&&!o.disableExifSub&&e.parseExifTags(t,r,r+n.exif[34665],s,n),n.exif[34853]&&!o.disableExifGps&&e.parseExifTags(t,r,r+n.exif[34853],s,n)}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)}),function(e){'use strict';'function'==typeof define&&define.amd?define(['load-image','load-image-exif'],e):e(window.loadImage)}(function(e){'use strict';e.ExifMap.prototype.tags={256:'ImageWidth',257:'ImageHeight',34665:'ExifIFDPointer',34853:'GPSInfoIFDPointer',40965:'InteroperabilityIFDPointer',258:'BitsPerSample',259:'Compression',262:'PhotometricInterpretation',274:'Orientation',277:'SamplesPerPixel',284:'PlanarConfiguration',530:'YCbCrSubSampling',531:'YCbCrPositioning',282:'XResolution',283:'YResolution',296:'ResolutionUnit',273:'StripOffsets',278:'RowsPerStrip',279:'StripByteCounts',513:'JPEGInterchangeFormat',514:'JPEGInterchangeFormatLength',301:'TransferFunction',318:'WhitePoint',319:'PrimaryChromaticities',529:'YCbCrCoefficients',532:'ReferenceBlackWhite',306:'DateTime',270:'ImageDescription',271:'Make',272:'Model',305:'Software',315:'Artist',33432:'Copyright',36864:'ExifVersion',40960:'FlashpixVersion',40961:'ColorSpace',40962:'PixelXDimension',40963:'PixelYDimension',42240:'Gamma',37121:'ComponentsConfiguration',37122:'CompressedBitsPerPixel',37500:'MakerNote',37510:'UserComment',40964:'RelatedSoundFile',36867:'DateTimeOriginal',36868:'DateTimeDigitized',37520:'SubSecTime',37521:'SubSecTimeOriginal',37522:'SubSecTimeDigitized',33434:'ExposureTime',33437:'FNumber',34850:'ExposureProgram',34852:'SpectralSensitivity',34855:'PhotographicSensitivity',34856:'OECF',34864:'SensitivityType',34865:'StandardOutputSensitivity',34866:'RecommendedExposureIndex',34867:'ISOSpeed',34868:'ISOSpeedLatitudeyyy',34869:'ISOSpeedLatitudezzz',37377:'ShutterSpeedValue',37378:'ApertureValue',37379:'BrightnessValue',37380:'ExposureBias',37381:'MaxApertureValue',37382:'SubjectDistance',37383:'MeteringMode',37384:'LightSource',37385:'Flash',37396:'SubjectArea',37386:'FocalLength',41483:'FlashEnergy',41484:'SpatialFrequencyResponse',41486:'FocalPlaneXResolution',41487:'FocalPlaneYResolution',41488:'FocalPlaneResolutionUnit',41492:'SubjectLocation',41493:'ExposureIndex',41495:'SensingMethod',41728:'FileSource',41729:'SceneType',41730:'CFAPattern',41985:'CustomRendered',41986:'ExposureMode',41987:'WhiteBalance',41988:'DigitalZoomRatio',41989:'FocalLengthIn35mmFilm',41990:'SceneCaptureType',41991:'GainControl',41992:'Contrast',41993:'Saturation',41994:'Sharpness',41995:'DeviceSettingDescription',41996:'SubjectDistanceRange',42016:'ImageUniqueID',42032:'CameraOwnerName',42033:'BodySerialNumber',42034:'LensSpecification',42035:'LensMake',42036:'LensModel',42037:'LensSerialNumber',0:'GPSVersionID',1:'GPSLatitudeRef',2:'GPSLatitude',3:'GPSLongitudeRef',4:'GPSLongitude',5:'GPSAltitudeRef',6:'GPSAltitude',7:'GPSTimeStamp',8:'GPSSatellites',9:'GPSStatus',10:'GPSMeasureMode',11:'GPSDOP',12:'GPSSpeedRef',13:'GPSSpeed',14:'GPSTrackRef',15:'GPSTrack',16:'GPSImgDirectionRef',17:'GPSImgDirection',18:'GPSMapDatum',19:'GPSDestLatitudeRef',20:'GPSDestLatitude',21:'GPSDestLongitudeRef',22:'GPSDestLongitude',23:'GPSDestBearingRef',24:'GPSDestBearing',25:'GPSDestDistanceRef',26:'GPSDestDistance',27:'GPSProcessingMethod',28:'GPSAreaInformation',29:'GPSDateStamp',30:'GPSDifferential',31:'GPSHPositioningError'},e.ExifMap.prototype.stringValues={ExposureProgram:{0:'Undefined',1:'Manual',2:'Normal program',3:'Aperture priority',4:'Shutter priority',5:'Creative program',6:'Action program',7:'Portrait mode',8:'Landscape mode'},MeteringMode:{0:'Unknown',1:'Average',2:'CenterWeightedAverage',3:'Spot',4:'MultiSpot',5:'Pattern',6:'Partial',255:'Other'},LightSource:{0:'Unknown',1:'Daylight',2:'Fluorescent',3:'Tungsten (incandescent light)',4:'Flash',9:'Fine weather',10:'Cloudy weather',11:'Shade',12:'Daylight fluorescent (D 5700 - 7100K)',13:'Day white fluorescent (N 4600 - 5400K)',14:'Cool white fluorescent (W 3900 - 4500K)',15:'White fluorescent (WW 3200 - 3700K)',17:'Standard light A',18:'Standard light B',19:'Standard light C',20:'D55',21:'D65',22:'D75',23:'D50',24:'ISO studio tungsten',255:'Other'},Flash:{0:'Flash did not fire',1:'Flash fired',5:'Strobe return light not detected',7:'Strobe return light detected',9:'Flash fired, compulsory flash mode',13:'Flash fired, compulsory flash mode, return light not detected',15:'Flash fired, compulsory flash mode, return light detected',16:'Flash did not fire, compulsory flash mode',24:'Flash did not fire, auto mode',25:'Flash fired, auto mode',29:'Flash fired, auto mode, return light not detected',31:'Flash fired, auto mode, return light detected',32:'No flash function',65:'Flash fired, red-eye reduction mode',69:'Flash fired, red-eye reduction mode, return light not detected',71:'Flash fired, red-eye reduction mode, return light detected',73:'Flash fired, compulsory flash mode, red-eye reduction mode',77:'Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected',79:'Flash fired, compulsory flash mode, red-eye reduction mode, return light detected',89:'Flash fired, auto mode, red-eye reduction mode',93:'Flash fired, auto mode, return light not detected, red-eye reduction mode',95:'Flash fired, auto mode, return light detected, red-eye reduction mode'},SensingMethod:{1:'Undefined',2:'One-chip color area sensor',3:'Two-chip color area sensor',4:'Three-chip color area sensor',5:'Color sequential area sensor',7:'Trilinear sensor',8:'Color sequential linear sensor'},SceneCaptureType:{0:'Standard',1:'Landscape',2:'Portrait',3:'Night scene'},SceneType:{1:'Directly photographed'},CustomRendered:{0:'Normal process',1:'Custom process'},WhiteBalance:{0:'Auto white balance',1:'Manual white balance'},GainControl:{0:'None',1:'Low gain up',2:'High gain up',3:'Low gain down',4:'High gain down'},Contrast:{0:'Normal',1:'Soft',2:'Hard'},Saturation:{0:'Normal',1:'Low saturation',2:'High saturation'},Sharpness:{0:'Normal',1:'Soft',2:'Hard'},SubjectDistanceRange:{0:'Unknown',1:'Macro',2:'Close view',3:'Distant view'},FileSource:{3:'DSC'},ComponentsConfiguration:{0:'',1:'Y',2:'Cb',3:'Cr',4:'R',5:'G',6:'B'},Orientation:{1:'top-left',2:'top-right',3:'bottom-right',4:'bottom-left',5:'left-top',6:'right-top',7:'right-bottom',8:'left-bottom'}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case'LightSource':case'Flash':case'MeteringMode':case'ExposureProgram':case'SensingMethod':case'SceneCaptureType':case'SceneType':case'CustomRendered':case'WhiteBalance':case'GainControl':case'Contrast':case'Saturation':case'Sharpness':case'SubjectDistanceRange':case'FileSource':case'Orientation':return this.stringValues[e][t];case'ExifVersion':case'FlashpixVersion':return String.fromCharCode(t[0],t[1],t[2],t[3]);case'ComponentsConfiguration':return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case'GPSVersionID':return t[0]+'.'+t[1]+'.'+t[2]+'.'+t[3]};return String(t)},function(e){var t,i=e.tags,a=e.map;for(t in i)i.hasOwnProperty(t)&&(a[i[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var t,e,i={};for(t in this)this.hasOwnProperty(t)&&(e=this.tags[t],e&&(i[e]=this.getText(e)));return i}});
!function(t){'use strict';var e=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,o=t.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),i=o&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),r=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,n=(o||r)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(t){var n,a,l,e,u,B;for(n=t.split(',')[0].indexOf('base64')>=0?atob(t.split(',')[1]):decodeURIComponent(t.split(',')[1]),a=new ArrayBuffer(n.length),l=new Uint8Array(a),e=0;e<n.length;e+=1)l[e]=n.charCodeAt(e);return u=t.split(',')[0].split(':')[1].split(';')[0],o?new Blob([i?l:a],{type:u}):(B=new r,B.append(a),B.getBlob(u))};t.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(t,o,r){r&&e.toDataURL&&n?t(n(this.toDataURL(o,r))):t(this.mozGetAsFile('blob',o))}:e.toDataURL&&n&&(e.toBlob=function(t,e,o){t(n(this.toDataURL(e,o)))})),'function'==typeof define&&define.amd?define(function(){return n}):t.dataURLtoBlob=n}(this);
!function(t){'use strict';'function'==typeof define&&define.amd?define(['./blueimp-helper'],t):(window.blueimp=window.blueimp||{},window.blueimp.Gallery=t(window.blueimp.helper||window.jQuery))}(function(t){'use strict';function e(t,i){return t&&t.length&&void 0!==document.body.style.maxHeight?this&&this.options===e.prototype.options?(this.list=t,this.num=t.length,this.initOptions(i),this.initialize(),void 0):new e(t,i):null};return t.extend(e.prototype,{options:{container:'#blueimp-gallery',slidesContainer:'div',titleElement:'h3',displayClass:'blueimp-gallery-display',controlsClass:'blueimp-gallery-controls',singleClass:'blueimp-gallery-single',leftEdgeClass:'blueimp-gallery-left',rightEdgeClass:'blueimp-gallery-right',playingClass:'blueimp-gallery-playing',slideClass:'slide',slideLoadingClass:'slide-loading',slideErrorClass:'slide-error',slideContentClass:'slide-content',toggleClass:'toggle',prevClass:'prev',nextClass:'next',closeClass:'close',playPauseClass:'play-pause',typeProperty:'type',titleProperty:'title',urlProperty:'href',displayTransition:!0,clearSlides:!0,stretchImages:!1,toggleControlsOnReturn:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,emulateTouchEvents:!0,hidePageScrollbars:!0,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5e3,index:0,preloadRange:2,transitionSpeed:400,slideshowTransitionSpeed:void 0,event:void 0,onopen:void 0,onopened:void 0,onslide:void 0,onslideend:void 0,onslidecomplete:void 0,onclose:void 0,onclosed:void 0},carouselOptions:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,startSlideshow:!0},support:function(e){var i={touch:void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch},n={webkitTransition:{end:'webkitTransitionEnd',prefix:'-webkit-'},MozTransition:{end:'transitionend',prefix:'-moz-'},OTransition:{end:'otransitionend',prefix:'-o-'},transition:{end:'transitionend',prefix:''}},s=function(){var t,n,s=i.transition;document.body.appendChild(e),s&&(t=s.name.slice(0,-9)+'ransform',void 0!==e.style[t]&&(e.style[t]='translateZ(0)',n=window.getComputedStyle(e).getPropertyValue(s.prefix+'transform'),i.transform={prefix:s.prefix,name:t,translate:!0,translateZ:!!n&&'none'!==n})),void 0!==e.style.backgroundSize&&(i.backgroundSize={},e.style.backgroundSize='contain',i.backgroundSize.contain='contain'===window.getComputedStyle(e).getPropertyValue('background-size'),e.style.backgroundSize='cover',i.backgroundSize.cover='cover'===window.getComputedStyle(e).getPropertyValue('background-size')),document.body.removeChild(e)};return function(t,i){var s;for(s in i)if(i.hasOwnProperty(s)&&void 0!==e.style[s]){t.transition=i[s],t.transition.name=s;break}}(i,n),document.body?s():t(document).on('DOMContentLoaded',s),i}(document.createElement('div')),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,initialize:function(){return this.initStartIndex(),this.initWidget()===!1?!1:(this.initEventListeners(),this.onslide(this.index),this.ontransitionend(),this.options.startSlideshow&&this.play(),void 0)},slide:function(t,e){window.clearTimeout(this.timeout);var i,o,n,s=this.index;if(s!==t&&1!==this.num){if(e||(e=this.options.transitionSpeed),this.support.transition){for(this.options.continuous||(t=this.circle(t)),i=Math.abs(s-t)/(s-t),this.options.continuous&&(o=i,i=-this.positions[this.circle(t)]/this.slideWidth,i!==o&&(t=-i*this.num+t)),n=Math.abs(s-t)-1;n;)n-=1,this.move(this.circle((t>s?t:s)-n-1),this.slideWidth*i,0);t=this.circle(t),this.move(s,this.slideWidth*i,e),this.move(t,0,e),this.options.continuous&&this.move(this.circle(t-i),-(this.slideWidth*i),0)}
else t=this.circle(t),this.animate(s*-this.slideWidth,t*-this.slideWidth,e);this.onslide(t)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(t){var e=this;window.clearTimeout(this.timeout),this.interval=t||this.options.slideshowInterval,this.elements[this.index]>1&&(this.timeout=this.setTimeout(!this.requestAnimationFrame&&this.slide||function(t,i){e.animationFrameId=e.requestAnimationFrame.call(window,function(){e.slide(t,i)})},[this.index+1,this.options.slideshowTransitionSpeed],this.interval)),this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout),this.interval=null,this.container.removeClass(this.options.playingClass)},add:function(t){var e;for(t.concat||(t=Array.prototype.slice.call(t)),this.list.concat||(this.list=Array.prototype.slice.call(this.list)),this.list=this.list.concat(t),this.num=this.list.length,this.num>2&&null===this.options.continuous&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),e=this.num-t.length;e<this.num;e+=1)this.addSlide(e),this.positionSlide(e);this.positions.length=this.num,this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty(),this.slides=[]},handleClose:function(){var t=this.options;this.destroyEventListeners(),this.pause(),this.container[0].style.display='none',this.container.removeClass(t.displayClass).removeClass(t.singleClass).removeClass(t.leftEdgeClass).removeClass(t.rightEdgeClass),t.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle),this.options.clearSlides&&this.resetSlides(),this.options.onclosed&&this.options.onclosed.call(this)},close:function(){var t=this,e=function(i){i.target===t.container[0]&&(t.container.off(t.support.transition.end,e),t.handleClose())};this.options.onclose&&this.options.onclose.call(this),this.support.transition&&this.options.displayTransition?(this.container.on(this.support.transition.end,e),this.container.removeClass(this.options.displayClass)):this.handleClose()},circle:function(t){return(this.num+t%this.num)%this.num},move:function(t,e,i){this.translateX(t,e,i),this.positions[t]=e},translate:function(t,e,i,s){var n=this.slides[t].style,a=this.support.transition,o=this.support.transform;n[a.name+'Duration']=s+'ms',n[o.name]='translate('+e+'px, '+i+'px)'+(o.translateZ?' translateZ(0)':'')},translateX:function(t,e,i){this.translate(t,e,0,i)},translateY:function(t,e,i){this.translate(t,0,e,i)},animate:function(t,e,i){if(!i)return this.slidesContainer[0].style.left=e+'px',void 0;var s=this,n=(new Date).getTime(),o=window.setInterval(function(){var a=(new Date).getTime()-n;return a>i?(s.slidesContainer[0].style.left=e+'px',s.ontransitionend(),window.clearInterval(o),void 0):(s.slidesContainer[0].style.left=(e-t)*(Math.floor(a/i*100)/100)+t+'px',void 0)},4)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},onresize:function(){this.initSlides(!0)},onmousedown:function(t){t.which&&1===t.which&&'VIDEO'!==t.target.nodeName&&((t.originalEvent||t).touches=[{pageX:t.pageX,pageY:t.pageY}],this.ontouchstart(t))},onmousemove:function(t){this.touchStart&&((t.originalEvent||t).touches=[{pageX:t.pageX,pageY:t.pageY}],this.ontouchmove(t))},onmouseup:function(t){this.touchStart&&(this.ontouchend(t),delete this.touchStart)},onmouseout:function(e){if(this.touchStart){var s=e.target,i=e.relatedTarget;(!i||i!==s&&!t.contains(s,i))&&this.onmouseup(e)}},ontouchstart:function(t){var e=(t.originalEvent||t).touches[0];this.touchStart={x:e.pageX,y:e.pageY,time:Date.now()},this.isScrolling=void 0,this.touchDelta={}},ontouchmove:function(t){var i,s,n=(t.originalEvent||t).touches[0],o=(t.originalEvent||t).scale,e=this.index;if(!(n.length>1||o&&1!==o))if(this.options.disableScroll&&t.preventDefault(),this.touchDelta={x:n.pageX-this.touchStart.x,y:n.pageY-this.touchStart.y},i=this.touchDelta.x,void 0===this.isScrolling&&(this.isScrolling=this.isScrolling||Math.abs(i)<Math.abs(this.touchDelta.y)),this.isScrolling)this.options.closeOnSwipeUpOrDown&&this.translateY(e,this.touchDelta.y+this.positions[e],0);else for(t.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?s=[this.circle(e+1),e,this.circle(e-1)]:(this.touchDelta.x=i/=!e&&i>0||e===this.num-1&&0>i?Math.abs(i)/this.slideWidth+1:1,s=[e],e&&s.push(e-1),e<this.num-1&&s.unshift(e+1));s.length;)e=s.pop(),this.translateX(e,i+this.positions[e],0)},ontouchend:function(){var s,n,a,o,l,t=this.index,e=this.options.transitionSpeed,i=this.slideWidth,r=Number(Date.now()-this.touchStart.time)<250,h=r&&Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.x)>i/2,d=!t&&this.touchDelta.x>0||t===this.num-1&&this.touchDelta.x<0,c=!h&&this.options.closeOnSwipeUpOrDown&&(r&&Math.abs(this.touchDelta.y)>20||Math.abs(this.touchDelta.y)>this.slideHeight/2);this.options.continuous&&(d=!1),s=this.touchDelta.x<0?-1:1,this.isScrolling?c?this.close():this.translateY(t,0,e):h&&!d?(n=t+s,a=t-s,o=i*s,l=-i*s,this.options.continuous?(this.move(this.circle(n),o,0),this.move(this.circle(t-2*s),l,0)):n>=0&&n<this.num&&this.move(n,o,0),this.move(t,this.positions[t]+o,e),this.move(this.circle(a),this.positions[this.circle(a)]+o,e),t=this.circle(a),this.onslide(t)):this.options.continuous?(this.move(this.circle(t-1),-i,e),this.move(t,0,e),this.move(this.circle(t+1),i,e)):(t&&this.move(t-1,-i,e),this.move(t,0,e),t<this.num-1&&this.move(t+1,i,e))},ontransitionend:function(t){var e=this.slides[this.index];t&&e!==t.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,e]))},oncomplete:function(e){var n,s=e.target||e.srcElement,i=s&&s.parentNode;s&&i&&(n=this.getNodeIndex(i),t(i).removeClass(this.options.slideLoadingClass),'error'===e.type?(t(i).addClass(this.options.slideErrorClass),this.elements[n]=3):this.elements[n]=2,s.clientHeight>this.container[0].clientHeight&&(s.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===i&&this.play(),this.setTimeout(this.options.onslidecomplete,[n,i]))},onload:function(t){this.oncomplete(t)},onerror:function(t){this.oncomplete(t)},onkeydown:function(t){switch(t.which||t.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(t),this.toggleControls());break;case 27:this.options.closeOnEscape&&this.close();break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(t),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(t),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(t),this.next())}},handleClick:function(e){var i=this.options,o=e.target||e.srcElement,n=o.parentNode,s=function(e){return t(o).hasClass(e)||t(n).hasClass(e)};s(i.toggleClass)?(this.preventDefault(e),this.toggleControls()):s(i.prevClass)?(this.preventDefault(e),this.prev()):s(i.nextClass)?(this.preventDefault(e),this.next()):s(i.closeClass)?(this.preventDefault(e),this.close()):s(i.playPauseClass)?(this.preventDefault(e),this.toggleSlideshow()):n===this.slidesContainer[0]?(this.preventDefault(e),i.closeOnSlideClick?this.close():this.toggleControls()):n.parentNode&&n.parentNode===this.slidesContainer[0]&&(this.preventDefault(e),this.toggleControls())},onclick:function(t){return this.options.emulateTouchEvents&&this.touchDelta&&(Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.y)>20)?(delete this.touchDelta,void 0):this.handleClick(t)},updateEdgeClasses:function(t){t?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass),t===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(t){this.options.continuous||this.updateEdgeClasses(t),this.loadElements(t),this.options.unloadElements&&this.unloadElements(t),this.setTitle(t)},onslide:function(t){this.index=t,this.handleSlide(t),this.setTimeout(this.options.onslide,[t,this.slides[t]])},setTitle:function(t){var e=this.slides[t].firstChild.title,i=this.titleElement;i.length&&(this.titleElement.empty(),e&&i[0].appendChild(document.createTextNode(e)))},setTimeout:function(t,e,i){var s=this;return t&&window.setTimeout(function(){t.apply(s,e||[])},i||0)},imageFactory:function(e,i){var h,s,l,d=this,o=this.imagePrototype.cloneNode(!1),a=e,n=this.options.stretchImages,r=function(e){if(!h){if(e={type:e.type,target:s},!s.parentNode)return d.setTimeout(r,[e]);h=!0,t(o).off('load error',r),n&&'load'===e.type&&(s.style.background='url("'+a+'") center no-repeat',s.style.backgroundSize=n),i(e)}};return'string'!=typeof a&&(a=this.getItemProperty(e,this.options.urlProperty),l=this.getItemProperty(e,this.options.titleProperty)),n===!0&&(n='contain'),n=this.support.backgroundSize&&this.support.backgroundSize[n]&&n,n?s=this.elementPrototype.cloneNode(!1):(s=o,o.draggable=!1),l&&(s.title=l),t(o).on('load error',r),o.src=a,s},createElement:function(e,i){var n=e&&this.getItemProperty(e,this.options.typeProperty),o=n&&this[n.split('/')[0]+'Factory']||this.imageFactory,s=e&&o.call(this,e,i);return s||(s=this.elementPrototype.cloneNode(!1),this.setTimeout(i,[{type:'error',target:s}])),t(s).addClass(this.options.slideContentClass),s},loadElement:function(e){this.elements[e]||(this.slides[e].firstChild?this.elements[e]=t(this.slides[e]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[e]=1,t(this.slides[e]).addClass(this.options.slideLoadingClass),this.slides[e].appendChild(this.createElement(this.list[e],this.proxyListener))))},loadElements:function(t){var e,s=Math.min(this.num,2*this.options.preloadRange+1),i=t;for(e=0;s>e;e+=1)i+=e*(e%2===0?-1:1),i=this.circle(i),this.loadElement(i)},unloadElements:function(t){var e,i,s;for(e in this.elements)this.elements.hasOwnProperty(e)&&(s=Math.abs(t-e),s>this.options.preloadRange&&s+this.options.preloadRange<this.num&&(i=this.slides[e],i.removeChild(i.firstChild),delete this.elements[e]))},addSlide:function(t){var e=this.slidePrototype.cloneNode(!1);e.setAttribute('data-index',t),this.slidesContainer[0].appendChild(e),this.slides.push(e)},positionSlide:function(t){var e=this.slides[t];e.style.width=this.slideWidth+'px',this.support.transition&&(e.style.left=t*-this.slideWidth+'px',this.move(t,this.index>t?-this.slideWidth:this.index<t?this.slideWidth:0,0))},initSlides:function(e){var s,i;for(e||(this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement('img'),this.elementPrototype=document.createElement('div'),this.slidePrototype=document.createElement('div'),t(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,s=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].offsetWidth,this.slideHeight=this.container[0].offsetHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+'px',s&&this.resetSlides(),i=0;i<this.num;i+=1)s&&this.addSlide(i),this.positionSlide(i);this.options.continuous&&this.support.transition&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0)),this.support.transition||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+'px')},toggleControls:function(){var t=this.options.controlsClass;this.container.hasClass(t)?this.container.removeClass(t):this.container.addClass(t)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(t){return parseInt(t.getAttribute('data-index'),10)},getNestedProperty:function(t,e){return e.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,function(e,i,s,n,o){var a=o||i||s||n&&parseInt(n,10);e&&t&&(t=t[a])}),t},getDataProperty:function(e,i){if(e.getAttribute){var s=e.getAttribute('data-'+i.replace(/([A-Z])/g,'-$1').toLowerCase());if('string'==typeof s){if(/^(true|false|null|-?\d+(\.\d+)?|\{[\s\S]*\}|\[[\s\S]*\])$/.test(s))try{return t.parseJSON(s)}catch(n){};return s}}},getItemProperty:function(t,e){var i=t[e];return void 0===i&&(i=this.getDataProperty(t,e),void 0===i&&(i=this.getNestedProperty(t,e))),i},initStartIndex:function(){var t,e=this.options.index,i=this.options.urlProperty;if(e&&'number'!=typeof e)for(t=0;t<this.num;t+=1)if(this.list[t]===e||this.getItemProperty(this.list[t],i)===this.getItemProperty(e,i)){e=t;break};this.index=this.circle(parseInt(e,10)||0)},initEventListeners:function(){var i=this,s=this.slidesContainer,e=function(t){var e=i.support.transition&&i.support.transition.end===t.type?'transitionend':t.type;i['on'+e](t)};t(window).on('resize',e),t(document.body).on('keydown',e),this.container.on('click',e),this.support.touch?s.on('touchstart touchmove touchend',e):this.options.emulateTouchEvents&&this.support.transition&&s.on('mousedown mousemove mouseup mouseout',e),this.support.transition&&s.on(this.support.transition.end,e),this.proxyListener=e},destroyEventListeners:function(){var i=this.slidesContainer,e=this.proxyListener;t(window).off('resize',e),t(document.body).off('keydown',e),this.container.off('click',e),this.support.touch?i.off('touchstart touchmove touchend',e):this.options.emulateTouchEvents&&this.support.transition&&i.off('mousedown mousemove mouseup mouseout',e),this.support.transition&&i.off(this.support.transition.end,e)},handleOpen:function(){this.options.onopened&&this.options.onopened.call(this)},initWidget:function(){var e=this,i=function(t){t.target===e.container[0]&&(e.container.off(e.support.transition.end,i),e.handleOpen())};return this.container=t(this.options.container),this.container.length?(this.slidesContainer=this.container.find(this.options.slidesContainer).first(),this.slidesContainer.length?(this.titleElement=this.container.find(this.options.titleElement).first(),1===this.num&&this.container.addClass(this.options.singleClass),this.options.onopen&&this.options.onopen.call(this),this.support.transition&&this.options.displayTransition?this.container.on(this.support.transition.end,i):this.handleOpen(),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow='hidden'),this.container[0].style.display='block',this.initSlides(),this.container.addClass(this.options.displayClass),void 0):!1):!1},initOptions:function(e){this.options=t.extend({},this.options),(e&&e.carousel||this.options.carousel&&(!e||e.carousel!==!1))&&t.extend(this.options,this.carouselOptions),t.extend(this.options,e),this.num<3&&(this.options.continuous=this.options.continuous?null:!1),this.support.transition||(this.options.emulateTouchEvents=!1),this.options.event&&this.preventDefault(this.options.event)}}),e}),function(t){'use strict';'function'==typeof define&&define.amd?define(['./blueimp-helper','./blueimp-gallery'],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){'use strict';t.extend(e.prototype.options,{fullScreen:!1});var i=e.prototype.initialize,s=e.prototype.handleClose;return t.extend(e.prototype,{getFullScreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement},requestFullScreen:function(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen&&t.mozRequestFullScreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen()},initialize:function(){i.call(this),this.options.fullScreen&&!this.getFullScreenElement()&&this.requestFullScreen(this.container[0])},handleClose:function(){this.getFullScreenElement()===this.container[0]&&this.exitFullScreen(),s.call(this)}}),e}),function(t){'use strict';'function'==typeof define&&define.amd?define(['./blueimp-helper','./blueimp-gallery'],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){'use strict';t.extend(e.prototype.options,{indicatorContainer:'ol',activeIndicatorClass:'active',thumbnailProperty:'thumbnail',thumbnailIndicators:!0});var i=e.prototype.initSlides,s=e.prototype.addSlide,n=e.prototype.resetSlides,o=e.prototype.handleClick,a=e.prototype.handleSlide,l=e.prototype.handleClose;return t.extend(e.prototype,{createIndicator:function(e){var i,s,n=this.indicatorPrototype.cloneNode(!1),o=this.getItemProperty(e,this.options.titleProperty),a=this.options.thumbnailProperty;return this.options.thumbnailIndicators&&(s=e.getElementsByTagName&&t(e).find('img')[0],s?i=s.src:a&&(i=this.getItemProperty(e,a)),i&&(n.style.backgroundImage='url("'+i+'")')),o&&(n.title=o),n},addIndicator:function(t){if(this.indicatorContainer.length){var e=this.createIndicator(this.list[t]);e.setAttribute('data-index',t),this.indicatorContainer[0].appendChild(e),this.indicators.push(e)}},setActiveIndicator:function(e){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=t(this.indicators[e]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(t){t||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement('li'),this.indicators=this.indicatorContainer[0].children)),i.call(this,t)},addSlide:function(t){s.call(this,t),this.addIndicator(t)},resetSlides:function(){n.call(this),this.indicatorContainer.empty(),this.indicators=[]},handleClick:function(t){var i=t.target||t.srcElement,e=i.parentNode;if(e===this.indicatorContainer[0])this.preventDefault(t),this.slide(this.getNodeIndex(i));else{if(e.parentNode!==this.indicatorContainer[0])return o.call(this,t);this.preventDefault(t),this.slide(this.getNodeIndex(e))}},handleSlide:function(t){a.call(this,t),this.setActiveIndicator(t)},handleClose:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),l.call(this)}}),e}),function(t){'use strict';'function'==typeof define&&define.amd?define(['./blueimp-helper','./blueimp-gallery'],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){'use strict';return t.extend(e.prototype.options,{videoContentClass:'video-content',videoLoadingClass:'video-loading',videoPlayingClass:'video-playing',videoPosterProperty:'poster',videoSourcesProperty:'sources'}),e.prototype.videoFactory=function(e,i,n){var d,y,r,u,m,s=this,a=this.options,l=this.elementPrototype.cloneNode(!1),p=t(l),C=[{type:'error',target:l}],o=n||document.createElement('video'),h=this.getItemProperty(e,a.urlProperty),c=this.getItemProperty(e,a.typeProperty),f=this.getItemProperty(e,a.titleProperty),g=this.getItemProperty(e,a.videoPosterProperty),v=this.getItemProperty(e,a.videoSourcesProperty);if(p.addClass(a.videoContentClass),f&&(l.title=f),o.canPlayType)if(h&&c&&o.canPlayType(c))o.src=h;else for(;v&&v.length;)if(y=v.shift(),h=this.getItemProperty(y,a.urlProperty),c=this.getItemProperty(y,a.typeProperty),h&&c&&o.canPlayType(c)){o.src=h;break};return g&&(o.poster=g,d=this.imagePrototype.cloneNode(!1),t(d).addClass(a.toggleClass),d.src=g,d.draggable=!1,l.appendChild(d)),r=document.createElement('a'),r.setAttribute('target','_blank'),n||r.setAttribute('download',f),r.href=h,o.src&&(o.controls=!0,(n||t(o)).on('error',function(){s.setTimeout(i,C)}).on('pause',function(){u=!1,p.removeClass(s.options.videoLoadingClass).removeClass(s.options.videoPlayingClass),m&&s.container.addClass(s.options.controlsClass),s.interval&&s.play()}).on('playing',function(){u=!1,p.removeClass(s.options.videoLoadingClass).addClass(s.options.videoPlayingClass),s.container.hasClass(s.options.controlsClass)?(m=!0,s.container.removeClass(s.options.controlsClass)):m=!1}).on('play',function(){window.clearTimeout(s.timeout),u=!0,p.addClass(s.options.videoLoadingClass)}),t(r).on('click',function(t){s.preventDefault(t),u?o.pause():o.play()}),l.appendChild(n&&n.element||o)),l.appendChild(r),this.setTimeout(i,[{type:'load',target:l}]),l},e}),function(t){'use strict';'function'==typeof define&&define.amd?define(['./blueimp-helper','./blueimp-gallery-video'],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){'use strict';if(!window.postMessage)return e;t.extend(e.prototype.options,{vimeoVideoIdProperty:'vimeo',vimeoPlayerUrl:'//player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID',vimeoPlayerIdPrefix:'vimeo-player-',vimeoClickToPlay:!0});var n=e.prototype.textFactory||e.prototype.imageFactory,i=function(t,e,i,s){this.url=t,this.videoId=e,this.playerId=i,this.clickToPlay=s,this.element=document.createElement('div'),this.listeners={}},s=0;return t.extend(i.prototype,{canPlayType:function(){return!0},on:function(t,e){return this.listeners[t]=e,this},loadAPI:function(){for(var e,n,o=this,a='//'+('https'===location.protocol?'secure-':'')+'a.vimeocdn.com/js/froogaloop2.min.js',i=document.getElementsByTagName('script'),s=i.length,l=function(){!n&&o.playOnReady&&o.play(),n=!0};s;)if(s-=1,i[s].src===a){e=i[s];break};e||(e=document.createElement('script'),e.src=a),t(e).on('load',l),i[0].parentNode.insertBefore(e,i[0]),/loaded|complete/.test(e.readyState)&&l()},onReady:function(){var t=this;this.ready=!0,this.player.addEvent('play',function(){t.hasPlayed=!0,t.onPlaying()}),this.player.addEvent('pause',function(){t.onPause()}),this.player.addEvent('finish',function(){t.onPause()}),this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){this.listeners.pause(),delete this.playStatus},insertIframe:function(){var t=document.createElement('iframe');t.src=this.url.replace('VIDEO_ID',this.videoId).replace('PLAYER_ID',this.playerId),t.id=this.playerId,this.element.parentNode.replaceChild(t,this.element),this.element=t},play:function(){var t=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.api('play'):(this.playOnReady=!0,window.$f?this.player||(this.insertIframe(),this.player=$f(this.element),this.player.addEvent('ready',function(){t.onReady()})):this.loadAPI())},pause:function(){this.ready?this.player.api('pause'):this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),t.extend(e.prototype,{VimeoPlayer:i,textFactory:function(t,e){var o=this.getItemProperty(t,this.options.vimeoVideoIdProperty);return o?(s+=1,this.videoFactory(t,e,new i(this.options.vimeoPlayerUrl,o,this.options.vimeoPlayerIdPrefix+s,this.options.vimeoClickToPlay))):n.call(this,t,e)}}),e}),function(t){'use strict';'function'==typeof define&&define.amd?define(['./blueimp-helper','./blueimp-gallery-video'],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){'use strict';if(!window.postMessage)return e;t.extend(e.prototype.options,{youTubeVideoIdProperty:'youtube',youTubePlayerVars:{wmode:'transparent'},youTubeClickToPlay:!0});var s=e.prototype.textFactory||e.prototype.imageFactory,i=function(t,e,i){this.videoId=t,this.playerVars=e,this.clickToPlay=i,this.element=document.createElement('div'),this.listeners={}};return t.extend(i.prototype,{canPlayType:function(){return!0},on:function(t,e){return this.listeners[t]=e,this},loadAPI:function(){var e,s=this,n=window.onYouTubeIframeAPIReady,o='//www.youtube.com/iframe_api',t=document.getElementsByTagName('script'),i=t.length;for(window.onYouTubeIframeAPIReady=function(){n&&n.apply(this),s.playOnReady&&s.play()};i;)if(i-=1,t[i].src===o)return;e=document.createElement('script'),e.src=o,t[0].parentNode.insertBefore(e,t[0])},onReady:function(){this.ready=!0,this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){e.prototype.setTimeout.call(this,this.checkSeek,null,2e3)},checkSeek:function(){(this.stateChange===YT.PlayerState.PAUSED||this.stateChange===YT.PlayerState.ENDED)&&(this.listeners.pause(),delete this.playStatus)},onStateChange:function(t){switch(t.data){case YT.PlayerState.PLAYING:this.hasPlayed=!0,this.onPlaying();break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:this.onPause()};this.stateChange=t.data},onError:function(t){this.listeners.error(t)},play:function(){var t=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.playVideo():(this.playOnReady=!0,window.YT&&YT.Player?this.player||(this.player=new YT.Player(this.element,{videoId:this.videoId,playerVars:this.playerVars,events:{onReady:function(){t.onReady()},onStateChange:function(e){t.onStateChange(e)},onError:function(e){t.onError(e)}}})):this.loadAPI())},pause:function(){this.ready?this.player.pauseVideo():this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),t.extend(e.prototype,{YouTubePlayer:i,textFactory:function(t,e){var n=this.getItemProperty(t,this.options.youTubeVideoIdProperty);return n?this.videoFactory(t,e,new i(n,this.options.youTubePlayerVars,this.options.youTubeClickToPlay)):s.call(this,t,e)}}),e}),function(t){'use strict';'function'==typeof define&&define.amd?define(['jquery','./blueimp-gallery'],t):t(window.jQuery,window.blueimp.Gallery)}(function(t,e){'use strict';t(document).on('click','[data-gallery]',function(i){var a=t(this).data('gallery'),l=t(a),s=l.length&&l||t(e.prototype.options.container),r={onopen:function(){s.data('gallery',this).trigger('open')},onopened:function(){s.trigger('opened')},onslide:function(){s.trigger('slide',arguments)},onslideend:function(){s.trigger('slideend',arguments)},onslidecomplete:function(){s.trigger('slidecomplete',arguments)},onclose:function(){s.trigger('close')},onclosed:function(){s.trigger('closed').removeData('gallery')}},n=t.extend(s.data(),{container:s[0],index:this,event:i},r),o=t('[data-gallery="'+a+'"]');return n.filter&&(o=o.filter(n.filter)),new e(o,n)})});
(function(e){'use strict';if(typeof define==='function'&&define.amd){define(['jquery','jquery.ui.widget'],e)}
else{e(window.jQuery)}}(function(e){'use strict';e.support.fileInput=!(new RegExp('(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))').test(window.navigator.userAgent)||e('<input type="file">').prop('disabled'));e.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);e.support.xhrFormDataFileUpload=!!window.FormData;e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);function t(t){var i=t==='dragover';return function(n){n.dataTransfer=n.originalEvent&&n.originalEvent.dataTransfer;var r=n.dataTransfer;if(r&&e.inArray('Files',r.types)!==-1&&this._trigger(t,e.Event(t,{delegatedEvent:n}))!==!1){n.preventDefault();if(i){r.dropEffect='copy'}}}};e.widget('blueimp.fileupload',{options:{dropZone:e(document),pasteZone:undefined,fileInput:undefined,replaceFileInput:!0,paramName:undefined,singleFileUploads:!0,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:undefined,forceIframeTransport:!1,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:!0,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:'Uploaded bytes exceed file size'},i18n:function(t,i){t=this.messages[t]||t.toString();if(i){e.each(i,function(e,i){t=t.replace('{'+e+'}',i)})};return t},formData:function(e){return e.serializeArray()},add:function(t,i){if(t.isDefaultPrevented()){return!1};if(i.autoUpload||(i.autoUpload!==!1&&e(this).fileupload('option','autoUpload'))){i.process().done(function(){i.submit()})}},processData:!1,contentType:!1,cache:!1},_specialOptions:['fileInput','dropZone','pasteZone','multipart','forceIframeTransport'],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=((Date.now)?Date.now():(new Date()).getTime());this.loaded=0;this.bitrate=0;this.getBitrate=function(e,t,i){var n=e-this.timestamp;if(!this.bitrate||!i||n>i){this.bitrate=(t-this.loaded)*(1000/n)*8;this.loaded=t;this.timestamp=e};return this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&((!t.multipart&&e.support.xhrFileUpload)||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;if(e.type(t.formData)==='function'){return t.formData(t.form)};if(e.isArray(t.formData)){return t.formData};if(e.type(t.formData)==='object'){i=[];e.each(t.formData,function(e,t){i.push({name:e,value:t})});return i};return[]},_getTotal:function(t){var i=0;e.each(t,function(e,t){i+=t.size||1});return i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};if(t._progress){e.extend(t._progress,i)}
else{t._progress=i}},_initResponseObject:function(e){var t;if(e._response){for(t in e._response){if(e._response.hasOwnProperty(t)){delete e._response[t]}}}
else{e._response={}}},_onProgress:function(t,i){if(t.lengthComputable){var n=((Date.now)?Date.now():(new Date()).getTime()),r;if(i._time&&i.progressInterval&&(n-i._time<i.progressInterval)&&t.loaded!==t.total){return};i._time=n;r=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0);this._progress.loaded+=(r-i._progress.loaded);this._progress.bitrate=this._bitrateTimer.getBitrate(n,this._progress.loaded,i.bitrateInterval);i._progress.loaded=i.loaded=r;i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(n,r,i.bitrateInterval);this._trigger('progress',e.Event('progress',{delegatedEvent:t}),i);this._trigger('progressall',e.Event('progressall',{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var n=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();if(i.upload){e(i.upload).bind('progress',function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable;e.loaded=i.loaded;e.total=i.total;n._onProgress(e,t)});t.xhr=function(){return i}}},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==='[object '+e+']'},_initXHRData:function(t){var s=this,i,n=t.files[0],o=t.multipart||!e.support.xhrFileUpload,r=e.type(t.paramName)==='array'?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers);if(t.contentRange){t.headers['Content-Range']=t.contentRange};if(!o||t.blob||!this._isInstanceOf('File',n)){t.headers['Content-Disposition']='attachment; filename="'+encodeURI(n.name)+'"'};if(!o){t.contentType=n.type||'application/octet-stream';t.data=t.blob||n}
else if(e.support.xhrFormDataFileUpload){if(t.postMessage){i=this._getFormData(t);if(t.blob){i.push({name:r,value:t.blob})}
else{e.each(t.files,function(n,s){i.push({name:(e.type(t.paramName)==='array'&&t.paramName[n])||r,value:s})})}}
else{if(s._isInstanceOf('FormData',t.formData)){i=t.formData}
else{i=new FormData();e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})};if(t.blob){i.append(r,t.blob,n.name)}
else{e.each(t.files,function(n,o){if(s._isInstanceOf('File',o)||s._isInstanceOf('Blob',o)){i.append((e.type(t.paramName)==='array'&&t.paramName[n])||r,o,o.uploadName||o.name)}})}};t.data=i};t.blob=null},_initIframeSettings:function(t){var i=e('<a></a>').prop('href',t.url).prop('host');t.dataType='iframe '+(t.dataType||'');t.formData=this._getFormData(t);if(t.redirect&&i&&i!==location.host){t.formData.push({name:t.redirectParamName||'redirect',value:t.redirect})}},_initDataSettings:function(e){if(this._isXHRUpload(e)){if(!this._chunkedUpload(e,!0)){if(!e.data){this._initXHRData(e)};this._initProgressListener(e)};if(e.postMessage){e.dataType='postmessage '+(e.dataType||'')}}
else{this._initIframeSettings(e)}},_getParamName:function(t){var n=e(t.fileInput),i=t.paramName;if(!i){i=[];n.each(function(){var t=e(this),r=t.prop('name')||'files[]',n=(t.prop('files')||[1]).length;while(n){i.push(r);n-=1}});if(!i.length){i=[n.prop('name')||'files[]']}}
else if(!e.isArray(i)){i=[i]};return i},_initFormSettings:function(t){if(!t.form||!t.form.length){t.form=e(t.fileInput.prop('form'));if(!t.form.length){t.form=e(this.options.fileInput.prop('form'))}};t.paramName=this._getParamName(t);if(!t.url){t.url=t.form.prop('action')||location.href};t.type=(t.type||(e.type(t.form.prop('method'))==='string'&&t.form.prop('method'))||'').toUpperCase();if(t.type!=='POST'&&t.type!=='PUT'&&t.type!=='PATCH'){t.type='POST'};if(!t.formAcceptCharset){t.formAcceptCharset=t.form.attr('accept-charset')}},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);this._initFormSettings(i);this._initDataSettings(i);return i},_getDeferredState:function(e){if(e.state){return e.state()};if(e.isResolved()){return'resolved'};if(e.isRejected()){return'rejected'};return'pending'},_enhancePromise:function(e){e.success=e.done;e.error=e.fail;e.complete=e.always;return e},_getXHRPromise:function(t,i,n){var r=e.Deferred(),s=r.promise();i=i||this.options.context||s;if(t===!0){r.resolveWith(i,n)}
else if(t===!1){r.rejectWith(i,n)};s.abort=r.promise;return this._enhancePromise(s)},_addConvenienceMethods:function(t,i){var n=this,r=function(t){return e.Deferred().resolveWith(n,t).promise()};i.process=function(t,s){if(t||s){i._processQueue=this._processQueue=(this._processQueue||r([this])).pipe(function(){if(i.errorThrown){return e.Deferred().rejectWith(n,[i]).promise()};return r(arguments)}).pipe(t,s)};return this._processQueue||r([this])};i.submit=function(){if(this.state()!=='pending'){i.jqXHR=this.jqXHR=(n._trigger('submit',e.Event('submit',{delegatedEvent:t}),this)!==!1)&&n._onSend(t,this)};return this.jqXHR||n._getXHRPromise()};i.abort=function(){if(this.jqXHR){return this.jqXHR.abort()};this.errorThrown='abort';n._trigger('fail',null,this);return n._getXHRPromise(!1)};i.state=function(){if(this.jqXHR){return n._getDeferredState(this.jqXHR)};if(this._processQueue){return n._getDeferredState(this._processQueue)}};i.processing=function(){return!this.jqXHR&&this._processQueue&&n._getDeferredState(this._processQueue)==='pending'};i.progress=function(){return this._progress};i.response=function(){return this._response}},_getUploadedBytes:function(e){var i=e.getResponseHeader('Range'),t=i&&i.split('-'),n=t&&t.length>1&&parseInt(t[1],10);return n&&n+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var r=this,s=t.files[0],o=s.size,n=t.uploadedBytes,f=t.maxChunkSize||o,u=this._blobSlice,a=e.Deferred(),l=a.promise(),d,p;if(!(this._isXHRUpload(t)&&u&&(n||f<o))||t.data){return!1};if(i){return!0};if(n>=o){s.error=t.i18n('uploadedBytes');return this._getXHRPromise(!1,t.context,[null,'error',s.error])};p=function(){var i=e.extend({},t),l=i._progress.loaded;i.blob=u.call(s,n,n+f,s.type);i.chunkSize=i.blob.size;i.contentRange='bytes '+n+'-'+(n+i.chunkSize-1)+'/'+o;r._initXHRData(i);r._initProgressListener(i);d=((r._trigger('chunksend',null,i)!==!1&&e.ajax(i))||r._getXHRPromise(!1,i.context)).done(function(s,f,u){n=r._getUploadedBytes(u)||(n+i.chunkSize);if(l+i.chunkSize-i._progress.loaded){r._onProgress(e.Event('progress',{lengthComputable:!0,loaded:n-i.uploadedBytes,total:n-i.uploadedBytes}),i)};t.uploadedBytes=i.uploadedBytes=n;i.result=s;i.textStatus=f;i.jqXHR=u;r._trigger('chunkdone',null,i);r._trigger('chunkalways',null,i);if(n<o){p()}
else{a.resolveWith(i.context,[s,f,u])}}).fail(function(e,t,n){i.jqXHR=e;i.textStatus=t;i.errorThrown=n;r._trigger('chunkfail',null,i);r._trigger('chunkalways',null,i);a.rejectWith(i.context,[e,t,n])})};this._enhancePromise(l);l.abort=function(){return d.abort()};p();return l},_beforeSend:function(e,t){if(this._active===0){this._trigger('start');this._bitrateTimer=new this._BitrateTimer();this._progress.loaded=this._progress.total=0;this._progress.bitrate=0};this._initResponseObject(t);this._initProgressObject(t);t._progress.loaded=t.loaded=t.uploadedBytes||0;t._progress.total=t.total=this._getTotal(t.files)||1;t._progress.bitrate=t.bitrate=0;this._active+=1;this._progress.loaded+=t.loaded;this._progress.total+=t.total},_onDone:function(t,i,n,r){var s=r._progress.total,o=r._response;if(r._progress.loaded<s){this._onProgress(e.Event('progress',{lengthComputable:!0,loaded:s,total:s}),r)};o.result=r.result=t;o.textStatus=r.textStatus=i;o.jqXHR=r.jqXHR=n;this._trigger('done',null,r)},_onFail:function(e,t,i,n){var r=n._response;if(n.recalculateProgress){this._progress.loaded-=n._progress.loaded;this._progress.total-=n._progress.total};r.jqXHR=n.jqXHR=e;r.textStatus=n.textStatus=t;r.errorThrown=n.errorThrown=i;this._trigger('fail',null,n)},_onAlways:function(e,t,i,n){this._trigger('always',null,n)},_onSend:function(t,i){if(!i.submit){this._addConvenienceMethods(t,i)};var n=this,s,l,o,p,r=n._getAJAXSettings(i),a=function(){n._sending+=1;r._bitrateTimer=new n._BitrateTimer();s=s||(((l||n._trigger('send',e.Event('send',{delegatedEvent:t}),r)===!1)&&n._getXHRPromise(!1,r.context,l))||n._chunkedUpload(r)||e.ajax(r)).done(function(e,t,i){n._onDone(e,t,i,r)}).fail(function(e,t,i){n._onFail(e,t,i,r)}).always(function(e,t,i){n._onAlways(e,t,i,r);n._sending-=1;n._active-=1;if(r.limitConcurrentUploads&&r.limitConcurrentUploads>n._sending){var s=n._slots.shift();while(s){if(n._getDeferredState(s)==='pending'){s.resolve();break};s=n._slots.shift()}};if(n._active===0){n._trigger('stop')}});return s};this._beforeSend(t,r);if(this.options.sequentialUploads||(this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)){if(this.options.limitConcurrentUploads>1){o=e.Deferred();this._slots.push(o);p=o.pipe(a)}
else{this._sequence=this._sequence.pipe(a,a);p=this._sequence};p.abort=function(){l=[undefined,'abort','abort'];if(!s){if(o){o.rejectWith(r.context,l)};return a()};return s.abort()};return this._enhancePromise(p)};return a()},_onAdd:function(t,i){var d=this,g=!0,s=e.extend({},this.options,i),r=i.files,h=r.length,a=s.limitMultiFileUploads,f=s.limitMultiFileUploadSize,v=s.limitMultiFileUploadSizeOverhead,m=0,u=this._getParamName(s),l,o,p,n,c=0;if(f&&(!h||r[0].size===undefined)){f=undefined};if(!(s.singleFileUploads||a||f)||!this._isXHRUpload(s)){p=[r];l=[u]}
else if(!(s.singleFileUploads||f)&&a){p=[];l=[];for(n=0;n<h;n+=a){p.push(r.slice(n,n+a));o=u.slice(n,n+a);if(!o.length){o=u};l.push(o)}}
else if(!s.singleFileUploads&&f){p=[];l=[];for(n=0;n<h;n=n+1){m+=r[n].size+v;if(n+1===h||((m+r[n+1].size+v)>f)||(a&&n+1-c>=a)){p.push(r.slice(c,n+1));o=u.slice(c,n+1);if(!o.length){o=u};l.push(o);c=n+1;m=0}}}
else{l=u};i.originalFiles=r;e.each(p||r,function(n,r){var s=e.extend({},i);s.files=p?r:[r];s.paramName=l[n];d._initResponseObject(s);d._initProgressObject(s);d._addConvenienceMethods(t,s);g=d._trigger('add',e.Event('add',{delegatedEvent:t}),s);return g});return g},_replaceFileInput:function(t){var i=t.fileInput,n=i.clone(!0);t.fileInputClone=n;e('<form></form>').append(n)[0].reset();i.after(n).detach();e.cleanData(i.unbind('remove'));this.options.fileInput=this.options.fileInput.map(function(e,t){if(t===i[0]){return n[0]};return t});if(i[0]===this.element[0]){this.element=n}},_handleFileTreeEntry:function(t,i){var l=this,n=e.Deferred(),r=function(e){if(e&&!e.entry){e.entry=t};n.resolve([e])},p=function(e){l._handleFileTreeEntries(e,i+t.name+'/').done(function(e){n.resolve(e)}).fail(r)},o=function(){a.readEntries(function(e){if(!e.length){p(s)}
else{s=s.concat(e);o()}},r)},a,s=[];i=i||'';if(t.isFile){if(t._file){t._file.relativePath=i;n.resolve(t._file)}
else{t.file(function(e){e.relativePath=i;n.resolve(e)},r)}}
else if(t.isDirectory){a=t.createReader();o()}
else{n.resolve([])};return n.promise()},_handleFileTreeEntries:function(t,i){var n=this;return e.when.apply(e,e.map(t,function(e){return n._handleFileTreeEntry(e,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;if(i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)){return this._handleFileTreeEntries(e.map(i,function(e){var t;if(e.webkitGetAsEntry){t=e.webkitGetAsEntry();if(t){t._file=e.getAsFile()};return t};return e.getAsEntry()}))};return e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n=t.prop('webkitEntries')||t.prop('entries'),i,r;if(n&&n.length){return this._handleFileTreeEntries(n)};i=e.makeArray(t.prop('files'));if(!i.length){r=t.prop('value');if(!r){return e.Deferred().resolve([]).promise()};i=[{name:r.replace(/^.*\\/,'')}]}
else if(i[0].name===undefined&&i[0].fileName){e.each(i,function(e,t){t.name=t.fileName;t.size=t.fileSize})};return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){if(!(t instanceof e)||t.length===1){return this._getSingleFileInputFiles(t)};return e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(t){var n=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(r){i.files=r;if(n.options.replaceFileInput){n._replaceFileInput(i)};if(n._trigger('change',e.Event('change',{delegatedEvent:t}),i)!==!1){n._onAdd(t,i)}})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,n={files:[]};if(i&&i.length){e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile();if(i){n.files.push(i)}});if(this._trigger('paste',e.Event('paste',{delegatedEvent:t}),n)!==!1){this._onAdd(t,n)}}},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var r=this,i=t.dataTransfer,n={};if(i&&i.files&&i.files.length){t.preventDefault();this._getDroppedFiles(i).always(function(i){n.files=i;if(r._trigger('drop',e.Event('drop',{delegatedEvent:t}),n)!==!1){r._onAdd(t,n)}})}},_onDragOver:t('dragover'),_onDragEnter:t('dragenter'),_onDragLeave:t('dragleave'),_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave});this._on(this.options.pasteZone,{paste:this._onPaste})};if(e.support.fileInput){this._on(this.options.fileInput,{change:this._onChange})}},_destroyEventHandlers:function(){this._off(this.options.dropZone,'dragenter dragleave dragover drop');this._off(this.options.pasteZone,'paste');this._off(this.options.fileInput,'change')},_setOption:function(t,i){var n=e.inArray(t,this._specialOptions)!==-1;if(n){this._destroyEventHandlers()};this._super(t,i);if(n){this._initSpecialOptions();this._initEventHandlers()}},_initSpecialOptions:function(){var t=this.options;if(t.fileInput===undefined){t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]')}
else if(!(t.fileInput instanceof e)){t.fileInput=e(t.fileInput)};if(!(t.dropZone instanceof e)){t.dropZone=e(t.dropZone)};if(!(t.pasteZone instanceof e)){t.pasteZone=e(t.pasteZone)}},_getRegExp:function(e){var t=e.split('/'),i=t.pop();t.shift();return new RegExp(t.join('/'),i)},_isRegExpOption:function(t,i){return t!=='url'&&e.type(i)==='string'&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,n=this.options,i=e(this.element[0].cloneNode(!1));e.each(i.data(),function(e,r){var s='data-'+e.replace(/([a-z])([A-Z])/g,'$1-$2').toLowerCase();if(i.attr(s)){if(t._isRegExpOption(e,r)){r=t._getRegExp(r)};n[e]=r}})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;if(!t||this.options.disabled){return};if(t.fileInput&&!t.files){this._getFileInputFiles(t.fileInput).always(function(e){t.files=e;i._onAdd(null,t)})}
else{t.files=e.makeArray(t.files);this._onAdd(null,t)}},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var o=this,i=e.Deferred(),r=i.promise(),n,s;r.abort=function(){s=!0;if(n){return n.abort()};i.reject(null,'abort','abort');return r};this._getFileInputFiles(t.fileInput).always(function(e){if(s){return};if(!e.length){i.reject();return};t.files=e;n=o._onSend(null,t);n.then(function(e,t,n){i.resolve(e,t,n)},function(e,t,n){i.reject(e,t,n)})});return this._enhancePromise(r)};t.files=e.makeArray(t.files);if(t.files.length){return this._onSend(null,t)}};return this._getXHRPromise(!1,t&&t.context)}})}));
(function(e){'use strict';if(typeof define==='function'&&define.amd){define(['jquery','./jquery.fileupload'],e)}
else{e(window.jQuery)}}(function(e){'use strict';var s=e.blueimp.fileupload.prototype.options.add;e.widget('blueimp.fileupload',e.blueimp.fileupload,{options:{processQueue:[],add:function(r,i){var t=e(this);i.process(function(){return t.fileupload('process',i)});s.call(this,r,i)}},processActions:{},_processFile:function(s,i){var r=this,o=e.Deferred().resolveWith(r,[s]),t=o.promise();this._trigger('process',null,s);e.each(s.processQueue,function(s,o){var n=function(s){if(i.errorThrown){return e.Deferred().rejectWith(r,[i]).promise()};return r.processActions[o.action].call(r,s,o)};t=t.pipe(n,o.always&&n)});t.done(function(){r._trigger('processdone',null,s);r._trigger('processalways',null,s)}).fail(function(){r._trigger('processfail',null,s);r._trigger('processalways',null,s)});return t},_transformProcessQueue:function(s){var r=[];e.each(s.processQueue,function(){var i={},o=this.action,t=this.prefix===!0?o:this.prefix;e.each(this,function(r,o){if(e.type(o)==='string'&&o.charAt(0)==='@'){i[r]=s[o.slice(1)||(t?t+r.charAt(0).toUpperCase()+r.slice(1):r)]}
else{i[r]=o}});r.push(i)});s.processQueue=r},processing:function(){return this._processing},process:function(s){var r=this,i=e.extend({},this.options,s);if(i.processQueue&&i.processQueue.length){this._transformProcessQueue(i);if(this._processing===0){this._trigger('processstart')};e.each(s.files,function(t){var o=t?e.extend({},i):i,n=function(){if(s.errorThrown){return e.Deferred().rejectWith(r,[s]).promise()};return r._processFile(o,s)};o.index=t;r._processing+=1;r._processingQueue=r._processingQueue.pipe(n,n).always(function(){r._processing-=1;if(r._processing===0){r._trigger('processstop')}})})};return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=e.Deferred().resolveWith(this).promise()}})}));
(function(e){'use strict';if(typeof define==='function'&&define.amd){define(['jquery','load-image','load-image-meta','load-image-exif','load-image-ios','canvas-to-blob','./jquery.fileupload-process'],e)}
else{e(window.jQuery,window.loadImage)}}(function(e,i){'use strict';e.blueimp.fileupload.prototype.options.processQueue.unshift({action:'loadImageMetaData',disableImageHead:'@',disableExif:'@',disableExifThumbnail:'@',disableExifSub:'@',disableExifGps:'@',disabled:'@disableImageMetaDataLoad'},{action:'loadImage',prefix:!0,fileTypes:'@',maxFileSize:'@',noRevoke:'@',disabled:'@disableImageLoad'},{action:'resizeImage',prefix:'image',maxWidth:'@',maxHeight:'@',minWidth:'@',minHeight:'@',crop:'@',orientation:'@',forceResize:'@',disabled:'@disableImageResize'},{action:'saveImage',quality:'@imageQuality',type:'@imageType',disabled:'@disableImageResize'},{action:'saveImageMetaData',disabled:'@disableImageMetaDataSave'},{action:'resizeImage',prefix:'preview',maxWidth:'@',maxHeight:'@',minWidth:'@',minHeight:'@',crop:'@',orientation:'@',thumbnail:'@',canvas:'@',disabled:'@disableImagePreview'},{action:'setImage',name:'@imagePreviewName',disabled:'@disableImagePreview'},{action:'deleteImageReferences',disabled:'@disableImageReferencesDeletion'});e.widget('blueimp.fileupload',e.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:10000000,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(a,t){if(t.disabled){return a};var r=this,n=a.files[a.index],s=e.Deferred();if((e.type(t.maxFileSize)==='number'&&n.size>t.maxFileSize)||(t.fileTypes&&!t.fileTypes.test(n.type))||!i(n,function(e){if(e.src){a.img=e};s.resolveWith(r,[a])},t)){return a};return s.promise()},resizeImage:function(a,t){if(t.disabled||!(a.canvas||a.img)){return a};t=e.extend({canvas:!0},t);var d=this,s=e.Deferred(),n=(t.canvas&&a.canvas)||a.img,l=function(e){if(e&&(e.width!==n.width||e.height!==n.height||t.forceResize)){a[e.getContext?'canvas':'img']=e};a.preview=e;s.resolveWith(d,[a])},r;if(a.exif){if(t.orientation===!0){t.orientation=a.exif.get('Orientation')};if(t.thumbnail){r=a.exif.get('Thumbnail');if(r){i(r,l,t);return s.promise()}};if(a.orientation){delete t.orientation}
else{a.orientation=t.orientation}};if(n){l(i.scale(n,t));return s.promise()};return a},saveImage:function(i,a){if(!i.canvas||a.disabled){return i};var s=this,t=i.files[i.index],n=e.Deferred();if(i.canvas.toBlob){i.canvas.toBlob(function(e){if(!e.name){if(t.type===e.type){e.name=t.name}
else if(t.name){e.name=t.name.replace(/\..+$/,'.'+e.type.substr(6))}};if(t.type!==e.type){delete i.imageHead};i.files[i.index]=e;n.resolveWith(s,[i])},a.type||t.type,a.quality)}
else{return i};return n.promise()},loadImageMetaData:function(a,t){if(t.disabled){return a};var s=this,n=e.Deferred();i.parseMetaData(a.files[a.index],function(i){e.extend(a,i);n.resolveWith(s,[a])},t);return n.promise()},saveImageMetaData:function(e,i){if(!(e.imageHead&&e.canvas&&e.canvas.toBlob&&!i.disabled)){return e};var a=e.files[e.index],t=new Blob([e.imageHead,this._blobSlice.call(a,20)],{type:a.type});t.name=a.name;e.files[e.index]=t;return e},setImage:function(e,i){if(e.preview&&!i.disabled){e.files[e.index][i.name||'preview']=e.preview};return e},deleteImageReferences:function(e,i){if(!i.disabled){delete e.img;delete e.canvas;delete e.preview;delete e.imageHead};return e}}})}));
(function(e){'use strict';if(typeof define==='function'&&define.amd){define(['jquery','load-image','./jquery.fileupload-process'],e)}
else{e(window.jQuery,window.loadImage)}}(function(e,i){'use strict';e.blueimp.fileupload.prototype.options.processQueue.unshift({action:'loadAudio',prefix:!0,fileTypes:'@',maxFileSize:'@',disabled:'@disableAudioPreview'},{action:'setAudio',name:'@audioPreviewName',disabled:'@disableAudioPreview'});e.widget('blueimp.fileupload',e.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement('audio'),processActions:{loadAudio:function(o,d){if(d.disabled){return o};var a=o.files[o.index],u,t;if(this._audioElement.canPlayType&&this._audioElement.canPlayType(a.type)&&(e.type(d.maxFileSize)!=='number'||a.size<=d.maxFileSize)&&(!d.fileTypes||d.fileTypes.test(a.type))){u=i.createObjectURL(a);if(u){t=this._audioElement.cloneNode(!1);t.src=u;t.controls=!0;o.audio=t;return o}};return o},setAudio:function(e,i){if(e.audio&&!i.disabled){e.files[e.index][i.name||'preview']=e.audio};return e}}})}));
(function(e){'use strict';if(typeof define==='function'&&define.amd){define(['jquery','load-image','./jquery.fileupload-process'],e)}
else{e(window.jQuery,window.loadImage)}}(function(e,i){'use strict';e.blueimp.fileupload.prototype.options.processQueue.unshift({action:'loadVideo',prefix:!0,fileTypes:'@',maxFileSize:'@',disabled:'@disableVideoPreview'},{action:'setVideo',name:'@videoPreviewName',disabled:'@disableVideoPreview'});e.widget('blueimp.fileupload',e.blueimp.fileupload,{options:{loadVideoFileTypes:/^video\/.*$/},_videoElement:document.createElement('video'),processActions:{loadVideo:function(o,d){if(d.disabled){return o};var t=o.files[o.index],n,l;if(this._videoElement.canPlayType&&this._videoElement.canPlayType(t.type)&&(e.type(d.maxFileSize)!=='number'||t.size<=d.maxFileSize)&&(!d.fileTypes||d.fileTypes.test(t.type))){n=i.createObjectURL(t);if(n){l=this._videoElement.cloneNode(!1);l.src=n;l.controls=!0;o.video=l;return o}};return o},setVideo:function(e,i){if(e.video&&!i.disabled){e.files[e.index][i.name||'preview']=e.video};return e}}})}));
(function(e){'use strict';if(typeof define==='function'&&define.amd){define(['jquery','./jquery.fileupload-process'],e)}
else{e(window.jQuery)}}(function(e){'use strict';e.blueimp.fileupload.prototype.options.processQueue.push({action:'validate',always:!0,acceptFileTypes:'@',maxFileSize:'@',minFileSize:'@',maxNumberOfFiles:'@',disabled:'@disableValidation'});e.widget('blueimp.fileupload',e.blueimp.fileupload,{options:{getNumberOfFiles:e.noop,messages:{maxNumberOfFiles:'Maximum number of files exceeded',acceptFileTypes:'File type not allowed',maxFileSize:'File is too large',minFileSize:'File is too small'}},processActions:{validate:function(i,l){if(l.disabled){return i};var o=e.Deferred(),r=this.options,s=i.files[i.index],t;if(l.minFileSize||l.maxFileSize){t=s.size};if(e.type(l.maxNumberOfFiles)==='number'&&(r.getNumberOfFiles()||0)+i.files.length>l.maxNumberOfFiles){s.error=r.i18n('maxNumberOfFiles')}
else if(l.acceptFileTypes&&!(l.acceptFileTypes.test(s.type)||l.acceptFileTypes.test(s.name))){s.error=r.i18n('acceptFileTypes')}
else if(t>l.maxFileSize){s.error=r.i18n('maxFileSize')}
else if(e.type(t)==='number'&&t<l.minFileSize){s.error=r.i18n('minFileSize')}
else{delete s.error};if(s.error||i.files.error){i.files.error=!0;o.rejectWith(this,[i])}
else{o.resolveWith(this,[i])};return o.promise()}}})}));
(function(e){'use strict';if(typeof define==='function'&&define.amd){define(['jquery','tmpl','./jquery.fileupload-image','./jquery.fileupload-audio','./jquery.fileupload-video','./jquery.fileupload-validate'],e)}
else{e(window.jQuery,window.tmpl)}}(function(e,t){'use strict';e.blueimp.fileupload.prototype._specialOptions.push('filesContainer','uploadTemplateId','downloadTemplateId');e.widget('blueimp.fileupload',e.blueimp.fileupload,{options:{autoUpload:!1,uploadTemplateId:'template-upload',downloadTemplateId:'template-download',filesContainer:undefined,prependFiles:!1,dataType:'json',messages:{unknownError:'Unknown error'},getNumberOfFiles:function(){return this.filesContainer.children().not('.processing').length},getFilesFromResponse:function(t){if(t.result&&e.isArray(t.result.files)){return t.result.files};return[]},add:function(t,i){if(t.isDefaultPrevented()){return!1};var r=e(this),n=r.data('blueimp-fileupload')||r.data('fileupload'),o=n.options;i.context=n._renderUpload(i.files).data('data',i).addClass('processing');o.filesContainer[o.prependFiles?'prepend':'append'](i.context);n._forceReflow(i.context);n._transition(i.context);i.process(function(){return r.fileupload('process',i)}).always(function(){i.context.each(function(t){e(this).find('.size').text(n._formatFileSize(i.files[t].size))}).removeClass('processing');n._renderPreviews(i)}).done(function(){i.context.find('.start').prop('disabled',!1);if((n._trigger('added',t,i)!==!1)&&(o.autoUpload||i.autoUpload)&&i.autoUpload!==!1){i.submit()}}).fail(function(){if(i.files.error){i.context.each(function(t){var n=i.files[t].error;if(n){e(this).find('.error').text(n)}})}})},send:function(t,i){if(t.isDefaultPrevented()){return!1};var n=e(this).data('blueimp-fileupload')||e(this).data('fileupload');if(i.context&&i.dataType&&i.dataType.substr(0,6)==='iframe'){i.context.find('.progress').addClass(!e.support.transition&&'progress-animated').attr('aria-valuenow',100).children().first().css('width','100%')};return n._trigger('sent',t,i)},done:function(t,i){if(t.isDefaultPrevented()){return!1};var n=e(this).data('blueimp-fileupload')||e(this).data('fileupload'),s=i.getFilesFromResponse||n.options.getFilesFromResponse,a=s(i),r,o;if(i.context){i.context.each(function(s){var d=a[s]||{error:'Empty file upload result'};o=n._addFinishedDeferreds();n._transition(e(this)).done(function(){var a=e(this);r=n._renderDownload([d]).replaceAll(a);n._forceReflow(r);n._transition(r).done(function(){i.context=e(this);n._trigger('completed',t,i);n._trigger('finished',t,i);o.resolve()})})})}
else{r=n._renderDownload(a)[n.options.prependFiles?'prependTo':'appendTo'](n.options.filesContainer);n._forceReflow(r);o=n._addFinishedDeferreds();n._transition(r).done(function(){i.context=e(this);n._trigger('completed',t,i);n._trigger('finished',t,i);o.resolve()})}},fail:function(t,i){if(t.isDefaultPrevented()){return!1};var n=e(this).data('blueimp-fileupload')||e(this).data('fileupload'),o,r;if(i.context){i.context.each(function(a){if(i.errorThrown!=='abort'){var s=i.files[a];s.error=s.error||i.errorThrown||i.i18n('unknownError');r=n._addFinishedDeferreds();n._transition(e(this)).done(function(){var a=e(this);o=n._renderDownload([s]).replaceAll(a);n._forceReflow(o);n._transition(o).done(function(){i.context=e(this);n._trigger('failed',t,i);n._trigger('finished',t,i);r.resolve()})})}
else{r=n._addFinishedDeferreds();n._transition(e(this)).done(function(){e(this).remove();n._trigger('failed',t,i);n._trigger('finished',t,i);r.resolve()})}})}
else if(i.errorThrown!=='abort'){i.context=n._renderUpload(i.files)[n.options.prependFiles?'prependTo':'appendTo'](n.options.filesContainer).data('data',i);n._forceReflow(i.context);r=n._addFinishedDeferreds();n._transition(i.context).done(function(){i.context=e(this);n._trigger('failed',t,i);n._trigger('finished',t,i);r.resolve()})}
else{n._trigger('failed',t,i);n._trigger('finished',t,i);n._addFinishedDeferreds().resolve()}},progress:function(t,i){if(t.isDefaultPrevented()){return!1};var n=Math.floor(i.loaded/i.total*100);if(i.context){i.context.each(function(){e(this).find('.progress').attr('aria-valuenow',n).children().first().css('width',n+'%')})}},progressall:function(t,i){if(t.isDefaultPrevented()){return!1};var n=e(this),r=Math.floor(i.loaded/i.total*100),o=n.find('.fileupload-progress'),a=o.find('.progress-extended');if(a.length){a.html((n.data('blueimp-fileupload')||n.data('fileupload'))._renderExtendedProgress(i))};o.find('.progress').attr('aria-valuenow',r).children().first().css('width',r+'%')},start:function(t){if(t.isDefaultPrevented()){return!1};var i=e(this).data('blueimp-fileupload')||e(this).data('fileupload');i._resetFinishedDeferreds();i._transition(e(this).find('.fileupload-progress')).done(function(){i._trigger('started',t)})},stop:function(t){if(t.isDefaultPrevented()){return!1};var i=e(this).data('blueimp-fileupload')||e(this).data('fileupload'),n=i._addFinishedDeferreds();e.when.apply(e,i._getFinishedDeferreds()).done(function(){i._trigger('stopped',t)});i._transition(e(this).find('.fileupload-progress')).done(function(){e(this).find('.progress').attr('aria-valuenow','0').children().first().css('width','0%');e(this).find('.progress-extended').html('&nbsp;');n.resolve()})},processstart:function(t){if(t.isDefaultPrevented()){return!1};e(this).addClass('fileupload-processing')},processstop:function(t){if(t.isDefaultPrevented()){return!1};e(this).removeClass('fileupload-processing')},destroy:function(t,i){if(t.isDefaultPrevented()){return!1};var n=e(this).data('blueimp-fileupload')||e(this).data('fileupload'),r=function(){n._transition(i.context).done(function(){e(this).remove();n._trigger('destroyed',t,i)})};if(i.url){i.dataType=i.dataType||n.options.dataType;e.ajax(i).done(r).fail(function(){n._trigger('destroyfailed',t,i)})}
else{r()}}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(t){if(!t){t=e.Deferred()};this._finishedUploads.push(t);return t},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var t=e(this),i=t.prop('href'),n=t.prop('download'),r='application/octet-stream';t.bind('dragstart',function(e){try{e.originalEvent.dataTransfer.setData('DownloadURL',[r,n,i].join(':'))}catch(t){}})},_formatFileSize:function(e){if(typeof e!=='number'){return''};if(e>=1000000000){return(e/1000000000).toFixed(2)+' GB'};if(e>=1000000){return(e/1000000).toFixed(2)+' MB'};return(e/1000).toFixed(2)+' KB'},_formatBitrate:function(e){if(typeof e!=='number'){return''};if(e>=1000000000){return(e/1000000000).toFixed(2)+' Gbit/s'};if(e>=1000000){return(e/1000000).toFixed(2)+' Mbit/s'};if(e>=1000){return(e/1000).toFixed(2)+' kbit/s'};return e.toFixed(2)+' bit/s'},_formatTime:function(e){var i=new Date(e*1000),t=Math.floor(e/86400);t=t?t+'d ':'';return t+('0'+i.getUTCHours()).slice(-2)+':'+('0'+i.getUTCMinutes()).slice(-2)+':'+('0'+i.getUTCSeconds()).slice(-2)},_formatPercentage:function(e){return(e*100).toFixed(2)+' %'},_renderExtendedProgress:function(e){return this._formatBitrate(e.bitrate)+' | '+this._formatTime((e.total-e.loaded)*8/e.bitrate)+' | '+this._formatPercentage(e.loaded/e.total)+' | '+this._formatFileSize(e.loaded)+' / '+this._formatFileSize(e.total)},_renderTemplate:function(t,i){if(!t){return e()};var n=t({files:i,formatFileSize:this._formatFileSize,options:this.options});if(n instanceof e){return n};return e(this.options.templatesContainer).html(n).children()},_renderPreviews:function(t){t.context.find('.preview').each(function(i,n){e(n).append(t.files[i].preview)})},_renderUpload:function(e){return this._renderTemplate(this.options.uploadTemplate,e)},_renderDownload:function(e){return this._renderTemplate(this.options.downloadTemplate,e).find('a[download]').each(this._enableDragToDesktop).end()},_startHandler:function(t){t.preventDefault();var n=e(t.currentTarget),r=n.closest('.template-upload'),i=r.data('data');n.prop('disabled',!0);if(i&&i.submit){i.submit()}},_cancelHandler:function(t){t.preventDefault();var n=e(t.currentTarget).closest('.template-upload,.template-download'),i=n.data('data')||{};i.context=i.context||n;if(i.abort){i.abort()}
else{i.errorThrown='abort';this._trigger('fail',t,i)}},_deleteHandler:function(t){t.preventDefault();var i=e(t.currentTarget);this._trigger('destroy',t,e.extend({context:i.closest('.template-download'),type:'DELETE'},i.data()))},_forceReflow:function(t){return e.support.transition&&t.length&&t[0].offsetWidth},_transition:function(t){var i=e.Deferred();if(e.support.transition&&t.hasClass('fade')&&t.is(':visible')){t.bind(e.support.transition.end,function(n){if(n.target===t[0]){t.unbind(e.support.transition.end);i.resolveWith(t)}}).toggleClass('in')}
else{t.toggleClass('in');i.resolveWith(t)};return i},_initButtonBarEventHandlers:function(){var t=this.element.find('.fileupload-buttonbar'),i=this.options.filesContainer;this._on(t.find('.start'),{click:function(e){e.preventDefault();i.find('.start').click()}});this._on(t.find('.cancel'),{click:function(e){e.preventDefault();i.find('.cancel').click()}});this._on(t.find('.delete'),{click:function(e){e.preventDefault();i.find('.toggle:checked').closest('.template-download').find('.delete').click();t.find('.toggle').prop('checked',!1)}});this._on(t.find('.toggle'),{change:function(t){i.find('.toggle').prop('checked',e(t.currentTarget).is(':checked'))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find('.fileupload-buttonbar').find('.start, .cancel, .delete'),'click');this._off(this.element.find('.fileupload-buttonbar .toggle'),'change.')},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{'click .start':this._startHandler,'click .cancel':this._cancelHandler,'click .delete':this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,'click');this._super()},_enableFileInputButton:function(){this.element.find('.fileinput-button input').prop('disabled',!1).parent().removeClass('disabled')},_disableFileInputButton:function(){this.element.find('.fileinput-button input').prop('disabled',!0).parent().addClass('disabled')},_initTemplates:function(){var e=this.options;e.templatesContainer=this.document[0].createElement(e.filesContainer.prop('nodeName'));if(t){if(e.uploadTemplateId){e.uploadTemplate=t(e.uploadTemplateId)};if(e.downloadTemplateId){e.downloadTemplate=t(e.downloadTemplateId)}}},_initFilesContainer:function(){var t=this.options;if(t.filesContainer===undefined){t.filesContainer=this.element.find('.files')}
else if(!(t.filesContainer instanceof e)){t.filesContainer=e(t.filesContainer)}},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates()},_create:function(){this._super();this._resetFinishedDeferreds();if(!e.support.fileInput){this._disableFileInputButton()}},enable:function(){var e=!1;if(this.options.disabled){e=!0};this._super();if(e){this.element.find('input, button').prop('disabled',!1);this._enableFileInputButton()}},disable:function(){if(!this.options.disabled){this.element.find('input, button').prop('disabled',!0);this._disableFileInputButton()};this._super()}})}));